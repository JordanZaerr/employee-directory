{"version":3,"sources":["public/app/app.module.js","public/app/app.routes.js","public/app/app.run.js","public/app/admin/components/admin-topbar.controller.js","public/app/admin/components/seat-picker-desk.directive.js","public/app/admin/components/seat-picker-topbar.controller.js","public/app/admin/components/user-selector.controller.js","public/app/admin/services/auth.service.js","public/app/admin/services/cached-user-resource.service.js","public/app/admin/services/employee-admin.service.js","public/app/admin/services/event-admin.service.js","public/app/admin/services/user-resource.service.js","public/app/admin/services/user.service.js","public/app/admin/views/create-employee.controller.js","public/app/admin/views/create-user.controller.js","public/app/admin/views/login.controller.js","public/app/admin/views/seat-picker-floor.controller.js","public/app/admin/views/seat-picker.controller.js","public/app/admin/views/update-employee.controller.js","public/app/admin/views/update-user.controller.js","public/app/admin/views/user-list.controller.js","public/app/admin/views/user-profile.controller.js","public/app/birthdays/components/birthdays-topbar.controller.js","public/app/birthdays/views/birthdays.controller.js","public/app/committees/components/committees-topbar.controller.js","public/app/committees/views/committees.controller.js","public/app/employees/components/desk.directive.js","public/app/employees/components/employee-card.directive.js","public/app/employees/components/employee-selector.controller.js","public/app/employees/components/employee-topbar.controller.js","public/app/employees/services/cached-desk-resource.service.js","public/app/employees/services/cached-employee-resource.service.js","public/app/employees/services/desk-resource.service.js","public/app/employees/services/desk.service.js","public/app/employees/services/employee-resource.service.js","public/app/employees/services/employee.service.js","public/app/employees/views/employee.controller.js","public/app/common/components/artifact.directive.js","public/app/common/components/footer.directive.js","public/app/common/components/header.directive.js","public/app/common/components/index-topbar.controller.js","public/app/common/components/sidebar-left.directive.js","public/app/common/components/today-panel.directive.js","public/app/common/filters/custom-filters.js","public/app/common/services/artifact-resource.service.js","public/app/common/services/artifact.service.js","public/app/common/services/cached-artifact-resource.service.js","public/app/common/services/identity.service.js","public/app/common/services/notifier.service.js","public/app/common/services/sidebar.service.js","public/app/common/utilities/highlighter.directive.js","public/app/common/utilities/nanoscroller.directive.js","public/app/common/utilities/svg.directive.js","public/app/common/views/floor.controller.js","public/app/common/views/index.controller.js","public/app/events/components/event-info.directive.js","public/app/events/components/event-sidebar.controller.js","public/app/events/components/event-topbar.controller.js","public/app/events/services/cached-event-resource.service.js","public/app/events/services/event-resource.service.js","public/app/events/services/event.service.js","public/app/events/views/event.controller.js","public/app/guilds/components/guilds-topbar.controller.js","public/app/guilds/views/guilds.controller.js","public/app/help/components/help-topbar.controller.js","public/app/help/views/help.controller.js","public/app/printers/components/printer-card.directive.js","public/app/printers/components/printer-selector.controller.js","public/app/printers/components/printer-topbar.controller.js","public/app/printers/components/printer.directive.js","public/app/printers/services/cached-printer-resource.service.js","public/app/printers/services/printer-resource.service.js","public/app/printers/services/printer.service.js","public/app/printers/views/printer.controller.js","public/app/rooms/components/room-card.directive.js","public/app/rooms/components/room-selector.controller.js","public/app/rooms/components/room-topbar.controller.js","public/app/rooms/components/room.directive.js","public/app/rooms/services/cached-room-resource.service.js","public/app/rooms/services/room-resource.service.js","public/app/rooms/services/room.service.js","public/app/rooms/views/room.controller.js","public/app/seniority/components/seniority-topbar.controller.js","public/app/seniority/views/seniority.controller.js","public/app/admin/views/events/create-event.controller.js","public/app/admin/views/events/update-event.controller.js","public/app/employees/views/map/employee-map.controller.js","public/app/employees/views/org-chart/org-chart.controller.js","public/app/employees/views/profile/employee-profile.controller.js","public/app/help/views/location/help-location.controller.js","public/app/help/views/navigation/help-navigation.controller.js","public/app/help/views/profile/help-profile.controller.js","public/app/help/views/org-chart/help-org-chart.controller.js","public/app/printers/views/profile/printer-profile.controller.js","public/app/printers/views/map/printer-map.controller.js","public/app/rooms/views/profile/room-profile.controller.js","public/app/rooms/views/map/room-map.controller.js"],"names":["angular","module","constant","window","_","moment","configure","$stateProvider","$urlRouterProvider","$locationProvider","$compileProvider","routeRoleChecks","superAdmin","requireSuperAdmin","admin","requireAdmin","user","requireAuth","aHrefSanitizationWhitelist","html5Mode","otherwise","when","state","url","views","main","templateUrl","controller","controllerAs","topbar","sidebar","main@","sidebar@","topbar@","resolve","auth","edAuthService","authorizeCurrentUserForRoute","authorizeAuthenticatedUserForRoute","config","$inject","appRun","$rootScope","$state","$stateParams","$document","edSidebarService","$on","event","toState","toParams","fromState","fromParams","error","go","body","scrollTop","documentElement","firstname","lastname","printer","printerbrand","room","roomtype","employee","team","department","openTodayPanel","run","edAdminTopbarCtrl","edIdentityService","vm","this","identity","edSeatPickerDesk","directive","restrict","replace","scope","location","floor","seat","orientation","classification","xpos","ypos","ctrlFunc","bindToController","edEmployeeAdminService","edNotifierService","edEmployeeService","activate","filter","employees","assignSeat","newEmployeeData","updateEmployee","then","notify","getAllEmployees","edSeatPickerTopbarCtrl","edUserSelectorCtrl","$scope","edUserService","selectUser","setSelectedUser","users","getAllUsers","selectedUser","getSelectedUser","deregisterUserUpdated","$http","$q","edUserResourceService","authenticateUser","username","password","dfd","defer","post","response","data","success","extend","currentUser","promise","createUser","newUserData","newUser","$save","$broadcast","reject","reason","updateCurrentUser","clone","copy","$update","updateUser","currentUserClone","_id","logoutUser","logout","undefined","role","isAuthorized","isAuthenticated","service","factory","edCachedUserResourceService","query","cacheBust","cacheKill","Date","getTime","edEmployeeResourceService","Upload","selectedEmployees","getSelectedEmployees","removeAllSelectedEmployees","createEmployee","newEmployee","uploadEmployeePhoto","employeePhoto","employeeData","upload","file","fileName","eid","name","split","pop","toLowerCase","resp","console","log","status","evt","progressPercentage","parseInt","loaded","total","edEventAdminService","edEventService","edEventResourceService","updateEvent","newEventData","selectedEvent","getSelectedEvent","getAllEvents","createEvent","newEvent","$resource","userResource","update","method","isArray","prototype","isAdmin","roles","indexOf","selected","edCreateEmployeeCtrl","edDeskService","resetForm","setLockSidebar","$promise","createManagerList","firstName","lastName","nickname","email","phone","ext","title","guilds","committees","hasReports","mid","birthdate","hireDate","legacyCompany","managers","forEach","include","guild","push","committee","image","updateSelectedEmployees","createEmployeeForm","$setPristine","desks","getAllDesks","locationOptions","value","text","departments","legacyCompanies","employeesUpdatedEvent","edCreateUserCtrl","edLoginCtrl","signin","edSeatPickerFloorCtrl","checkForSelectedEmployee","currentState","current","locationAndFloor","locationName","deskFilter","desk","length","setSelectMultipleEmployees","setDisplayEmployeeInfoType","deregisterEmployee","edSeatPickerCtrl","updateMappedEmployee","setRemoteEmployee","selectedEmployee","edUpdateEmployeeCtrl","populateEmployee","format","filterManagers","filteredManagers","manager","imageFile","deleteEmployee","deletedEmployee","directReports","directReport","deleted","cancelUpdateEmployee","selectedEmployeesChangeEvent","edUpdateUserCtrl","populateUserInfo","selectedUserChangeEvent","edUserListCtrl","edUserProfileCtrl","fname","lname","edBirthdaysTopbarCtrl","edBirthdaysCtrl","filterEmployeesByBirthday","currentDay","date","birthMonthEmployees","sortBy","requestedMonth","months","month","birthday","currentMonth","birthdayToday","profileEmployee","edCommitteesTopbarCtrl","edCommitteesCtrl","filterEmployeesByCommittee","committeeMembers","edDesk","$timeout","$compile","linkFunc","el","attrs","mappedEmployee","getMappedEmployee","scrollToElement","addClass","append","displayName","markerLabel","$","leftPos","outerWidth","css","removeClass","find","remove","deregister","link","edPrinterService","edRoomService","mapEmployee","viewingProfile","mappedEmployeeArray","updateMappedPrinter","updateMappedRoom","viewProfile","edEmployeeCard","twEmail","lync","yos","diff","seniorityClass","seniorityBucket","birthDayAndMonth","birthMonthOfYear","deselectEmployee","parent","child","children","first","editEmployee","edEmployeeSelectorCtrl","filterLocations","locations","splice","locationFilter","nycOnly","filterFloors","floors","floorFilter","selectEmployee","displayEmployeeInfoType","selectAll","addAllFilteredEmployees","filteredEmployees","scrollTopAnimated","selectNone","clearFilter","employeeName","6","7","8","buf","nyc","getDisplayEmployeeInfoType","allowSelectAll","getSelectMultipleEmployees","deregisterEmployeesUpdated","deregisterSelectMultipleEmployeesChange","allowSelectMultipleEmployees","deregisterDisplayEmployeeInfoTypeChange","edEmployeeTopbarCtrl","deregisterSelectedEmployeesChanged","edCachedDeskResourceService","edDeskResourceService","edCachedEmployeeResourceService","ees","fullName","deskResource","employeeResource","prevSelected","selectedEmployeeAdded","mapped","updateMappedEmployeeById","id","infoType","selectMultipleEmployees","unshift","getSelectedEmployeeAdded","setProfilePageNumber","pageNumber","profilePageNumber","getProfilePageNumber","selectMultiple","lastSelectedEmployee","shift","edEmployeeCtrl","edArtifact","edFooter","signout","edHeader","edIndexTopbarCtrl","edSidebarLeft","sidebarLocked","sidebarOpen","toggleSidebar","closeSidebar","scrollSidebarTop","nanoScroller","scroll","getLockSidebar","deregisterSelectedEventChange","edTodayPanel","togglePanel","panelOpen","birthdays","today","filterEventsByDate","events","dayOfMonth","monthOfYear","open","edPhoneNumberFilter","tel","country","city","number","toString","trim","slice","edArtifactResourceService","artifactResource","edArtifactService","edCachedArtifactResourceService","getAllArtifacts","artifacts","$window","bootstrappedUserObject","edToastr","msg","info","options","showDuration","hideDuration","toastr","lock","edHighlighter","element","$watch","nv","ov","duration","edNanoscroller","preventPageScrolling","template","svg","imgId","imgClass","imgUrl","path","filename","get","i","constructor","attr","removeAttr","replaceWith","edFloorCtrl","setDisplayPrinterInfoType","setDisplayRoomInfoType","getAllRooms","roomFilter","getAllPrinters","printerFilter","artifactFilter","mapRoom","mapPrinter","rooms","printers","artifact","mapEmployeeBySeat","mappedPrinter","mapPrinterByName","mapRoomByName","mappedRoomArray","mappedRoom","mappedPrinterArray","selectedPrinters","setSelectMultiplePrinters","getMappedPrinter","selectedRooms","setSelectMultipleRooms","getMappedRoom","showSeatNumbers","deregisterPrinter","deregisterRoom","edIndexCtrl","edEventInfo","$sce","populateEventInfo","both","allDay","start","end","day","details","trustAsHtml","updateSelectedEvent","edEventSidebarCtrl","edEventTopbarCtrl","edCachedEventResourceService","eventResource","className","isSame","edEventCtrl","loadEvents","uiConfig","calendar","editable","height","timezone","header","left","center","right","eventClick","selectEvent","eventSources","edGuildsTopbarCtrl","edGuildsCtrl","filterEmployeesByGuild","guildMembers","edHelpTopbarCtrl","edHelpCtrl","edPrinterCard","deselectPrinter","updateSelectedPrinters","edPrinterSelectorCtrl","selectPrinter","displayPrinterInfoType","addAllFilteredPrinters","filteredPrinters","removeAllSelectedPrinters","printerName","brand","color","getSelectedPrinters","getDisplayPrinterInfoType","getSelectMultiplePrinters","deregisterSelectMultiplePrintersChange","allowSelectMultiplePrinters","deregisterDisplayPrinterInfoTypeChange","edPrinterTopbarCtrl","deregisterSelectedPrintersChanged","edPrinter","selectedPrinter","edCachedPrinterResourceService","edPrinterResourceService","printerResource","selectedPrinterAdded","selectMultiplePrinters","getSelectedPrinterAdded","lastSelectedPrinter","edPrinterCtrl","edRoomCard","deselectRoom","updateSelectedRooms","edRoomSelectorCtrl","selectRoom","displayRoomInfoType","addAllFilteredRooms","filteredRooms","removeAllSelectedRooms","roomName","type","getSelectedRooms","getDisplayRoomInfoType","getSelectMultipleRooms","deregisterSelectMultipleRoomsChange","allowSelectMultipleRooms","deregisterDisplayRoomInfoTypeChange","edRoomTopbarCtrl","deregisterSelectedRoomsChanged","edRoom","selectedRoom","edCachedRoomResourceService","edRoomResourceService","roomResource","selectedRoomAdded","selectMultipleRooms","getSelectedRoomAdded","lastSelectedRoom","edRoomCtrl","edSeniorityTopbarCtrl","edSeniorityCtrl","requestedYos","nextYos","years","filterEmployeesBySeniority","yosEmployees","displayHireDate","edCreateEventCtrl","classNames","createEventForm","edUpdateEventCtrl","deleteEvent","cancelUpdateEvent","edEmployeeMapCtrl","locateEmployee","unknownLocationEmployee","edOrgChartCtrl","getEmployeeById","getManager","getDirectReports","findWhere","edEmployeeProfileCtrl","selectEmployeeById","selectEmployeeByTeam","selectEmployeeByDepartment","selectEmployeeByTitle","selectEmployeeByName","employeeids","match","s","hasOwnProperty","teams","reverse","titles","firstnames","lastnames","changePage","newPageNumber","currentPage","edHelpLocationCtrl","edHelpNavigationCtrl","edHelpProfileCtrl","edHelpOrgChartCtrl","edPrinterProfileCtrl","selectPrinterByName","selectPrinterByBrand","toLocaleLowerCase","printerbrands","edPrinterMapCtrl","locatePrinter","edRoomProfileCtrl","selectRoomByName","selectRoomByType","roomtypes","edRoomMapCtrl","locateRoom"],"mappings":"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","file":"main-44b57c7fd5.js","sourcesContent":["(function () {\n\t'use strict';\n\tangular.module('app', ['ngResource', 'ui.router', 'ngFileUpload', 'angular.filter', 'ngAnimate', 'duScroll', 'angular.vertilize', 'angularUtils.directives.dirPagination', 'focus-if', 'ui.calendar', 'moment-picker']);\n\n\tangular.module('app').constant('_', window._).constant('moment', window.moment);\n})();","(function () {\n\t'use strict';\n\tangular.module('app').config(configure);\n\n\tconfigure.$inject = ['$stateProvider', '$urlRouterProvider', '$locationProvider', '$compileProvider'];\n\n\tfunction configure($stateProvider, $urlRouterProvider, $locationProvider, $compileProvider) {\n\t\tvar routeRoleChecks = {\n\t\t\tsuperAdmin: requireSuperAdmin,\n\t\t\tadmin: requireAdmin,\n\t\t\tuser: requireAuth\n\t\t};\n\n\t\t// Allow some extra protocols\n\t\t$compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|chrome-extension|im|sip):/);\n\n\t\t$locationProvider.html5Mode(true);\n\n\t\t// for any unmatched url\n\t\t$urlRouterProvider.otherwise('/');\n\n\t\t$urlRouterProvider.when('/employees/', '/employees');\n\t\t$urlRouterProvider.when('/printers/', '/printers');\n\t\t$urlRouterProvider.when('/rooms/', '/rooms');\n\t\t$urlRouterProvider.when('/guilds/', '/guilds');\n\t\t$urlRouterProvider.when('/committees/', '/committees');\n\n\t\t$stateProvider\n\t\t\t.state('home', {\n\t\t\t\turl: '/',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/index',\n\t\t\t\t\t\tcontroller: 'edIndexCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/components/index-topbar',\n\t\t\t\t\t\tcontroller: 'edIndexTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees', {\n\t\t\t\turl: '/employees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/employee',\n\t\t\t\t\t\tcontroller: 'edEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-topbar',\n\t\t\t\t\t\tcontroller: 'edEmployeeTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile', {\n\t\t\t\turl: '/profile/?firstname&lastname',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.department', {\n\t\t\t\turl: 'department/:department',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.title', {\n\t\t\t\turl: 'title/:title',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.team', {\n\t\t\t\turl: 'team/:team',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.employee', {\n\t\t\t\turl: 'employee/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.org-chart', {\n\t\t\t\turl: '/org-chart/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/org-chart/org-chart',\n\t\t\t\t\t\tcontroller: 'edOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map', {\n\t\t\t\turl: '/map/?employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/map/employee-map',\n\t\t\t\t\t\tcontroller: 'edEmployeeMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-6', {\n\t\t\t\turl: 'buf-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-7', {\n\t\t\t\turl: 'buf-7/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-8', {\n\t\t\t\turl: 'buf-8/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.nyc-6', {\n\t\t\t\turl: 'nyc-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers', {\n\t\t\t\turl: '/printers',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/printer',\n\t\t\t\t\t\tcontroller: 'edPrinterCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-selector',\n\t\t\t\t\t\tcontroller: 'edPrinterSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-topbar',\n\t\t\t\t\t\tcontroller: 'edPrinterTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.name', {\n\t\t\t\turl: '/name/:printer',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.brand', {\n\t\t\t\turl: '/brand/:printerbrand',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/map/printer-map',\n\t\t\t\t\t\tcontroller: 'edPrinterMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms', {\n\t\t\t\turl: '/rooms',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/room',\n\t\t\t\t\t\tcontroller: 'edRoomCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-selector',\n\t\t\t\t\t\tcontroller: 'edRoomSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-topbar',\n\t\t\t\t\t\tcontroller: 'edRoomTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.name', {\n\t\t\t\turl: '/name/:room',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.type', {\n\t\t\t\turl: '/type/:roomtype',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/map/room-map',\n\t\t\t\t\t\tcontroller: 'edRoomMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin', {\n\t\t\t\turl: '/admin',\n\t\t\t\t'views': {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/login',\n\t\t\t\t\t\tcontroller: 'edLoginCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/admin-topbar',\n\t\t\t\t\t\tcontroller: 'edAdminTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.users', {\n\t\t\t\turl: '/users',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-list',\n\t\t\t\t\t\tcontroller: 'edUserListCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.user-profile', {\n\t\t\t\turl: '/user-profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-profile',\n\t\t\t\t\t\tcontroller: 'edUserProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.user\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-user', {\n\t\t\t\turl: '/create-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-user',\n\t\t\t\t\t\tcontroller: 'edCreateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-user', {\n\t\t\t\turl: '/update-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-user',\n\t\t\t\t\t\tcontroller: 'edUpdateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/user-selector',\n\t\t\t\t\t\tcontroller: 'edUserSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-employee', {\n\t\t\t\turl: '/create-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-employee',\n\t\t\t\t\t\tcontroller: 'edCreateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-employee', {\n\t\t\t\turl: '/update-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-employee',\n\t\t\t\t\t\tcontroller: 'edUpdateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-event', {\n\t\t\t\turl: '/create-event',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/events/create-event',\n\t\t\t\t\t\tcontroller: 'edCreateEventCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-event', {\n\t\t\t\turl: '/update-event',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/events/update-event',\n\t\t\t\t\t\tcontroller: 'edUpdateEventCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker', {\n\t\t\t\turl: '/seat-picker',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker',\n\t\t\t\t\t\tcontroller: 'edSeatPickerCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-topbar',\n\t\t\t\t\t\tcontroller: 'edSeatPickerTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-6', {\n\t\t\t\turl: '/buf-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-7', {\n\t\t\t\turl: '/buf-7',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-8', {\n\t\t\t\turl: '/buf-8',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.nyc-6', {\n\t\t\t\turl: '/nyc-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds', {\n\t\t\t\turl: '/guilds',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/components/guilds-topbar',\n\t\t\t\t\t\tcontroller: 'edGuildsTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds.front-end', {\n\t\t\t\turl: '/front-end',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds.architecture', {\n\t\t\t\turl: '/architecture',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds.quality', {\n\t\t\t\turl: '/quality',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees', {\n\t\t\t\turl: '/committees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/components/committees-topbar',\n\t\t\t\t\t\tcontroller: 'edCommitteesTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.fun-games', {\n\t\t\t\turl: '/fun-games',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.diversity', {\n\t\t\t\turl: '/diversity',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.wellness', {\n\t\t\t\turl: '/wellness',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.beautification', {\n\t\t\t\turl: '/beautification',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('birthdays', {\n\t\t\t\turl: '/birthdays',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/views/birthdays',\n\t\t\t\t\t\tcontroller: 'edBirthdaysCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/components/birthdays-topbar',\n\t\t\t\t\t\tcontroller: 'edBirthdaysTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('birthdays.month', {\n\t\t\t\turl: '/:month',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/views/birthdays',\n\t\t\t\t\t\tcontroller: 'edBirthdaysCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('seniority', {\n\t\t\t\turl: '/seniority',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/seniority/views/seniority',\n\t\t\t\t\t\tcontroller: 'edSeniorityCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/seniority/components/seniority-topbar',\n\t\t\t\t\t\tcontroller: 'edSeniorityTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('seniority.yos', {\n\t\t\t\turl: '/:yos',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/seniority/views/seniority',\n\t\t\t\t\t\tcontroller: 'edSeniorityCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('events', {\n\t\t\t\turl: '/events',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/events/views/event',\n\t\t\t\t\t\tcontroller: 'edEventCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/events/components/event-sidebar',\n\t\t\t\t\t\tcontroller: 'edEventSidebarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/events/components/event-topbar',\n\t\t\t\t\t\tcontroller: 'edEventTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help', {\n\t\t\t\turl: '/help',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/help',\n\t\t\t\t\t\tcontroller: 'edHelpCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/components/help-topbar',\n\t\t\t\t\t\tcontroller: 'edHelpTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.navigation', {\n\t\t\t\turl: '/navigation',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/navigation/help-navigation',\n\t\t\t\t\t\tcontroller: 'edHelpNavigationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/profile/help-profile',\n\t\t\t\t\t\tcontroller: 'edHelpProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.location', {\n\t\t\t\turl: '/location',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/location/help-location',\n\t\t\t\t\t\tcontroller: 'edHelpLocationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.org-chart', {\n\t\t\t\turl: '/org-chart',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/org-chart/help-org-chart',\n\t\t\t\t\t\tcontroller: 'edHelpOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trequireAdmin.$inject = ['edAuthService'];\n\n\tfunction requireAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('admin');\n\t}\n\n\trequireSuperAdmin.$inject = ['edAuthService'];\n\n\tfunction requireSuperAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('super-admin');\n\t}\n\n\trequireAuth.$inject = ['edAuthService'];\n\n\tfunction requireAuth(edAuthService) {\n\t\treturn edAuthService.authorizeAuthenticatedUserForRoute();\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').run(appRun);\n\n\tappRun.$inject = ['$rootScope', '$state', '$stateParams', '$document', 'edSidebarService'];\n\n\tfunction appRun($rootScope, $state, $stateParams, $document, edSidebarService) {\n\t\t$rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\n\t\t\tif (error === 'not authorized') {\n\t\t\t\t$state.go('admin');\n\t\t\t}\n\t\t});\n\n\t\t// Clear state params and scroll to the top on route changes\n\t\t$rootScope.$on('$stateChangeSuccess', function () {\n\t\t\t$document[0].body.scrollTop = $document[0].documentElement.scrollTop = 0;\n\t\t\t$stateParams.firstname = null;\n\t\t\t$stateParams.lastname = null;\n\t\t\t$stateParams.printer = null;\n\t\t\t$stateParams.printerbrand = null;\n\t\t\t$stateParams.room = null;\n\t\t\t$stateParams.roomtype = null;\n\t\t\t$stateParams.employee = null;\n\t\t\t$stateParams.team = null;\n\t\t\t$stateParams.department = null;\n\t\t});\n\n\t\t$rootScope.$on('$stateChangeStart', function () {\n\t\t\tedSidebarService.openTodayPanel(false);\n\t\t});\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edAdminTopbarCtrl', edAdminTopbarCtrl);\n\n\tedAdminTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edAdminTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSeatPickerDesk', edSeatPickerDesk);\n\n\tfunction edSeatPickerDesk() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tfloor: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm',\n\t\t\tbindToController: true\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edEmployeeAdminService', 'edNotifierService', 'edEmployeeService', '_'];\n\n\tfunction ctrlFunc(edEmployeeAdminService, edNotifierService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.employee = null;\n\t\tvm.assignSeat = assignSeat;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\t// Get all the employee names to display on the desks\n\t\t\tvm.employee = _.filter(vm.employees, function (employee) {\n\t\t\t\treturn employee.seat === vm.seat && employee.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction assignSeat(location, floor, seat) {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: location,\n\t\t\t\tfloor: floor,\n\t\t\t\tseat: seat\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee seat updated!');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerTopbarCtrl', edSeatPickerTopbarCtrl);\n\n\tfunction edSeatPickerTopbarCtrl() {\n\t\t// Put awesome here\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserSelectorCtrl', edUserSelectorCtrl);\n\n\tedUserSelectorCtrl.$inject = ['$scope', 'edUserService'];\n\n\tfunction edUserSelectorCtrl($scope, edUserService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserService.getAllUsers(false);\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\t\tvm.selectUser = selectUser;\n\n\t\tfunction selectUser(user) {\n\t\t\tedUserService.setSelectedUser(user);\n\t\t}\n\n\t\tvar deregisterUserUpdated = $scope.$on('userUpdated', function (event, users) {\n\t\t\tvm.users = users;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterUserUpdated);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edAuthService', edAuthService);\n\n\tedAuthService.$inject = ['$http', '$rootScope', '$q', 'edIdentityService', 'edUserResourceService', 'edUserService'];\n\n\tfunction edAuthService($http, $rootScope, $q, edIdentityService, edUserResourceService, edUserService) {\n\t\tvar service = {\n\t\t\tauthenticateUser: authenticateUser,\n\t\t\tcreateUser: createUser,\n\t\t\tupdateUser: updateUser,\n\t\t\tupdateCurrentUser: updateCurrentUser,\n\t\t\tlogoutUser: logoutUser,\n\t\t\tauthorizeCurrentUserForRoute: authorizeCurrentUserForRoute,\n\t\t\tauthorizeAuthenticatedUserForRoute: authorizeAuthenticatedUserForRoute\n\t\t};\n\t\treturn service;\n\n\t\tfunction authenticateUser(username, password) {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/login', {\n\t\t\t\tusername: username,\n\t\t\t\tpassword: password\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\tvar user = new edUserResourceService();\n\t\t\t\t\tangular.extend(user, response.data.user);\n\t\t\t\t\tedIdentityService.currentUser = user;\n\t\t\t\t\tdfd.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.resolve(false);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction createUser(newUserData) {\n\t\t\tvar newUser = new edUserResourceService(newUserData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewUser.$save().then(function () {\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction updateCurrentUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar clone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tclone.$update().then(function () {\n\t\t\t\tedIdentityService.currentUser = clone;\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Updates user record in database\n\t\t * Uses the selected user for updating\n\t\t *\n\t\t * @param {Object} newUserData user data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedUser = edUserService.getSelectedUser();\n\t\t\tvar clone = angular.copy(selectedUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tvar currentUserClone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(currentUserClone, newUserData);\n\t\t\tif (edIdentityService.currentUser._id === clone._id) {\n\t\t\t\tedIdentityService.currentUser = currentUserClone;\n\t\t\t}\n\t\t\tclone.$update().then(function (user) {\n\t\t\t\tedUserService.setSelectedUser(null);\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve(user);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction logoutUser() {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/logout', {\n\t\t\t\tlogout: true\n\t\t\t}).then(function () {\n\t\t\t\tedIdentityService.currentUser = undefined;\n\t\t\t\tdfd.resolve();\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction authorizeCurrentUserForRoute(role) {\n\t\t\tif (edIdentityService.isAuthorized(role)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\n\t\tfunction authorizeAuthenticatedUserForRoute() {\n\t\t\tif (edIdentityService.isAuthenticated()) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedUserResourceService', edCachedUserResourceService);\n\n\tedCachedUserResourceService.$inject = ['edUserResourceService', '_'];\n\n\tfunction edCachedUserResourceService(edUserResourceService, _) {\n\t\tvar users;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!users || cacheBust) {\n\t\t\t\tusers = edUserResourceService.query({cacheKill: new Date().getTime()});\n\t\t\t}\n\n\t\t\treturn users;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeAdminService', edEmployeeAdminService);\n\n\tedEmployeeAdminService.$inject = ['$rootScope', '$q', 'edEmployeeService', 'edEmployeeResourceService', 'Upload'];\n\n\tfunction edEmployeeAdminService($rootScope, $q, edEmployeeService, edEmployeeResourceService, Upload) {\n\t\tvar service = {\n\t\t\tupdateEmployee: updateEmployee,\n\t\t\tcreateEmployee: createEmployee,\n\t\t\tuploadEmployeePhoto: uploadEmployeePhoto\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Updates employee record in database\n\t\t * Uses the selected employee for updating\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateEmployee(newEmployeeData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\t\tvar clone = angular.copy(selectedEmployees[0]);\n\t\t\tangular.extend(clone, newEmployeeData);\n\t\t\tclone.$update().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Create employee record in database\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to insert\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction createEmployee(newEmployeeData) {\n\t\t\tvar newEmployee = new edEmployeeResourceService(newEmployeeData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewEmployee.$save().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Upload employee photo to disk\n\t\t *\n\t\t * @param {Object} employeePhoto employee photo data\n\t\t * @param {Object} employeeData employee data\n\t\t */\n\t\tfunction uploadEmployeePhoto(employeePhoto, employeeData) {\n\t\t\tUpload.upload({\n\t\t\t\turl: 'api/employees/uploadphoto',\n\t\t\t\tdata: {\n\t\t\t\t\tfile: employeePhoto,\n\t\t\t\t\tfileName: employeeData.eid + '.' + employeePhoto.name.split('.').pop().toLowerCase()\n\t\t\t\t}\n\t\t\t}).then(function (resp) {\n\t\t\t\tconsole.log('Success ' + resp.config.data.file.name + 'uploaded. Response: ' + resp.data);\n\t\t\t}, function (resp) {\n\t\t\t\tconsole.log('Error status: ' + resp.status);\n\t\t\t}, function (evt) {\n\t\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n\t\t\t\tconsole.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEventAdminService', edEventAdminService);\n\n\tedEventAdminService.$inject = ['$rootScope', '$q', 'edEventService', 'edEventResourceService'];\n\n\tfunction edEventAdminService($rootScope, $q, edEventService, edEventResourceService) {\n\t\tvar service = {\n\t\t\tupdateEvent: updateEvent,\n\t\t\tcreateEvent: createEvent\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Updates event record in database\n\t\t * Uses the selected event for updating\n\t\t *\n\t\t * @param {Object} newEventData event data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateEvent(newEventData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedEvent = edEventService.getSelectedEvent();\n\t\t\tvar clone = angular.copy(selectedEvent);\n\t\t\tangular.extend(clone, newEventData);\n\t\t\tclone.$update().then(function (event) {\n\t\t\t\t$rootScope.$broadcast('eventsUpdated', edEventService.getAllEvents(true));\n\t\t\t\tdfd.resolve(event);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Create event record in database\n\t\t *\n\t\t * @param {Object} newEventData event data to insert\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction createEvent(newEventData) {\n\t\t\tvar newEvent = new edEventResourceService(newEventData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewEvent.$save().then(function (event) {\n\t\t\t\t$rootScope.$broadcast('eventsUpdated', edEventService.getAllEvents(true));\n\t\t\t\tdfd.resolve(event);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserResourceService', edUserResourceService);\n\n\tedUserResourceService.$inject = ['$resource'];\n\n\tfunction edUserResourceService($resource) {\n\t\tvar userResource = $resource('/api/users/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\tuserResource.prototype.isAdmin = function () {\n\t\t\treturn this.roles && this.roles.indexOf('admin') > -1;\n\t\t};\n\n\t\treturn userResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserService', edUserService);\n\n\tedUserService.$inject = ['$rootScope', 'edCachedUserResourceService'];\n\n\tfunction edUserService($rootScope, edUserResourceService) {\n\t\tvar selectedUser = null;\n\t\tvar service = {\n\t\t\tgetAllUsers: getAllUsers,\n\t\t\tgetSelectedUser: getSelectedUser,\n\t\t\tsetSelectedUser: setSelectedUser\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all user from the database\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} users\n\t\t */\n\t\tfunction getAllUsers(cacheBust) {\n\t\t\treturn edUserResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected user\n\t\t *\n\t\t * @return {object} selected user\n\t\t */\n\t\tfunction getSelectedUser() {\n\t\t\treturn selectedUser;\n\t\t}\n\n\t\t/**\n\t\t * Updates the selected user\n\t\t *\n\t\t * @param {Object} user the user select / deselect\n\t\t * @return {Array} selected user\n\t\t */\n\t\tfunction setSelectedUser(user) {\n\t\t\t// Deselect the currently selected user\n\t\t\tif (!user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\tselectedUser = null;\n\t\t\t\t// Deselect the currently selected user and (possibly) select the new one\n\t\t\t} else if (user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\t// Select the new user\n\t\t\t\tif (selectedUser._id !== user._id) {\n\t\t\t\t\tuser.selected = true;\n\t\t\t\t\tselectedUser = user;\n\t\t\t\t\t// Just remove the currently selected user\n\t\t\t\t} else {\n\t\t\t\t\tselectedUser = null;\n\t\t\t\t}\n\t\t\t\t// Select the requested user (none currently selected)\n\t\t\t} else if (user && !selectedUser) {\n\t\t\t\tuser.selected = true;\n\t\t\t\tselectedUser = user;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectedUserChange', selectedUser);\n\t\t\treturn selectedUser;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateEmployeeCtrl', edCreateEmployeeCtrl);\n\n\tedCreateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edSidebarService', 'edEmployeeAdminService', 'edIdentityService', '_'];\n\n\tfunction edCreateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edSidebarService, edEmployeeAdminService, edIdentityService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.createEmployee = createEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.managers = null;\n\t\tvm.newEmployee = {};\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\t\tvm.legacyCompanies = [\n\t\t\t'Liazon',\n\t\t\t'Towers Watson',\n\t\t\t'Acclaris',\n\t\t\t'Extend Health',\n\t\t\t'Watson Wyatt',\n\t\t\t'Towers Perrin'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tresetForm();\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t}\n\n\t\tfunction resetForm() {\n\t\t\tvm.newEmployee = {\n\t\t\t\teid: '',\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\tnickname: '',\n\t\t\t\temail: '',\n\t\t\t\tphone: '',\n\t\t\t\text: '',\n\t\t\t\tdepartment: '',\n\t\t\t\ttitle: '',\n\t\t\t\tteam: '',\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: '',\n\t\t\t\tfloor: '',\n\t\t\t\tseat: '',\n\t\t\t\thasReports: '',\n\t\t\t\tmid: '',\n\t\t\t\tbirthdate: '',\n\t\t\t\thireDate: '',\n\t\t\t\tlegacyCompany: ''\n\t\t\t};\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t}\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction createEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.newEmployee.eid,\n\t\t\t\tfirstName: vm.newEmployee.firstName,\n\t\t\t\tlastName: vm.newEmployee.lastName,\n\t\t\t\tnickname: vm.newEmployee.nickname,\n\t\t\t\temail: vm.newEmployee.email,\n\t\t\t\tphone: vm.newEmployee.phone,\n\t\t\t\text: vm.newEmployee.ext,\n\t\t\t\tdepartment: vm.newEmployee.department,\n\t\t\t\ttitle: vm.newEmployee.title,\n\t\t\t\tteam: vm.newEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.newEmployee.location,\n\t\t\t\tfloor: vm.newEmployee.floor,\n\t\t\t\tseat: vm.newEmployee.seat,\n\t\t\t\thasReports: vm.newEmployee.hasReports,\n\t\t\t\tmid: vm.newEmployee.mid,\n\t\t\t\tbirthdate: vm.newEmployee.birthdate,\n\t\t\t\thireDate: vm.newEmployee.hireDate,\n\t\t\t\tlegacyCompany: vm.newEmployee.legacyCompany\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.newEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.newEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedEmployeeAdminService.createEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('New Employee Added!');\n\t\t\t\t// upload the employee photo if there is one\n\t\t\t\tif (vm.newEmployee.image) {\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(vm.newEmployee.image, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\t// update the selected employee to add so we can update them\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + vm.newEmployee.image.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresetForm();\n\t\t\t\t$scope.createEmployeeForm.$setPristine();\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateUserCtrl', edCreateUserCtrl);\n\n\tedCreateUserCtrl.$inject = ['$state', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edCreateUserCtrl($state, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.createUser = createUser;\n\t\tvm.newUser = {};\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction createUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.newUser.username,\n\t\t\t\tpassword: vm.newUser.password,\n\t\t\t\tfirstName: vm.newUser.firstName,\n\t\t\t\tlastName: vm.newUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.newUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedAuthService.createUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account created!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edLoginCtrl', edLoginCtrl);\n\n\tedLoginCtrl.$inject = ['edIdentityService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edLoginCtrl(edIdentityService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signin = signin;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction signin(username, password) {\n\t\t\tedAuthService.authenticateUser(username, password).then(function (success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tedNotifierService.notify('You have successfully signed in!');\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Username / Password combination incorrect');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerFloorCtrl', edSeatPickerFloorCtrl);\n\n\tedSeatPickerFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$scope', 'edSidebarService', '_'];\n\n\tfunction edSeatPickerFloorCtrl(edEmployeeService, edDeskService, $state, $scope, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\tvm.desks = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tcheckForSelectedEmployee(vm.selectedEmployees);\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tcheckForSelectedEmployee(selectedEmployees);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction checkForSelectedEmployee(selectedEmployees) {\n\t\t\tif (selectedEmployees.length !== 1) {\n\t\t\t\t$state.go('admin.seat-picker');\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerCtrl', edSeatPickerCtrl);\n\n\tedSeatPickerCtrl.$inject = ['$scope', 'edEmployeeService', 'edEmployeeAdminService', 'edNotifierService', 'edSidebarService'];\n\n\tfunction edSeatPickerCtrl($scope, edEmployeeService, edEmployeeAdminService, edNotifierService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.setSelectMultipleEmployees(false)[0];\n\t\tvm.setRemoteEmployee = setRemoteEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction setRemoteEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: 'oth',\n\t\t\t\tfloor: null,\n\t\t\t\tseat: ''\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee location set to remote');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateEmployeeCtrl', edUpdateEmployeeCtrl);\n\n\tedUpdateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edEmployeeAdminService', 'edIdentityService', 'edSidebarService', '_', 'moment'];\n\n\tfunction edUpdateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edEmployeeAdminService, edIdentityService, edSidebarService, _, moment) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.updateEmployee = updateEmployee;\n\t\tvm.deleteEmployee = deleteEmployee;\n\t\tvm.cancelUpdateEmployee = cancelUpdateEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.selectedEmployee = null;\n\t\tvm.managers = null;\n\t\tvm.filteredManagers = [];\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\t\tvm.legacyCompanies = [\n\t\t\t'Liazon',\n\t\t\t'Towers Watson',\n\t\t\t'Acclaris',\n\t\t\t'Extend Health',\n\t\t\t'Watson Wyatt',\n\t\t\t'Towers Perrin'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t\tvar selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateEmployee(selectedEmployees) {\n\t\t\tvm.selectedEmployee = {\n\t\t\t\teid: selectedEmployees[0].eid,\n\t\t\t\tfirstName: selectedEmployees[0].firstName,\n\t\t\t\tlastName: selectedEmployees[0].lastName,\n\t\t\t\tnickname: selectedEmployees[0].nickname,\n\t\t\t\temail: selectedEmployees[0].email,\n\t\t\t\tphone: selectedEmployees[0].phone,\n\t\t\t\text: selectedEmployees[0].ext,\n\t\t\t\ttitle: selectedEmployees[0].title,\n\t\t\t\tdepartment: selectedEmployees[0].department,\n\t\t\t\tteam: selectedEmployees[0].team,\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: selectedEmployees[0].location,\n\t\t\t\tfloor: selectedEmployees[0].floor,\n\t\t\t\tseat: selectedEmployees[0].seat,\n\t\t\t\thasReports: selectedEmployees[0].hasReports,\n\t\t\t\tmid: selectedEmployees[0].mid,\n\t\t\t\tlegacyCompany: selectedEmployees[0].legacyCompany\n\t\t\t};\n\n\t\t\tif (selectedEmployees[0].birthdate) {\n\t\t\t\tvm.selectedEmployee.birthdate = moment(selectedEmployees[0].birthdate).format('LL');\n\t\t\t} else {\n\t\t\t\tvm.selectedEmployee.birthdate = null;\n\t\t\t}\n\n\t\t\tif (selectedEmployees[0].hireDate) {\n\t\t\t\tvm.selectedEmployee.hireDate = moment(selectedEmployees[0].hireDate).format('LL');\n\t\t\t} else {\n\t\t\t\tvm.selectedEmployee.hireDate = null;\n\t\t\t}\n\n\t\t\t_.forEach(selectedEmployees[0].guilds, function (guild) {\n\t\t\t\tvm.selectedEmployee.guilds[guild] = true;\n\t\t\t});\n\n\t\t\t_.forEach(selectedEmployees[0].committees, function (committee) {\n\t\t\t\tvm.selectedEmployee.committees[committee] = true;\n\t\t\t});\n\n\t\t\tfilterManagers(selectedEmployees[0]);\n\t\t}\n\n\t\t/**\n\t\t * Filter out the selected employee and their direct reports from the managers list\n\t\t *\n\t\t * @param {Object} selectedEmployee employee data for selected employee\n\t\t * @return {Boolean} to include this manager in the list\n\t\t */\n\t\tfunction filterManagers(selectedEmployee) {\n\t\t\tif (vm.managers && selectedEmployee) {\n\t\t\t\tvm.filteredManagers = _.filter(vm.managers, function (manager) {\n\t\t\t\t\t// TODO: Recursively filter out direct reports of direct reports\n\t\t\t\t\treturn (selectedEmployee.eid !== manager.eid) && (selectedEmployee.eid !== manager.mid);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t\tfilterManagers(vm.selectedEmployee);\n\t\t}\n\n\t\tvar selectedEmployeesChangeEvent = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t} else {\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedEmployeesChangeEvent);\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction updateEmployee() {\n\t\t\t// Get the employee data from the form\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.selectedEmployee.eid,\n\t\t\t\tfirstName: vm.selectedEmployee.firstName,\n\t\t\t\tlastName: vm.selectedEmployee.lastName,\n\t\t\t\tnickname: vm.selectedEmployee.nickname,\n\t\t\t\temail: vm.selectedEmployee.email,\n\t\t\t\tphone: vm.selectedEmployee.phone,\n\t\t\t\text: vm.selectedEmployee.ext,\n\t\t\t\ttitle: vm.selectedEmployee.title,\n\t\t\t\tdepartment: vm.selectedEmployee.department,\n\t\t\t\tteam: vm.selectedEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.selectedEmployee.location,\n\t\t\t\tfloor: vm.selectedEmployee.floor,\n\t\t\t\tseat: vm.selectedEmployee.seat,\n\t\t\t\thasReports: vm.selectedEmployee.hasReports,\n\t\t\t\tmid: vm.selectedEmployee.mid,\n\t\t\t\tbirthdate: vm.selectedEmployee.birthdate,\n\t\t\t\thireDate: vm.selectedEmployee.hireDate,\n\t\t\t\tlegacyCompany: vm.selectedEmployee.legacyCompany\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.selectedEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.selectedEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Save the image file for uploading\n\t\t\tvar imageFile = vm.selectedEmployee.imageFile;\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('Employee information updated!');\n\t\t\t\tif (imageFile) {\n\t\t\t\t\t// upload the file to the file system\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(imageFile, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + imageFile.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t\timageFile = null;\n\t\t\t\t}\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Marks employee as deleted\n\t\t * Makes all direct reports of the deleted employee direct reports of the employee's manager\n\t\t */\n\t\tfunction deleteEmployee() {\n\t\t\t// Save employee to delete for later\n\t\t\tvar deletedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\t\t// Find all employees that report to this employee and make them report to the next level up\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(\n\t\t\t\tfunction (employees) {\n\t\t\t\t\tvar eid = deletedEmployee.eid;\n\t\t\t\t\tvar mid = deletedEmployee.mid;\n\t\t\t\t\tvar directReports = _.filter(employees, {'mid': eid});\n\t\t\t\t\t_.forEach(directReports, function (directReport) {\n\t\t\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(directReport);\n\t\t\t\t\t\tedEmployeeAdminService.updateEmployee({mid: mid});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Now delete the employee that was requested to be deleted\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(deletedEmployee);\n\n\t\t\tedEmployeeAdminService.updateEmployee({deleted: true}).then(function (employee) {\n\t\t\t\tedNotifierService.notify(employee.firstName + ' ' + employee.lastName + ' deleted!');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\tfunction cancelUpdateEmployee() {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateUserCtrl', edUpdateUserCtrl);\n\n\tedUpdateUserCtrl.$inject = ['$scope', 'edUserService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edUpdateUserCtrl($scope, edUserService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tif (vm.selectedUser) {\n\t\t\t\tpopulateUserInfo(vm.selectedUser);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateUserInfo(user) {\n\t\t\tvm.selectedUser = {\n\t\t\t\tfirstName: user.firstName,\n\t\t\t\tlastName: user.lastName,\n\t\t\t\tusername: user.username,\n\t\t\t\troles: {}\n\t\t\t};\n\n\t\t\t_.forEach(user.roles, function (role) {\n\t\t\t\tvm.selectedUser.roles[role] = true;\n\t\t\t});\n\t\t}\n\n\t\tvar selectedUserChangeEvent = $scope.$on('selectedUserChange', function (event, selectedUser) {\n\t\t\tif (selectedUser) {\n\t\t\t\tpopulateUserInfo(selectedUser);\n\t\t\t} else {\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedUserChangeEvent);\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tpassword: vm.selectedUser.password,\n\t\t\t\tfirstName: vm.selectedUser.firstName,\n\t\t\t\tlastName: vm.selectedUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.selectedUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (vm.selectedUser.password && vm.selectedUser.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.selectedUser.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserListCtrl', edUserListCtrl);\n\n\tedUserListCtrl.$inject = ['edUserResourceService', 'edSidebarService'];\n\n\tfunction edUserListCtrl(edUserResourceService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserResourceService.query();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserProfileCtrl', edUserProfileCtrl);\n\n\tedUserProfileCtrl.$inject = ['$state', 'edIdentityService', 'edNotifierService', 'edAuthService', 'edUserService', 'edSidebarService'];\n\n\tfunction edUserProfileCtrl($state, edIdentityService, edNotifierService, edAuthService, edUserService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.username = edIdentityService.currentUser.username;\n\t\tvm.fname = edIdentityService.currentUser.firstName;\n\t\tvm.lname = edIdentityService.currentUser.lastName;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedUserService.setSelectedUser(edIdentityService.currentUser);\n\t\t}\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.username,\n\t\t\t\tpassword: vm.password,\n\t\t\t\tfirstName: vm.fname,\n\t\t\t\tlastName: vm.lname\n\t\t\t};\n\n\t\t\tif (vm.password && vm.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edBirthdaysTopbarCtrl', edBirthdaysTopbarCtrl);\n\n\tedBirthdaysTopbarCtrl.$inject = [];\n\n\tfunction edBirthdaysTopbarCtrl() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edBirthdaysCtrl', edBirthdaysCtrl);\n\n\tedBirthdaysCtrl.$inject = ['$state', '$stateParams', 'edSidebarService', 'edEmployeeService', '_', 'moment'];\n\n\tfunction edBirthdaysCtrl($state, $stateParams, edSidebarService, edEmployeeService, _, moment) {\n\t\tvar vm = this;\n\t\tvm.month = null;\n\t\tvm.birthMonthEmployees = [];\n\t\tvm.profileEmployee = profileEmployee;\n\t\tvm.months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\t\tvm.requestedMonth = $stateParams.month;\n\t\tvm.currentMonth = moment().month();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByBirthday);\n\t\t}\n\n\t\tfunction filterEmployeesByBirthday(employees) {\n\t\t\tvar currentDay = moment().date();\n\t\t\tvm.birthMonthEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\t// If the employee has a birthday and it is in the month we are looking at, display them\n\t\t\t\tif (employee.birthdate && vm.requestedMonth === vm.months[moment(employee.birthdate).month()]) {\n\t\t\t\t\t// Get the day of the month to display\n\t\t\t\t\temployee.birthday = moment(employee.birthdate).date();\n\t\t\t\t\t// If the employee's birthday is today, set a property to use\n\t\t\t\t\tif (vm.requestedMonth === vm.months[vm.currentMonth] && currentDay === employee.birthday) {\n\t\t\t\t\t\temployee.birthdayToday = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'birthday');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesTopbarCtrl', edCommitteesTopbarCtrl);\n\n\tedCommitteesTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edCommitteesTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesCtrl', edCommitteesCtrl);\n\n\tedCommitteesCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edCommitteesCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.committee = null;\n\t\tvm.committeeMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the committee based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.committee = {\n\t\t\t\tname: currentState.split('.')[1]\n\t\t\t};\n\n\t\t\tif (vm.committee.name) {\n\t\t\t\tvm.committee.text = vm.committee.name;\n\n\t\t\t\tif (vm.committee.name === 'fun-games') {\n\t\t\t\t\tvm.committee.text = 'Fun & Games';\n\t\t\t\t}\n\n\t\t\t\tif (vm.committee.name === 'diversity') {\n\t\t\t\t\tvm.committee.text = 'Cultural Diversity & Community Outreach';\n\t\t\t\t}\n\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByCommittee);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByCommittee(employees) {\n\t\t\tvm.committeeMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.committees && _.indexOf(employee.committees, vm.committee.name) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edDesk', edDesk);\n\n\tedDesk.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edEmployeeService'];\n\n\tfunction edDesk($stateParams, $document, $timeout, $compile, edEmployeeService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm',\n\t\t\tbindToController: true\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.vm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\n\t\t\t// If coming from the profile page via a link in the employee card\n\t\t\tif ($stateParams.seat === attrs.seat && scope.vm.mappedEmployee) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.vm.mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\t\tif (mappedEmployee && mappedEmployee.seat === attrs.seat) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edNotifierService', 'edIdentityService', 'edPrinterService', 'edRoomService', '_'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edNotifierService, edIdentityService, edPrinterService, edRoomService, _) {\n\t\tvar vm = this;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.mappedEmployee = null;\n\t\tvm.identity = edIdentityService;\n\t\tvm.employee = null;\n\n\t\tvar viewingProfile = false;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\t// Get all the employee names to display on the desks\n\t\t\tvm.employee = _.filter(vm.employees, function (employee) {\n\t\t\t\treturn employee.seat === vm.seat && employee.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction mapEmployee(seat, location) {\n\t\t\t// Don't map employee if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedEmployeeArray = _.filter(vm.employees, function (employee) {\n\t\t\t\t\treturn employee.seat === seat && employee.location === location;\n\t\t\t\t});\n\n\t\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know who sits there.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tvar selectedEmployee = edEmployeeService.updateSelectedEmployees(edEmployeeService.getMappedEmployee())[0];\n\t\t\t$state.go('employees.profile.employee', {'employee': selectedEmployee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edEmployeeCard', edEmployeeCard);\n\n\tedEmployeeCard.$inject = ['$timeout', '$state', 'edEmployeeService', 'moment'];\n\n\tfunction edEmployeeCard($timeout, $state, edEmployeeService, moment) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/employee-card',\n\t\t\tscope: {\n\t\t\t\temployee: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\t// Some people have a different usernames for lync than their liazon email address\n\t\t\tif (scope.employee.lync) {\n\t\t\t\tvm.twEmail = scope.employee.lync + '@towerswatson.com';\n\t\t\t} else {\n\t\t\t\tvm.twEmail = scope.employee.email.split('@')[0] + '@towerswatson.com';\n\t\t\t}\n\n\t\t\t// Years of Service\n\t\t\tif (scope.employee.hireDate) {\n\t\t\t\tvm.yos = moment().diff(scope.employee.hireDate, 'years');\n\t\t\t\tif (vm.yos >= 5) {\n\t\t\t\t\tvm.seniorityClass = 'years-5';\n\t\t\t\t\tvm.seniorityBucket = 5;\n\t\t\t\t} else if (vm.yos >= 4) {\n\t\t\t\t\tvm.seniorityClass = 'years-3';\n\t\t\t\t\tvm.seniorityBucket = 4;\n\t\t\t\t} else if (vm.yos >= 3) {\n\t\t\t\t\tvm.seniorityClass = 'years-3';\n\t\t\t\t\tvm.seniorityBucket = 3;\n\t\t\t\t} else if (vm.yos >= 2) {\n\t\t\t\t\tvm.seniorityClass = 'years-1';\n\t\t\t\t\tvm.seniorityBucket = 2;\n\t\t\t\t} else if (vm.yos >= 1) {\n\t\t\t\t\tvm.seniorityClass = 'years-1';\n\t\t\t\t\tvm.seniorityBucket = 1;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Birthday\n\t\t\tif (scope.employee.birthdate) {\n\t\t\t\tvm.birthDayAndMonth = moment(scope.employee.birthdate).format('MMM D');\n\t\t\t\tvm.birthMonthOfYear = moment(scope.employee.birthdate).format('MMMM').toLowerCase();\n\t\t\t}\n\n\t\t\tvm.deselectEmployee = function (employee) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edIdentityService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.editEmployee = editEmployee;\n\n\t\tfunction mapEmployee(employee) {\n\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t}\n\n\t\tfunction editEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t$state.go('admin.update-employee');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeSelectorCtrl', edEmployeeSelectorCtrl);\n\n\tedEmployeeSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edEmployeeService', 'edNotifierService', 'edPrinterService', 'edRoomService'];\n\n\tfunction edEmployeeSelectorCtrl($scope, $state, $document, edEmployeeService, edNotifierService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.displayEmployeeInfoType = edEmployeeService.getDisplayEmployeeInfoType();\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edEmployeeService.getSelectMultipleEmployees();\n\t\tvm.filteredEmployees = edEmployeeService.getAllEmployees();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(employee) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (employee.location) {\n\t\t\t\t\treturn vm.locations.indexOf(employee.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(employee) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the employee is on a floor in BUF\n\t\t\t\t\tif (employee.floor && employee.location === 'buf') {\n\t\t\t\t\t\t// Include this employee if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(employee.floor) > -1;\n\t\t\t\t\t// Include this employee if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t// Include all filtered employees if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t// Include all filtered employees if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tif (vm.displayEmployeeInfoType === 'profile') {\n\t\t\t\tvm.selectedEmployees = edEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t// If the user is viewing an employee profile page other than the generic employee profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tvar currentState = $state.current.name;\n\t\t\t\tif (currentState !== 'employees.profile' && currentState.indexOf('employees.profile') === 0) {\n\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayEmployeeInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedEmployees = edEmployeeService.addAllFilteredEmployees(vm.filteredEmployees);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedEmployees = edEmployeeService.removeAllSelectedEmployees();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.employeeName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.department = '';\n\t\t\tvm.legacyCompany = '';\n\t\t}\n\n\t\tvar deregisterEmployeesUpdated = $scope.$on('employeesUpdated', function (event, employees) {\n\t\t\tvm.employees = employees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployeesUpdated);\n\n\t\tvar deregisterSelectMultipleEmployeesChange = $scope.$on('selectMultipleEmployeesChange', function (event, allowSelectMultipleEmployees) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleEmployeesChange);\n\n\t\tvar deregisterDisplayEmployeeInfoTypeChange = $scope.$on('displayEmployeeInfoTypeChange', function (event, displayEmployeeInfoType) {\n\t\t\tvm.displayEmployeeInfoType = displayEmployeeInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayEmployeeInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeTopbarCtrl', edEmployeeTopbarCtrl);\n\n\tedEmployeeTopbarCtrl.$inject = ['$scope', 'edEmployeeService'];\n\n\tfunction edEmployeeTopbarCtrl($scope, edEmployeeService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\n\t\tvar deregisterSelectedEmployeesChanged = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEmployeesChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedDeskResourceService', edCachedDeskResourceService);\n\n\tedCachedDeskResourceService.$inject = ['edDeskResourceService'];\n\n\tfunction edCachedDeskResourceService(edDeskResourceService) {\n\t\tvar desks;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!desks) {\n\t\t\t\tdesks = edDeskResourceService.query();\n\t\t\t}\n\n\t\t\treturn desks;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedEmployeeResourceService', edCachedEmployeeResourceService);\n\n\tedCachedEmployeeResourceService.$inject = ['edEmployeeResourceService', '_'];\n\n\tfunction edCachedEmployeeResourceService(edEmployeeResourceService, _) {\n\t\tvar employees;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!employees || cacheBust) {\n\t\t\t\temployees = edEmployeeResourceService.query({cacheKill: new Date().getTime()}, function (ees) {\n\t\t\t\t\tangular.forEach(ees, function (employee) {\n\t\t\t\t\t\t// Create a manager property for each employee\n\t\t\t\t\t\tvar manager = _.find(ees, {'eid': employee.mid});\n\t\t\t\t\t\tif (manager) {\n\t\t\t\t\t\t\tif (manager.nickname) {\n\t\t\t\t\t\t\t\temployee.manager = manager.nickname + ' ' + manager.lastName;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\temployee.manager = manager.firstName + ' ' + manager.lastName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Create a displayName property for each employee\n\t\t\t\t\t\tif (employee.nickname) {\n\t\t\t\t\t\t\temployee.displayName = employee.nickname + ' ' + employee.lastName;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temployee.displayName = employee.firstName + ' ' + employee.lastName;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!employee.legacyCompany) {\n\t\t\t\t\t\t\temployee.legacyCompany = 'Liazon';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create a fullName property for each employee\n\t\t\t\t\t\temployee.fullName = employee.firstName + ' ' + employee.lastName;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn employees;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskResourceService', edDeskResourceService);\n\n\tedDeskResourceService.$inject = ['$resource'];\n\n\tfunction edDeskResourceService($resource) {\n\t\tvar deskResource = $resource('/api/desks/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn deskResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskService', edDeskService);\n\n\tedDeskService.$inject = ['edCachedDeskResourceService'];\n\n\tfunction edDeskService(edCachedDeskResourceService) {\n\t\tvar service = {\n\t\t\tgetAllDesks: getAllDesks\n\t\t};\n\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all desks from the database (or memory)\n\t\t *\n\t\t * @return {Array} desks\n\t\t */\n\t\tfunction getAllDesks() {\n\t\t\treturn edCachedDeskResourceService.query();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeResourceService', edEmployeeResourceService);\n\n\tedEmployeeResourceService.$inject = ['$resource'];\n\n\tfunction edEmployeeResourceService($resource) {\n\t\tvar employeeResource = $resource('/api/employees/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn employeeResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeService', edEmployeeService);\n\n\tedEmployeeService.$inject = ['$rootScope', 'edCachedEmployeeResourceService', 'edNotifierService', '_', 'moment'];\n\n\tfunction edEmployeeService($rootScope, edCachedEmployeeResourceService, edNotifierService, _, moment) {\n\t\tvar selectedEmployees = [];\n\t\tvar selectedEmployeeAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedEmployee = null;\n\t\tvar selectMultipleEmployees = false;\n\t\tvar displayEmployeeInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllEmployees: getAllEmployees,\n\t\t\tgetSelectedEmployees: getSelectedEmployees,\n\t\t\taddAllFilteredEmployees: addAllFilteredEmployees,\n\t\t\tupdateSelectedEmployees: updateSelectedEmployees,\n\t\t\tremoveAllSelectedEmployees: removeAllSelectedEmployees,\n\t\t\tsetSelectMultipleEmployees: setSelectMultipleEmployees,\n\t\t\tgetSelectMultipleEmployees: getSelectMultipleEmployees,\n\t\t\tupdateMappedEmployee: updateMappedEmployee,\n\t\t\tupdateMappedEmployeeById: updateMappedEmployeeById,\n\t\t\tgetMappedEmployee: getMappedEmployee,\n\t\t\tsetDisplayEmployeeInfoType: setDisplayEmployeeInfoType,\n\t\t\tgetDisplayEmployeeInfoType: getDisplayEmployeeInfoType,\n\t\t\tgetSelectedEmployeeAdded: getSelectedEmployeeAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber,\n\t\t\tfilterEmployeesByBirthday: filterEmployeesByBirthday\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all employees from the database (or memory)\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} employees\n\t\t */\n\t\tfunction getAllEmployees(cacheBust) {\n\t\t\treturn edCachedEmployeeResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected employees\n\t\t *\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction getSelectedEmployees() {\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered employees to the selected employees\n\t\t * Removes any unfiltered employees from selected employees\n\t\t *\n\t\t * @param {Array} employees to add to selected\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction addAllFilteredEmployees(employees) {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(employees, function (employee) {\n\t\t\t\temployee.selected = true;\n\t\t\t});\n\t\t\tselectedEmployees = employees;\n\t\t\tselectedEmployeeAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee\n\t\t *\n\t\t * @param {Object} employee to map / un-map\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction updateMappedEmployee(employee) {\n\t\t\t// Un-map the currently mapped employee\n\t\t\tif (!employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\tmappedEmployee = null;\n\t\t\t\t// Un-map the currently mapped employee and (possibly) map the new one\n\t\t\t} else if (employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\t// Map the new employee\n\t\t\t\tif (mappedEmployee._id !== employee._id) {\n\t\t\t\t\temployee.mapped = true;\n\t\t\t\t\tmappedEmployee = employee;\n\t\t\t\t\t// Just remove the currently mapped employee\n\t\t\t\t} else {\n\t\t\t\t\tmappedEmployee = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested employee (none currently mapped)\n\t\t\t} else if (employee && !mappedEmployee) {\n\t\t\t\temployee.mapped = true;\n\t\t\t\tmappedEmployee = employee;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedEmployeeChange', mappedEmployee);\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee using an employee ID\n\t\t */\n\t\tfunction updateMappedEmployeeById(id) {\n\t\t\tgetAllEmployees().$promise.then(function (employees) {\n\t\t\t\tvar employee = _.filter(employees, function (employee) {\n\t\t\t\t\treturn employee.eid === parseInt(id);\n\t\t\t\t});\n\t\t\t\tif (employee.length > 0) {\n\t\t\t\t\tupdateMappedEmployee(employee[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('I\\'m not sure who you\\'re looking for.');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped employee\n\t\t *\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction getMappedEmployee() {\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayEmployeeInfoType(infoType) {\n\t\t\tdisplayEmployeeInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayEmployeeInfoTypeChange', displayEmployeeInfoType);\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayEmployeeInfoType() {\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected employees\n\t\t *\n\t\t * @param {Object} employee the employee to add / remove from selected employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction updateSelectedEmployees(employee) {\n\t\t\t// Allowed to have multiple employees selected\n\t\t\tif (selectMultipleEmployees) {\n\t\t\t\t// This employee is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\tselectedEmployees.unshift(employee);\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees.splice(selectedEmployees.indexOf(employee), 1);\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple employees selected\n\t\t\t} else {\n\t\t\t\t// This employee is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\t// set all selected employee's selected property to false\n\t\t\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this employee's selected property to true\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\t// replace the array of selected employees with just this one employee\n\t\t\t\t\tselectedEmployees = [employee];\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees = [];\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected employees\n\t\t */\n\t\tfunction removeAllSelectedEmployees() {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedEmployees = [];\n\t\t\tselectedEmployeeAdded = false;\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected employee was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected employees added\n\t\t */\n\t\tfunction getSelectedEmployeeAdded() {\n\t\t\treturn selectedEmployeeAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the employee profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on employee profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the employee profile page number\n\t\t *\n\t\t * @return {Number} employee profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one employee at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction setSelectMultipleEmployees(selectMultiple) {\n\t\t\tselectMultipleEmployees = selectMultiple;\n\t\t\t// If there are multiple selected employees, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedEmployees.length > 1) {\n\t\t\t\tvar lastSelectedEmployee = selectedEmployees.shift();\n\t\t\t\t// This employee will be reselected in updateSelectedEmployees\n\t\t\t\tlastSelectedEmployee.selected = false;\n\t\t\t\tselectedEmployees = updateSelectedEmployees(lastSelectedEmployee);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleEmployeesChange', selectMultipleEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple employees to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple employee\n\t\t */\n\t\tfunction getSelectMultipleEmployees() {\n\t\t\treturn selectMultipleEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Filters all employees who have a specified birthday\n\t\t *\n\t\t * @return {Array} birthdayEmployees\n\t\t */\n\t\tfunction filterEmployeesByBirthday(employees, date) {\n\t\t\treturn _.filter(employees, function (employee) {\n\t\t\t\tif (employee.birthdate && moment(employee.birthdate).date() === moment(date).date() && moment(employee.birthdate).month() === moment(date).month()) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeCtrl', edEmployeeCtrl);\n\n\tedEmployeeCtrl.$inject = ['edSidebarService'];\n\n\tfunction edEmployeeCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edArtifact', edArtifact);\n\n\tfunction edArtifact() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/artifact',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tfunction ctrlFunc() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edFooter', edFooter);\n\n\tfunction edFooter() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/footer',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService', 'edAuthService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edIdentityService, edAuthService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signout = signout;\n\n\t\tfunction signout() {\n\t\t\tedAuthService.logoutUser().then(function () {\n\t\t\t\tvm.username = '';\n\t\t\t\tvm.password = '';\n\t\t\t\tedNotifierService.notify('You have successfully signed out');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edHeader', edHeader);\n\n\tfunction edHeader() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/header',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService'];\n\n\tfunction ctrlFunc(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexTopbarCtrl', edIndexTopbarCtrl);\n\n\tfunction edIndexTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSidebarLeft', edSidebarLeft);\n\n\tfunction edSidebarLeft() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/sidebar-left',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['$scope', 'edSidebarService', 'edIdentityService'];\n\n\tfunction ctrlFunc($scope, edSidebarService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.sidebarOpen = false;\n\t\tvm.sidebarLocked = edSidebarService.getLockSidebar();\n\t\tvm.toggleSidebar = toggleSidebar;\n\t\tvm.closeSidebar = closeSidebar;\n\t\tvm.scrollSidebarTop = scrollSidebarTop;\n\n\t\tactivate();\n\n\t\t// If the sidebar is locked open, make sure it is open\n\t\tfunction activate() {\n\t\t\tif (vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = true;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, toggle it\n\t\tfunction toggleSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = !vm.sidebarOpen;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, close it\n\t\tfunction closeSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// Watch for the sidebar locked change event\n\t\tvar deregister = $scope.$on('sidebarLockedChange', function (event, sidebarLocked) {\n\t\t\tvm.sidebarLocked = sidebarLocked;\n\t\t\tvm.sidebarOpen = vm.sidebarLocked ? true : false;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction scrollSidebarTop() {\n\t\t\t$('.nano').nanoScroller({scroll: 'top'});\n\t\t}\n\n\t\t// Use this to trigger the highlighter directive\n\t\tvar deregisterSelectedEventChange = $scope.$on('selectedEventChange', function (event, selectedEvent) {\n\t\t\tif (selectedEvent) {\n\t\t\t\tvm.selectedEvent = angular.copy(selectedEvent._id);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEventChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edTodayPanel', edTodayPanel);\n\n\tfunction edTodayPanel() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/today-panel',\n\t\t\treplace: true,\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['$scope', 'edEmployeeService', 'edEventService', 'edIdentityService', 'moment', '_'];\n\n\tfunction ctrlFunc($scope, edEmployeeService, edEventService, edIdentityService, moment, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.panelOpen = false;\n\t\tvm.dayOfMonth = moment().date();\n\t\tvm.monthOfYear = moment().format('MMM');\n\t\tvm.birthdays = [];\n\t\tvm.events = [];\n\t\tvm.togglePanel = togglePanel;\n\n\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByBirthday);\n\t\tedEventService.getAllEvents().$promise.then(filterEventsByDate);\n\n\t\tfunction togglePanel() {\n\t\t\tvm.panelOpen = !vm.panelOpen;\n\t\t}\n\n\t\tvar today = moment();\n\n\t\tfunction filterEmployeesByBirthday(employees) {\n\t\t\tvm.birthdays = edEmployeeService.filterEmployeesByBirthday(employees, today);\n\t\t}\n\n\t\tfunction filterEventsByDate(events) {\n\t\t\tvm.events = edEventService.filterEventsByDate(events, today);\n\t\t}\n\n\t\tvar deregister = $scope.$on('openTodayPanel', function (event, open) {\n\t\t\tvm.panelOpen = open;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').filter('edPhoneNumberFilter', edPhoneNumberFilter);\n\n\tfunction edPhoneNumberFilter() {\n\t\treturn function (tel) {\n\t\t\tif (!tel) { return ''; }\n\n\t\t\t// strip all non-digits\n\t\t\tvar value = tel.toString().trim().replace(/\\D/g, '');\n\n\t\t\tvar country, city, number;\n\n\t\t\tswitch (value.length) {\n\t\t\t\tcase 10: // +1PPP####### -> C (PPP) ###-####\n\t\t\t\t\tcountry = 1;\n\t\t\t\t\tcity = value.slice(0, 3);\n\t\t\t\t\tnumber = value.slice(3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 11: // +CPPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value[0];\n\t\t\t\t\tcity = value.slice(1, 4);\n\t\t\t\t\tnumber = value.slice(4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 12: // +CCCPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value.slice(0, 3);\n\t\t\t\t\tcity = value.slice(3, 5);\n\t\t\t\t\tnumber = value.slice(5);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn tel;\n\t\t\t}\n\n\t\t\tif (country === 1) {\n\t\t\t\tcountry = '';\n\t\t\t}\n\n\t\t\tnumber = number.slice(0, 3) + '-' + number.slice(3);\n\n\t\t\treturn (country + ' (' + city + ') ' + number).trim();\n\t\t};\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactResourceService', edArtifactResourceService);\n\n\tedArtifactResourceService.$inject = ['$resource'];\n\n\tfunction edArtifactResourceService($resource) {\n\t\tvar artifactResource = $resource('/api/artifacts/:id', {\n\t\t\t_id: '@id'\n\t\t});\n\n\t\treturn artifactResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactService', edArtifactService);\n\n\tedArtifactService.$inject = ['edCachedArtifactResourceService'];\n\n\tfunction edArtifactService(edCachedArtifactResourceService) {\n\t\tvar service = {\n\t\t\tgetAllArtifacts: getAllArtifacts\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all artifacts from the database (or memory)\n\t\t *\n\t\t * @return {Array} artifacts\n\t\t */\n\t\tfunction getAllArtifacts() {\n\t\t\treturn edCachedArtifactResourceService.query();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedArtifactResourceService', edCachedArtifactResourceService);\n\n\tedCachedArtifactResourceService.$inject = ['edArtifactResourceService'];\n\n\tfunction edCachedArtifactResourceService(edArtifactResourceService) {\n\t\tvar artifacts;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!artifacts) {\n\t\t\t\tartifacts = edArtifactResourceService.query();\n\t\t\t}\n\n\t\t\treturn artifacts;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edIdentityService', edIdentityService);\n\n\tedIdentityService.$inject = ['$window', 'edUserResourceService'];\n\n\tfunction edIdentityService($window, edUserResourceService) {\n\t\tvar currentUser;\n\t\tif (!!$window.bootstrappedUserObject) {\n\t\t\tcurrentUser = new edUserResourceService();\n\t\t\tangular.extend(currentUser, $window.bootstrappedUserObject);\n\t\t}\n\t\tvar service = {\n\t\t\tcurrentUser: currentUser,\n\t\t\tisAuthenticated: isAuthenticated,\n\t\t\tisAuthorized: isAuthorized\n\t\t};\n\t\treturn service;\n\n\t\tfunction isAuthenticated() {\n\t\t\treturn !!this.currentUser;\n\t\t}\n\n\t\tfunction isAuthorized(role) {\n\t\t\treturn !!this.currentUser && this.currentUser.roles.indexOf(role) > -1;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').value('edToastr', toastr);\n\n\tangular.module('app').factory('edNotifierService', edNotifierService);\n\n\tedNotifierService.$inject = ['edToastr'];\n\n\tfunction edNotifierService(edToastr) {\n\t\tvar service = {\n\t\t\tnotify: notify,\n\t\t\tinfo: info,\n\t\t\terror: error\n\t\t};\n\n\t\tedToastr.options = {\n\t\t\t'showDuration': '300',\n\t\t\t'hideDuration': '300'\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction notify(msg) {\n\t\t\tedToastr.success(msg);\n\t\t}\n\n\t\tfunction info(msg) {\n\t\t\tedToastr.info(msg);\n\t\t}\n\n\t\tfunction error(msg) {\n\t\t\tedToastr.error(msg);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edSidebarService', edSidebarService);\n\n\tedSidebarService.$inject = ['$rootScope'];\n\n\tfunction edSidebarService($rootScope) {\n\t\tvar sidebarLocked = false;\n\t\tvar service = {\n\t\t\tsetLockSidebar: setLockSidebar,\n\t\t\tgetLockSidebar: getLockSidebar,\n\t\t\topenTodayPanel: openTodayPanel\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction setLockSidebar(lock) {\n\t\t\tsidebarLocked = lock;\n\t\t\t$rootScope.$broadcast('sidebarLockedChange', sidebarLocked);\n\t\t\treturn sidebarLocked;\n\t\t}\n\n\t\tfunction getLockSidebar() {\n\t\t\treturn sidebarLocked;\n\t\t}\n\n\t\tfunction openTodayPanel(open) {\n\t\t\t$rootScope.$broadcast('openTodayPanel', open);\n\t\t}\n\t}\n})();","/**\n * highlighter directive\n * highlights dom element on model change\n */\n(function () {\n\t'use strict';\n\tangular.module('app').directive('edHighlighter', edHighlighter);\n\n\tedHighlighter.$inject = ['$timeout'];\n\n\tfunction edHighlighter($timeout) {\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, element, attrs) {\n\t\t\tscope.$watch(attrs.edHighlighter, function (nv, ov) {\n\t\t\t\tif (nv !== ov) {\n\t\t\t\t\telement.addClass('activate');\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\telement.removeClass('activate');\n\t\t\t\t\t}, attrs.duration);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edNanoscroller', edNanoscroller);\n\n\tedNanoscroller.$inject = ['$timeout'];\n\n\tfunction edNanoscroller($timeout) {\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\ttemplate: '',\n\t\t\treplace: false,\n\t\t\tscope: {},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\t// Do this right away so scrollbars don't display in IE and Firefox\n\t\t\tangular.element('.nano').nanoScroller({preventPageScrolling: true});\n\t\t}\n\t}\n})();","/**\n * svg directive\n * replace img tag with its svg content\n * adaptation from https://stackoverflow.com/questions/11978995/how-to-change-color-of-svg-image-using-css-jquery-svg-image-replacement\n */\n(function () {\n\t'use strict';\n\tangular.module('app').directive('svg', svg);\n\n\tsvg.$inject = ['$http'];\n\n\tfunction svg($http) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\tscope: {\n\t\t\t\tpath: '@',\n\t\t\t\tfilename: '@'\n\t\t\t},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, element, attrs) {\n\t\t\tvar imgId = attrs.id;\n\t\t\tvar imgClass = attrs.class;\n\t\t\tvar imgUrl = scope.path + scope.filename + '.svg';\n\n\t\t\t// Load svg content\n\t\t\t$http.get(imgUrl).success(function (data, status) {\n\t\t\t\tvar svg = angular.element(data);\n\t\t\t\tfor (var i = svg.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (svg[i].constructor.name === 'SVGSVGElement') {\n\t\t\t\t\t\tsvg = angular.element(svg[i]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgId !== 'undefined') {\n\t\t\t\t\tsvg.attr('id', imgId);\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgClass !== 'undefined') {\n\t\t\t\t\tsvg.attr('class', imgClass);\n\t\t\t\t}\n\t\t\t\t// Remove invalid attributes\n\t\t\t\tsvg = svg.removeAttr('xmlns:a');\n\t\t\t\telement.replaceWith(svg);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edFloorCtrl', edFloorCtrl);\n\n\tedFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$stateParams', '$scope', 'edRoomService', 'edPrinterService', 'edArtifactService', 'edSidebarService', '_'];\n\n\tfunction edFloorCtrl(edEmployeeService, edDeskService, $state, $stateParams, $scope, edRoomService, edPrinterService, edArtifactService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\t\tvm.showSeatNumbers = false;\n\t\tvm.desks = null;\n\t\tvm.rooms = null;\n\t\tvm.printers = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks and rooms on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t\tedRoomService.getAllRooms().$promise.then(roomFilter);\n\t\t\tedPrinterService.getAllPrinters().$promise.then(printerFilter);\n\t\t\tedArtifactService.getAllArtifacts().$promise.then(artifactFilter);\n\n\t\t\tmapEmployee();\n\t\t\tmapRoom();\n\t\t\tmapPrinter();\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tif (mappedEmployee) {\n\t\t\t\tif (mappedEmployee.floor && (mappedEmployee.location !== vm.location || mappedEmployee.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('employees.map.' + mappedEmployee.location + '-' + mappedEmployee.floor, {'seat': mappedEmployee.seat});\n\t\t\t\t} else if (!mappedEmployee.floor) {\n\t\t\t\t\t$state.go('employees.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tvar deregisterPrinter = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tif (mappedPrinter) {\n\t\t\t\tif (mappedPrinter.floor && (mappedPrinter.location !== vm.location || mappedPrinter.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('printers.map.' + mappedPrinter.location + '-' + mappedPrinter.floor, {'name': mappedPrinter.name});\n\t\t\t\t} else if (!mappedPrinter.floor) {\n\t\t\t\t\t$state.go('printers.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterPrinter);\n\n\t\tvar deregisterRoom = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tif (mappedRoom) {\n\t\t\t\tif (mappedRoom.floor && (mappedRoom.location !== vm.location || mappedRoom.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('rooms.map.' + mappedRoom.location + '-' + mappedRoom.floor, {'name': mappedRoom.name});\n\t\t\t\t} else if (!mappedRoom.floor) {\n\t\t\t\t\t$state.go('rooms.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterRoom);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction roomFilter(rooms) {\n\t\t\tvm.rooms = _.filter(rooms, function (room) {\n\t\t\t\treturn room.floor === vm.floor && room.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction printerFilter(printers) {\n\t\t\tvm.printers = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.floor === vm.floor && printer.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction artifactFilter(artifacts) {\n\t\t\tvm.artifacts = _.filter(artifacts, function (artifact) {\n\t\t\t\treturn artifact.floor === vm.floor && artifact.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction mapEmployee() {\n\t\t\t// If there is a mapped employee and we know their floor\n\t\t\tif (vm.mappedEmployee && vm.mappedEmployee.floor) {\n\t\t\t\t// If the mapped employee is on a different floor, un-map them\n\t\t\t\tif (vm.floor !== vm.mappedEmployee.floor) {\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(null);\n\t\t\t\t}\n\t\t\t\t// Map an employee based on a seat number\n\t\t\t} else if ($stateParams.seat) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(mapEmployeeBySeat);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapEmployeeBySeat(employees) {\n\t\t\tvar mappedEmployeeArray = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.seat === $stateParams.seat && employee.location === vm.location;\n\t\t\t});\n\n\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\tvm.location = vm.mappedEmployee.location;\n\t\t\t\tvm.floor = vm.mappedEmployee.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoom() {\n\t\t\t// If there is a mapped printer and we know its floor\n\t\t\tif (vm.mappedPrinter && vm.mappedPrinter.floor) {\n\t\t\t\t// If the mapped printer is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedPrinter.floor) {\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(null);\n\t\t\t\t}\n\t\t\t\t// Map an printer based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedPrinterService.getAllPrinters().$promise.then(mapPrinterByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoomByName(rooms) {\n\t\t\tvar mappedRoomArray = _.filter(rooms, function (room) {\n\t\t\t\treturn room.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t\tvm.floor = vm.mappedRoom.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinter() {\n\t\t\t// If there is a mapped room and we know its floor\n\t\t\tif (vm.mappedRoom && vm.mappedRoom.floor) {\n\t\t\t\t// If the mapped room is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedRoom.floor) {\n\t\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(null);\n\t\t\t\t}\n\t\t\t\t// Map an room based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedRoomService.getAllRooms().$promise.then(mapRoomByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinterByName(printers) {\n\t\t\tvar mappedPrinterArray = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\tvm.floor = vm.mappedPrinter.floor;\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexCtrl', edIndexCtrl);\n\n\tedIndexCtrl.$inject = ['edSidebarService', 'edIdentityService', 'edEmployeeService', 'edEventService', 'moment'];\n\n\tfunction edIndexCtrl(edSidebarService, edIdentityService, edEmployeeService, edEventService, moment) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByBirthday);\n\t\t\tedEventService.getAllEvents().$promise.then(filterEventsByDate);\n\t\t}\n\n\t\tvar today = moment();\n\n\t\tfunction filterEmployeesByBirthday(employees) {\n\t\t\tif (edEmployeeService.filterEmployeesByBirthday(employees, today).length > 0) {\n\t\t\t\tedSidebarService.openTodayPanel(true);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEventsByDate(events) {\n\t\t\tif (edEventService.filterEventsByDate(events, today).length > 0) {\n\t\t\t\tedSidebarService.openTodayPanel(true);\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edEventInfo', edEventInfo);\n\n\tedEventInfo.$inject = ['$timeout', '$sce', 'edEventService', 'moment'];\n\n\tfunction edEventInfo($timeout, $sce, edEventService, moment) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/events/components/event-info',\n\t\t\tscope: {},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.selectedEvent = edEventService.updateSelectedEvent(null);\n\n\t\t\tvar deregister = scope.$on('selectedEventChange', function (event, selectedEvent) {\n\t\t\t\tif (scope.selectedEvent) {\n\t\t\t\t\tel.addClass('slide-out').removeClass('slide-in');\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\tel.removeClass('slide-out').addClass('slide-in');\n\t\t\t\t\t\tpopulateEventInfo(selectedEvent);\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tangular.element('.nano').nanoScroller();\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}, 200);\n\t\t\t\t} else {\n\t\t\t\t\tel.addClass('slide-in');\n\t\t\t\t\tpopulateEventInfo(selectedEvent);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\n\t\t\tfunction populateEventInfo(event) {\n\t\t\t\tscope.selectedEvent = angular.copy(event);\n\t\t\t\tvar locations = {\n\t\t\t\t\tbuf: 'Buffalo',\n\t\t\t\t\tnyc: 'NYC',\n\t\t\t\t\tboth: 'Buffalo & NYC'\n\t\t\t\t};\n\t\t\t\tscope.selectedEvent.location = locations[event.location];\n\t\t\t\tif (!scope.selectedEvent.allDay) {\n\t\t\t\t\tscope.selectedEvent.start = moment(event.start).format('h:mm a');\n\t\t\t\t\tscope.selectedEvent.end = moment(event.end).format('h:mm a');\n\t\t\t\t}\n\t\t\t\tscope.selectedEvent.day = moment(event.start).format('MMMM Do, YYYY');\n\t\t\t\tscope.selectedEvent.details = $sce.trustAsHtml(event.details);\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEventSidebarCtrl', edEventSidebarCtrl);\n\n\tedEventSidebarCtrl.$inject = ['$scope', 'edEventService', 'edIdentityService'];\n\n\tfunction edEventSidebarCtrl($scope, edEventService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.selectedEvent = edEventService.getSelectedEvent();\n\t\tvm.identity = edIdentityService;\n\n\t\tvar deregisterSelectedEventChange = $scope.$on('selectedEventChange', function (event, selectedEvent) {\n\t\t\tvm.selectedEvent = angular.copy(selectedEvent);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEventChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEventTopbarCtrl', edEventTopbarCtrl);\n\n\tedEventTopbarCtrl.$inject = [];\n\n\tfunction edEventTopbarCtrl() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedEventResourceService', edCachedEventResourceService);\n\n\tedCachedEventResourceService.$inject = ['edEventResourceService'];\n\n\tfunction edCachedEventResourceService(edEventResourceService) {\n\t\tvar events;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!events || cacheBust) {\n\t\t\t\tevents = edEventResourceService.query({cacheKill: new Date().getTime()});\n\t\t\t}\n\n\t\t\treturn events;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEventResourceService', edEventResourceService);\n\n\tedEventResourceService.$inject = ['$resource'];\n\n\tfunction edEventResourceService($resource) {\n\t\tvar eventResource = $resource('/api/events/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn eventResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEventService', edEventService);\n\n\tedEventService.$inject = ['$rootScope', 'edCachedEventResourceService', '_', 'moment'];\n\n\tfunction edEventService($rootScope, edCachedEventResourceService, _, moment) {\n\t\tvar selectedEvent = null;\n\t\tvar service = {\n\t\t\tgetAllEvents: getAllEvents,\n\t\t\tgetSelectedEvent: getSelectedEvent,\n\t\t\tupdateSelectedEvent: updateSelectedEvent,\n\t\t\tfilterEventsByDate: filterEventsByDate\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all events from the database (or memory)\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} events\n\t\t */\n\t\tfunction getAllEvents(cacheBust) {\n\t\t\treturn edCachedEventResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected event\n\t\t *\n\t\t */\n\t\tfunction getSelectedEvent() {\n\t\t\treturn selectedEvent;\n\t\t}\n\n\t\t/**\n\t\t * Updates the selected event\n\t\t *\n\t\t * @param {Object} event selected event\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction updateSelectedEvent(event) {\n\t\t\tif (event) {\n\t\t\t\t// Find the matching event from the database to use as selectedEvent\n\t\t\t\tselectedEvent = _.find(getAllEvents(), {_id: event._id});\n\t\t\t\t// Use the date objects from the calendar\n\t\t\t\tselectedEvent.start = angular.extend({}, event.start);\n\t\t\t\tif (event.end) {\n\t\t\t\t\tselectedEvent.end = angular.extend({}, event.end);\n\t\t\t\t}\n\t\t\t\tselectedEvent.className = event.className.toString();\n\t\t\t} else {\n\t\t\t\tselectedEvent = null;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectedEventChange', selectedEvent);\n\t\t\treturn selectedEvent;\n\t\t}\n\n\t\t/**\n\t\t * Filters events for the specified date\n\t\t *\n\t\t * @param {Array} events, events to search for one that starts on the specified date\n\t\t * @param {Object} date, event date\n\t\t * @return {Array} events\n\t\t */\n\t\tfunction filterEventsByDate(events, date) {\n\t\t\treturn _.filter(events, function (event) {\n\t\t\t\tif (moment(event.start).isSame(date, 'day')) {\n\t\t\t\t\treturn event;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEventCtrl', edEventCtrl);\n\n\tedEventCtrl.$inject = ['edSidebarService', 'edEventService', '_'];\n\n\tfunction edEventCtrl(edSidebarService, edEventService, _) {\n\t\tvar vm = this;\n\t\tvm.selectEvent = selectEvent;\n\t\tvm.events = [];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEventService.getAllEvents().$promise.then(loadEvents);\n\n\t\t\t/* config object */\n\t\t\tvm.uiConfig = {\n\t\t\t\tcalendar: {\n\t\t\t\t\teditable: false,\n\t\t\t\t\theight: 650,\n\t\t\t\t\ttimezone: 'local',\n\t\t\t\t\theader: {\n\t\t\t\t\t\tleft: 'prev,next today',\n\t\t\t\t\t\tcenter: 'title',\n\t\t\t\t\t\tright: 'month,agendaWeek,agendaDay'\n\t\t\t\t\t},\n\t\t\t\t\teventClick: selectEvent\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvm.eventSources = [vm.events];\n\t\t}\n\n\t\tfunction loadEvents(events) {\n\t\t\t_.forEach(events, function (event) {\n\t\t\t\tvm.events.push(event);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEvent(event) {\n\t\t\tedEventService.updateSelectedEvent(event);\n\t\t\t$('.fc-event.selected').removeClass('selected');\n\t\t\t$(this).addClass('selected');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsTopbarCtrl', edGuildsTopbarCtrl);\n\n\tedGuildsTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edGuildsTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsCtrl', edGuildsCtrl);\n\n\tedGuildsCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edGuildsCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.guild = null;\n\t\tvm.guildMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the guild based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.guild = {\n\t\t\t\tname: currentState.split('.')[1]\n\t\t\t};\n\n\t\t\tif (vm.guild.name) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByGuild);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByGuild(employees) {\n\t\t\tvm.guildMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.guilds && _.indexOf(employee.guilds, vm.guild.name) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpTopbarCtrl', edHelpTopbarCtrl);\n\n\tedHelpTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edHelpTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpCtrl', edHelpCtrl);\n\n\tedHelpCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinterCard', edPrinterCard);\n\n\tedPrinterCard.$inject = ['$timeout', '$state', 'edPrinterService'];\n\n\tfunction edPrinterCard($timeout, $state, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer-card',\n\t\t\tscope: {\n\t\t\t\tprinter: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectPrinter = function (printer) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService'];\n\n\tfunction ctrlFunc($state, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\n\t\tfunction mapPrinter(printer) {\n\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterSelectorCtrl', edPrinterSelectorCtrl);\n\n\tedPrinterSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edPrinterService', 'edEmployeeService', 'edRoomService'];\n\n\tfunction edPrinterSelectorCtrl($scope, $state, $document, edPrinterService, edEmployeeService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.displayPrinterInfoType = edPrinterService.getDisplayPrinterInfoType();\n\t\tvm.selectPrinter = selectPrinter;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edPrinterService.getSelectMultiplePrinters();\n\t\tvm.filteredEmployees = edPrinterService.getAllPrinters();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(printer) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (printer.location) {\n\t\t\t\t\treturn vm.locations.indexOf(printer.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(printer) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the printer is on a floor in BUF\n\t\t\t\t\tif (printer.floor && printer.location === 'buf') {\n\t\t\t\t\t\t// Include this printer if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(printer.floor) > -1;\n\t\t\t\t\t\t// Include this printer if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered printer if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered printer if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinter(printer) {\n\t\t\tif (vm.displayPrinterInfoType === 'profile') {\n\t\t\t\tvm.selectedPrinters = edPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t// If the user is viewing a printer profile page other than the generic printer profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayPrinterInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedPrinters = edPrinterService.addAllFilteredPrinters(vm.filteredPrinters);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedPrinters = edPrinterService.removeAllSelectedPrinters();\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.printerName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.brand = '';\n\t\t\tvm.color = '';\n\t\t}\n\n\t\tvar deregisterSelectMultiplePrintersChange = $scope.$on('selectMultiplePrintersChange', function (event, allowSelectMultiplePrinters) {\n\t\t\tvm.allowSelectAll = allowSelectMultiplePrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultiplePrintersChange);\n\n\t\tvar deregisterDisplayPrinterInfoTypeChange = $scope.$on('displayPrinterInfoTypeChange', function (event, displayPrinterInfoType) {\n\t\t\tvm.displayPrinterInfoType = displayPrinterInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayPrinterInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterTopbarCtrl', edPrinterTopbarCtrl);\n\n\tedPrinterTopbarCtrl.$inject = ['$scope', 'edPrinterService'];\n\n\tfunction edPrinterTopbarCtrl($scope, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\n\t\tvar deregisterSelectedPrintersChanged = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedPrintersChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinter', edPrinter);\n\n\tedPrinter.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edPrinterService'];\n\n\tfunction edPrinter($stateParams, $document, $timeout, $compile, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\torientation: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\t\t// If coming from the profile page via a link in the printer card\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedPrinter) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\t\tif (mappedPrinter && mappedPrinter.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService', 'edNotifierService', 'edEmployeeService', 'edRoomService', '_'];\n\n\tfunction ctrlFunc($state, edPrinterService, edNotifierService, edEmployeeService, edRoomService, _) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.mappedPrinter = null;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapPrinter(name) {\n\t\t\t// Don't map printer if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedPrinterArray = _.filter(vm.printers, function (printer) {\n\t\t\t\t\treturn printer.name === name;\n\t\t\t\t});\n\n\t\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this printer.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\tvar selectedPrinter = edPrinterService.updateSelectedPrinters(edPrinterService.getMappedPrinter())[0];\n\t\t\t$state.go('printers.profile.name', {'printer': selectedPrinter.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedPrinterResourceService', edCachedPrinterResourceService);\n\n\tedCachedPrinterResourceService.$inject = ['edPrinterResourceService'];\n\n\tfunction edCachedPrinterResourceService(edPrinterResourceService) {\n\t\tvar printers;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!printers) {\n\t\t\t\tprinters = edPrinterResourceService.query();\n\t\t\t}\n\n\t\t\treturn printers;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterResourceService', edPrinterResourceService);\n\n\tedPrinterResourceService.$inject = ['$resource'];\n\n\tfunction edPrinterResourceService($resource) {\n\t\tvar printerResource = $resource('/api/printers/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn printerResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterService', edPrinterService);\n\n\tedPrinterService.$inject = ['$rootScope', 'edCachedPrinterResourceService'];\n\n\tfunction edPrinterService($rootScope, edCachedPrinterResourceService) {\n\t\tvar selectedPrinters = [];\n\t\tvar selectedPrinterAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedPrinter = null;\n\t\tvar selectMultiplePrinters = false;\n\t\tvar displayPrinterInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllPrinters: getAllPrinters,\n\t\t\tgetSelectedPrinters: getSelectedPrinters,\n\t\t\taddAllFilteredPrinters: addAllFilteredPrinters,\n\t\t\tupdateSelectedPrinters: updateSelectedPrinters,\n\t\t\tremoveAllSelectedPrinters: removeAllSelectedPrinters,\n\t\t\tsetSelectMultiplePrinters: setSelectMultiplePrinters,\n\t\t\tgetSelectMultiplePrinters: getSelectMultiplePrinters,\n\t\t\tupdateMappedPrinter: updateMappedPrinter,\n\t\t\tgetMappedPrinter: getMappedPrinter,\n\t\t\tsetDisplayPrinterInfoType: setDisplayPrinterInfoType,\n\t\t\tgetDisplayPrinterInfoType: getDisplayPrinterInfoType,\n\t\t\tgetSelectedPrinterAdded: getSelectedPrinterAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all printers from the database (or memory)\n\t\t *\n\t\t * @return {Array} printers\n\t\t */\n\t\tfunction getAllPrinters() {\n\t\t\treturn edCachedPrinterResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected printers\n\t\t *\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction getSelectedPrinters() {\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered printers to the selected printers\n\t\t * Removes any unfiltered printers from selected printers\n\t\t *\n\t\t * @param {Array} printers to add to selected\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction addAllFilteredPrinters(printers) {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(printers, function (printer) {\n\t\t\t\tprinter.selected = true;\n\t\t\t});\n\t\t\tselectedPrinters = printers;\n\t\t\tselectedPrinterAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped printer\n\t\t *\n\t\t * @param {Object} printer to map / un-map\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction updateMappedPrinter(printer) {\n\t\t\t// Un-map the currently mapped printer\n\t\t\tif (!printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\tmappedPrinter = null;\n\t\t\t\t// Un-map the currently mapped printer and (possibly) map the new one\n\t\t\t} else if (printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\t// Map the new printer\n\t\t\t\tif (mappedPrinter._id !== printer._id) {\n\t\t\t\t\tprinter.mapped = true;\n\t\t\t\t\tmappedPrinter = printer;\n\t\t\t\t\t// Just remove the currently mapped printer\n\t\t\t\t} else {\n\t\t\t\t\tmappedPrinter = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested printer (none currently mapped)\n\t\t\t} else if (printer && !mappedPrinter) {\n\t\t\t\tprinter.mapped = true;\n\t\t\t\tmappedPrinter = printer;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedPrinterChange', mappedPrinter);\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped printer\n\t\t *\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction getMappedPrinter() {\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayPrinterInfoType(infoType) {\n\t\t\tdisplayPrinterInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayPrinterInfoTypeChange', displayPrinterInfoType);\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayPrinterInfoType() {\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected printers\n\t\t *\n\t\t * @param {Object} printer the printer to add / remove from selected printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction updateSelectedPrinters(printer) {\n\t\t\t// Allowed to have multiple printers selected\n\t\t\tif (selectMultiplePrinters) {\n\t\t\t\t// This printer is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\tselectedPrinters.unshift(printer);\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters.splice(selectedPrinters.indexOf(printer), 1);\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple printers selected\n\t\t\t} else {\n\t\t\t\t// This printer is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\t// set all selected printer's selected property to false\n\t\t\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this printer's selected property to true\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\t// replace the array of selected printers with just this one printer\n\t\t\t\t\tselectedPrinters = [printer];\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters = [];\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected printers\n\t\t */\n\t\tfunction removeAllSelectedPrinters() {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedPrinters = [];\n\t\t\tselectedPrinterAdded = false;\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected printer was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected printers added\n\t\t */\n\t\tfunction getSelectedPrinterAdded() {\n\t\t\treturn selectedPrinterAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the printer profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on printer profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the printer profile page number\n\t\t *\n\t\t * @return {Number} printer profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one printer at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction setSelectMultiplePrinters(selectMultiple) {\n\t\t\tselectMultiplePrinters = selectMultiple;\n\t\t\t// If there are multiple selected printers, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedPrinters.length > 1) {\n\t\t\t\tvar lastSelectedPrinter = selectedPrinters.shift();\n\t\t\t\t// This printer will be reselected in updateSelectedPrinters\n\t\t\t\tlastSelectedPrinter.selected = false;\n\t\t\t\tselectedPrinters = updateSelectedPrinters(lastSelectedPrinter);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultiplePrintersChange', selectMultiplePrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple printers to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple printer\n\t\t */\n\t\tfunction getSelectMultiplePrinters() {\n\t\t\treturn selectMultiplePrinters;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterCtrl', edPrinterCtrl);\n\n\tedPrinterCtrl.$inject = ['edSidebarService'];\n\n\tfunction edPrinterCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoomCard', edRoomCard);\n\n\tedRoomCard.$inject = ['$timeout', '$state', 'edRoomService'];\n\n\tfunction edRoomCard($timeout, $state, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room-card',\n\t\t\tscope: {\n\t\t\t\troom: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectRoom = function (room) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\n\t\tfunction mapRoom(room) {\n\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomSelectorCtrl', edRoomSelectorCtrl);\n\n\tedRoomSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edRoomService', 'edEmployeeService', 'edPrinterService'];\n\n\tfunction edRoomSelectorCtrl($scope, $state, $document, edRoomService, edEmployeeService, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.displayRoomInfoType = edRoomService.getDisplayRoomInfoType();\n\t\tvm.selectRoom = selectRoom;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edRoomService.getSelectMultipleRooms();\n\t\tvm.filteredEmployees = edRoomService.getAllRooms();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(room) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (room.location) {\n\t\t\t\t\treturn vm.locations.indexOf(room.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(room) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the room is on a floor in BUF\n\t\t\t\t\tif (room.floor && room.location === 'buf') {\n\t\t\t\t\t\t// Include this room if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(room.floor) > -1;\n\t\t\t\t\t\t// Include this room if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered room if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered room if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoom(room) {\n\t\t\tif (vm.displayRoomInfoType === 'profile') {\n\t\t\t\tvm.selectedRooms = edRoomService.updateSelectedRooms(room);\n\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayRoomInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedRooms = edRoomService.addAllFilteredRooms(vm.filteredRooms);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t// If the user is viewing a room profile page other than the generic room profile page\n\t\t\t// go back to the generic room page\n\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedRooms = edRoomService.removeAllSelectedRooms();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.roomName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.type = '';\n\t\t}\n\n\t\tvar deregisterSelectMultipleRoomsChange = $scope.$on('selectMultipleRoomsChange', function (event, allowSelectMultipleRooms) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleRoomsChange);\n\n\t\tvar deregisterDisplayRoomInfoTypeChange = $scope.$on('displayRoomInfoTypeChange', function (event, displayRoomInfoType) {\n\t\t\tvm.displayRoomInfoType = displayRoomInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayRoomInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomTopbarCtrl', edRoomTopbarCtrl);\n\n\tedRoomTopbarCtrl.$inject = ['$scope', 'edRoomService'];\n\n\tfunction edRoomTopbarCtrl($scope, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\n\t\tvar deregisterSelectedRoomsChanged = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedRoomsChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoom', edRoom);\n\n\tedRoom.$inject = ['$stateParams', '$document', '$timeout', 'edRoomService'];\n\n\tfunction edRoom($stateParams, $document, $timeout, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tseat: '@',\n\t\t\t\tnumber: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedRoom = edRoomService.getMappedRoom();\n\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedRoom) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\t\tif (mappedRoom && mappedRoom.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService', 'edNotifierService', 'edEmployeeService', 'edPrinterService', '_'];\n\n\tfunction ctrlFunc($state, edRoomService, edNotifierService, edEmployeeService, edPrinterService, _) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.mappedRoom = null;\n\n\t\tfunction mapRoom(name) {\n\t\t\tvar mappedRoomArray = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.name === name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t} else {\n\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this room.');\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile(seat) {\n\t\t\tvar selectedRoom = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.seat === seat;\n\t\t\t});\n\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\tedRoomService.updateSelectedRooms(selectedRoom[0]);\n\t\t\t$state.go('rooms.profile.name', {'room': selectedRoom[0].name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedRoomResourceService', edCachedRoomResourceService);\n\n\tedCachedRoomResourceService.$inject = ['edRoomResourceService'];\n\n\tfunction edCachedRoomResourceService(edRoomResourceService) {\n\t\tvar rooms;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!rooms) {\n\t\t\t\trooms = edRoomResourceService.query();\n\t\t\t}\n\n\t\t\treturn rooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomResourceService', edRoomResourceService);\n\n\tedRoomResourceService.$inject = ['$resource'];\n\n\tfunction edRoomResourceService($resource) {\n\t\tvar roomResource = $resource('/api/rooms/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn roomResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomService', edRoomService);\n\n\tedRoomService.$inject = ['$rootScope', 'edCachedRoomResourceService'];\n\n\tfunction edRoomService($rootScope, edCachedRoomResourceService) {\n\t\tvar selectedRooms = [];\n\t\tvar selectedRoomAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedRoom = null;\n\t\tvar selectMultipleRooms = false;\n\t\tvar displayRoomInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllRooms: getAllRooms,\n\t\t\tgetSelectedRooms: getSelectedRooms,\n\t\t\taddAllFilteredRooms: addAllFilteredRooms,\n\t\t\tupdateSelectedRooms: updateSelectedRooms,\n\t\t\tremoveAllSelectedRooms: removeAllSelectedRooms,\n\t\t\tsetSelectMultipleRooms: setSelectMultipleRooms,\n\t\t\tgetSelectMultipleRooms: getSelectMultipleRooms,\n\t\t\tupdateMappedRoom: updateMappedRoom,\n\t\t\tgetMappedRoom: getMappedRoom,\n\t\t\tsetDisplayRoomInfoType: setDisplayRoomInfoType,\n\t\t\tgetDisplayRoomInfoType: getDisplayRoomInfoType,\n\t\t\tgetSelectedRoomAdded: getSelectedRoomAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all pooms from the database (or memory)\n\t\t *\n\t\t * @return {Array} rooms\n\t\t */\n\t\tfunction getAllRooms() {\n\t\t\treturn edCachedRoomResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected rooms\n\t\t *\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction getSelectedRooms() {\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered rooms to the selected rooms\n\t\t * Removes any unfiltered rooms from selected rooms\n\t\t *\n\t\t * @param {Array} rooms to add to selected\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction addAllFilteredRooms(rooms) {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(rooms, function (room) {\n\t\t\t\troom.selected = true;\n\t\t\t});\n\t\t\tselectedRooms = rooms;\n\t\t\tselectedRoomAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped room\n\t\t *\n\t\t * @param {Object} room to map / un-map\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction updateMappedRoom(room) {\n\t\t\t// Un-map the currently mapped room\n\t\t\tif (!room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\tmappedRoom = null;\n\t\t\t\t// Un-map the currently mapped room and (possibly) map the new one\n\t\t\t} else if (room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\t// Map the new room\n\t\t\t\tif (mappedRoom._id !== room._id) {\n\t\t\t\t\troom.mapped = true;\n\t\t\t\t\tmappedRoom = room;\n\t\t\t\t\t// Just remove the currently mapped room\n\t\t\t\t} else {\n\t\t\t\t\tmappedRoom = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested room (none currently mapped)\n\t\t\t} else if (room && !mappedRoom) {\n\t\t\t\troom.mapped = true;\n\t\t\t\tmappedRoom = room;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedRoomChange', mappedRoom);\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped room\n\t\t *\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction getMappedRoom() {\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayRoomInfoType(infoType) {\n\t\t\tdisplayRoomInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayRoomInfoTypeChange', displayRoomInfoType);\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayRoomInfoType() {\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected rooms\n\t\t *\n\t\t * @param {Object} room the room to add / remove from selected rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction updateSelectedRooms(room) {\n\t\t\t// Allowed to have multiple rooms selected\n\t\t\tif (selectMultipleRooms) {\n\t\t\t\t// This room is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\tselectedRooms.unshift(room);\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms.splice(selectedRooms.indexOf(room), 1);\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple rooms selected\n\t\t\t} else {\n\t\t\t\t// This room is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\t// set all selected room's selected property to false\n\t\t\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this room's selected property to true\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\t// replace the array of selected rooms with just this one room\n\t\t\t\t\tselectedRooms = [room];\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms = [];\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected rooms\n\t\t */\n\t\tfunction removeAllSelectedRooms() {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedRooms = [];\n\t\t\tselectedRoomAdded = false;\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected room was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected rooms added\n\t\t */\n\t\tfunction getSelectedRoomAdded() {\n\t\t\treturn selectedRoomAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the room profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on room profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the room profile page number\n\t\t *\n\t\t * @return {Number} room profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one room at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction setSelectMultipleRooms(selectMultiple) {\n\t\t\tselectMultipleRooms = selectMultiple;\n\t\t\t// If there are multiple selected rooms, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedRooms.length > 1) {\n\t\t\t\tvar lastSelectedRoom = selectedRooms.shift();\n\t\t\t\t// This room will be reselected in updateSelectedRooms\n\t\t\t\tlastSelectedRoom.selected = false;\n\t\t\t\tselectedRooms = updateSelectedRooms(lastSelectedRoom);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleRoomsChange', selectMultipleRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Gets wether or not we should allow multiple rooms to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple room\n\t\t */\n\t\tfunction getSelectMultipleRooms() {\n\t\t\treturn selectMultipleRooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomCtrl', edRoomCtrl);\n\n\tedRoomCtrl.$inject = ['edSidebarService'];\n\n\tfunction edRoomCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeniorityTopbarCtrl', edSeniorityTopbarCtrl);\n\n\tedSeniorityTopbarCtrl.$inject = [];\n\n\tfunction edSeniorityTopbarCtrl() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeniorityCtrl', edSeniorityCtrl);\n\n\tedSeniorityCtrl.$inject = ['$state', '$stateParams', 'edSidebarService', 'edEmployeeService', '_', 'moment'];\n\n\tfunction edSeniorityCtrl($state, $stateParams, edSidebarService, edEmployeeService, _, moment) {\n\t\tvar vm = this;\n\t\tvm.yos = null;\n\t\tvm.yosEmployees = [];\n\t\tvm.profileEmployee = profileEmployee;\n\t\tvm.years = [1, 2, 3, 4, 5];\n\t\tvm.requestedYos = null;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tif ($stateParams.yos) {\n\t\t\t\tvm.requestedYos = parseInt($stateParams.yos);\n\t\t\t\tvm.nextYos = vm.years[vm.years.indexOf(vm.requestedYos) + 1];\n\t\t\t\tif (!vm.nextYos) {\n\t\t\t\t\tvm.nextYos = 100;\n\t\t\t\t}\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesBySeniority);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesBySeniority(employees) {\n\t\t\tvm.yosEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.hireDate) {\n\t\t\t\t\temployee.displayHireDate = moment(employee.hireDate).format('l');\n\t\t\t\t\temployee.yos = moment().diff(employee.hireDate, 'years');\n\t\t\t\t\t// If the employee has a birthday and it is in the month we are looking at, display them\n\t\t\t\t\tif (employee.yos >= vm.requestedYos && employee.yos < vm.nextYos) {\n\t\t\t\t\t\treturn employee;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}), 'hireDate');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateEventCtrl', edCreateEventCtrl);\n\n\tedCreateEventCtrl.$inject = ['$scope', 'edNotifierService', 'edSidebarService', 'edEventAdminService', 'edIdentityService', '_'];\n\n\tfunction edCreateEventCtrl($scope, edNotifierService, edSidebarService, edEventAdminService, edIdentityService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.createEvent = createEvent;\n\t\tvm.newEvent = {};\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'both',\n\t\t\t\ttext: 'Buffalo & NYC'\n\t\t\t}\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tresetForm();\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction resetForm() {\n\t\t\tvm.newEvent = {\n\t\t\t\ttitle: '',\n\t\t\t\tstart: '',\n\t\t\t\tend: '',\n\t\t\t\tdetails: '',\n\t\t\t\tclassName: '',\n\t\t\t\turl: '',\n\t\t\t\tlocation: '',\n\t\t\t\tallDay: ''\n\t\t\t};\n\t\t}\n\n\t\tfunction createEvent() {\n\t\t\tvar newEventData = {\n\t\t\t\ttitle: vm.newEvent.title,\n\t\t\t\tstart: vm.newEvent.start,\n\t\t\t\tend: vm.newEvent.end,\n\t\t\t\tdetails: vm.newEvent.details,\n\t\t\t\tclassName: [],\n\t\t\t\turl: vm.newEvent.url,\n\t\t\t\tlocation: vm.newEvent.location,\n\t\t\t\tallDay: vm.newEvent.allDay\n\t\t\t};\n\n\t\t\t// Add all the classes\n\t\t\tvar classNames = vm.newEvent.className.split(',');\n\t\t\t_.forEach(classNames, function (className) {\n\t\t\t\tnewEventData.className.push(className);\n\t\t\t});\n\n\t\t\tedEventAdminService.createEvent(newEventData).then(function () {\n\t\t\t\tedNotifierService.notify('New Event Added');\n\t\t\t\tresetForm();\n\t\t\t\t$scope.createEventForm.$setPristine();\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateEventCtrl', edUpdateEventCtrl);\n\n\tedUpdateEventCtrl.$inject = ['$state', 'edNotifierService', 'edEventService', 'edEventAdminService', 'edIdentityService', 'edSidebarService', '_'];\n\n\tfunction edUpdateEventCtrl($state, edNotifierService, edEventService, edEventAdminService, edIdentityService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.updateEvent = updateEvent;\n\t\tvm.deleteEvent = deleteEvent;\n\t\tvm.cancelUpdateEvent = cancelUpdateEvent;\n\t\tvm.selectedEvent = edEventService.getSelectedEvent();\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'both',\n\t\t\t\ttext: 'Buffalo & NYC'\n\t\t\t}\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tif (!vm.selectedEvent) {\n\t\t\t\tedNotifierService.info('Please select an event to update.');\n\t\t\t\t$state.go('events');\n\t\t\t}\n\t\t\t//vm.selectedEvent = angular.extend({}, vm.selEvent);\n\t\t}\n\n\t\tfunction updateEvent() {\n\t\t\t// Get the event data from the form\n\t\t\tvar newEventData = {\n\t\t\t\ttitle: vm.selectedEvent.title,\n\t\t\t\tstart: vm.selectedEvent.start,\n\t\t\t\tend: vm.selectedEvent.end,\n\t\t\t\tdetails: vm.selectedEvent.details,\n\t\t\t\tclassName: [],\n\t\t\t\turl: vm.selectedEvent.url,\n\t\t\t\tlocation: vm.selectedEvent.location,\n\t\t\t\tallDay: vm.selectedEvent.allDay\n\t\t\t};\n\n\t\t\t// Add all the classes\n\t\t\tvar classNames = vm.selectedEvent.className.split(',');\n\t\t\t_.forEach(classNames, function (className) {\n\t\t\t\tnewEventData.className.push(className.trim());\n\t\t\t});\n\n\t\t\tedEventAdminService.updateEvent(newEventData).then(function (event) {\n\t\t\t\tedNotifierService.notify('Event information updated!');\n\t\t\t\t$state.go('events');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Marks event as deleted\n\t\t */\n\t\tfunction deleteEvent() {\n\t\t\tedEventAdminService.updateEvent({deleted: true}).then(function (event) {\n\t\t\t\tedNotifierService.notify('Event deleted!');\n\t\t\t\t$state.go('events');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\tfunction cancelUpdateEvent() {\n\t\t\t$state.go('events');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeMapCtrl', edEmployeeMapCtrl);\n\n\tedEmployeeMapCtrl.$inject = ['$state', '$stateParams', '$scope', 'edEmployeeService', 'edSidebarService'];\n\n\tfunction edEmployeeMapCtrl($state, $stateParams, $scope, edEmployeeService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.unknownLocationEmployee = false;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.updateMappedEmployeeById($stateParams.employee);\n\t\t\t} else if (vm.mappedEmployee) {\n\t\t\t\tlocateEmployee(vm.mappedEmployee);\n\t\t\t}\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tlocateEmployee(mappedEmployee);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateEmployee(employee) {\n\t\t\tif (employee) {\n\t\t\t\tif (employee.seat) {\n\t\t\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t\t\t} else {\n\t\t\t\t\tvm.unknownLocationEmployee = true;\n\t\t\t\t\tvm.mappedEmployee = employee;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvm.unknownLocationEmployee = false;\n\t\t\t\tvm.mappedEmployee = null;\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edOrgChartCtrl', edOrgChartCtrl);\n\n\tedOrgChartCtrl.$inject = ['$scope', '$state', '$stateParams', 'edEmployeeService', 'edSidebarService', '_'];\n\n\tfunction edOrgChartCtrl($scope, $state, $stateParams, edEmployeeService, edSidebarService, _) {\n\t\tvar employees = edEmployeeService.getAllEmployees();\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\tvm.manager = null;\n\t\tvm.directReports = [];\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(getEmployeeById);\n\t\t\t} else if (vm.selectedEmployee) {\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getEmployeeById(employees) {\n\t\t\tvar employee = _.findWhere(employees, {'eid': parseInt($stateParams.employee)});\n\t\t\tif (employee) {\n\t\t\t\tif (employee !== vm.selectedEmployee) {\n\t\t\t\t\tselectEmployee(employee);\n\t\t\t\t}\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getManager() {\n\t\t\tvm.manager = _.findWhere(employees, {'eid': vm.selectedEmployee.mid});\n\t\t}\n\n\t\tfunction getDirectReports() {\n\t\t\tvm.directReports = _.sortBy(_.filter(employees, {'mid': vm.selectedEmployee.eid}), 'lastName');\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(employee)[0];\n\t\t}\n\n\t\tfunction profileEmployee() {\n\t\t\t$state.go('employees.profile.employee', {'employee': vm.selectedEmployee.eid});\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\n\t\t\tif (vm.selectedEmployee) {\n\t\t\t\t$state.go('employees.org-chart', {'employee': vm.selectedEmployee.eid});\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeProfileCtrl', edEmployeeProfileCtrl);\n\n\tedEmployeeProfileCtrl.$inject = ['$scope', '$document', 'edEmployeeService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edEmployeeProfileCtrl($scope, $document, edEmployeeService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edEmployeeService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(true);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\n\t\t\tif ($stateParams.employee || $stateParams.team || $stateParams.department || $stateParams.title || $stateParams.firstname || $stateParams.lastname) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(function (employees) {\n\t\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t\tselectEmployeeById(employees);\n\t\t\t\t\t} else if ($stateParams.team) {\n\t\t\t\t\t\tselectEmployeeByTeam(employees);\n\t\t\t\t\t} else if ($stateParams.department) {\n\t\t\t\t\t\tselectEmployeeByDepartment(employees);\n\t\t\t\t\t} else if ($stateParams.title) {\n\t\t\t\t\t\tselectEmployeeByTitle(employees);\n\t\t\t\t\t} else if ($stateParams.firstname || $stateParams.lastname) {\n\t\t\t\t\t\tselectEmployeeByName(employees);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployeeById(employees) {\n\t\t\t// Split eid query on comma\n\t\t\tvar employeeids = $stateParams.employee.split(',');\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.employee === '1209615') {\n\t\t\t\t\tvm.s = 's1209615';\n\t\t\t\t}\n\t\t\t\tangular.forEach(employeeids, function (eid) {\n\t\t\t\t\t// If the employee's id is part of the query\n\t\t\t\t\tif (employee.hasOwnProperty('eid') && employee.eid === parseInt(eid)) {\n\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTeam(employees) {\n\t\t\t// Split teams query on comma\n\t\t\tvar teams = $stateParams.team.split(',');\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tangular.forEach(teams, function (team) {\n\t\t\t\t\t// If the employee's team is part of the query\n\t\t\t\t\tif (employee.hasOwnProperty('team') && employee.team.toLowerCase() === team.toLowerCase()) {\n\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByDepartment(employees) {\n\t\t\t// Split departments query on comma\n\t\t\tvar departments = $stateParams.department.split(',');\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tangular.forEach(departments, function (department) {\n\t\t\t\t\t// If the employee's department is part of the query\n\t\t\t\t\tif (employee.hasOwnProperty('department') && employee.department.toLowerCase() === department.toLowerCase()) {\n\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTitle(employees) {\n\t\t\t// Split titles query on pipe\n\t\t\tvar titles = $stateParams.title.split('|');\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tangular.forEach(titles, function (title) {\n\t\t\t\t\t// If the employee's title is part of the query\n\t\t\t\t\tif (employee.hasOwnProperty('title') && employee.title.toLowerCase() === title.toLowerCase()) {\n\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByName(employees) {\n\t\t\tif ($stateParams.firstname) {\n\t\t\t\t// Split first name query on comma\n\t\t\t\tvar firstnames = $stateParams.firstname.split(',');\n\t\t\t}\n\t\t\tif ($stateParams.lastname) {\n\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t}\n\t\t\t\t// Loop over all the last names\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif (firstnames && firstnames.length > 0) {\n\t\t\t\t\t// Loop over each first name\n\t\t\t\t\tangular.forEach(firstnames, function (firstname) {\n\t\t\t\t\t\t// If the employee's first name (or nickname) is part of the query check the last names\n\t\t\t\t\t\tif (employee.firstName.toLowerCase() === firstname.toLowerCase() ||\n\t\t\t\t\t\t\t(employee.hasOwnProperty('nickname') && employee.nickname.toLowerCase() === firstname.toLowerCase())) {\n\t\t\t\t\t\t\t// If last names are on the query string\n\t\t\t\t\t\t\tif (lastnames && lastnames.length > 0) {\n\t\t\t\t\t\t\t\t// Split last name query on comma\n\t\t\t\t\t\t\t\tlastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// No last name query so only worry about the first name\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// This employee's first name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// No first name query so only worry about the last name\n\t\t\t\t} else if (lastnames && lastnames.length > 0) {\n\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t// This employee's last name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedEmployeeService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t\t// If we added to selected employees, go to first page and scroll to the top\n\t\t\tif (edEmployeeService.getSelectedEmployeeAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpLocationCtrl', edHelpLocationCtrl);\n\n\tedHelpLocationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpLocationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpNavigationCtrl', edHelpNavigationCtrl);\n\n\tedHelpNavigationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpNavigationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpProfileCtrl', edHelpProfileCtrl);\n\n\tedHelpProfileCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpProfileCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpOrgChartCtrl', edHelpOrgChartCtrl);\n\n\tedHelpOrgChartCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpOrgChartCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterProfileCtrl', edPrinterProfileCtrl);\n\n\tedPrinterProfileCtrl.$inject = ['$scope', '$document', 'edPrinterService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edPrinterProfileCtrl($scope, $document, edPrinterService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edPrinterService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('profile');\n\t\t\tedPrinterService.setSelectMultiplePrinters(true);\n\t\t\tedPrinterService.updateMappedPrinter(null);\n\n\t\t\tif ($stateParams.printer || $stateParams.printerbrand) {\n\t\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByName);\n\t\t\t\t} else if ($stateParams.printerbrand) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByBrand);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinterByName(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar printers = $stateParams.printer.split(',');\n\t\t\t\t\t// Loop over each printer name\n\t\t\t\t\tangular.forEach(printers, function (name) {\n\t\t\t\t\t\t// If the printer's name is part of the query select it\n\t\t\t\t\t\tif (printer.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectPrinterByBrand(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printerbrand) {\n\t\t\t\t\t// Split printerbrand query on comma\n\t\t\t\t\tvar printerbrands = $stateParams.printerbrand.split(',');\n\t\t\t\t\t// Loop over each printerbrand\n\t\t\t\t\tangular.forEach(printerbrands, function (brand) {\n\t\t\t\t\t\t// If the printer's branc is part of the query select it\n\t\t\t\t\t\tif (printer.brand.toLocaleLowerCase() === brand.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedPrinterService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t\t// If we added to selected printers, go to first page and scroll to the top\n\t\t\tif (edPrinterService.getSelectedPrinterAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterMapCtrl', edPrinterMapCtrl);\n\n\tedPrinterMapCtrl.$inject = ['$state', '$scope', 'edPrinterService', 'edSidebarService'];\n\n\tfunction edPrinterMapCtrl($state, $scope, edPrinterService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tlocatePrinter(vm.mappedPrinter);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tlocatePrinter(mappedPrinter);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locatePrinter(printer) {\n\t\t\tif (printer) {\n\t\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomProfileCtrl', edRoomProfileCtrl);\n\n\tedRoomProfileCtrl.$inject = ['$scope', '$document', 'edRoomService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edRoomProfileCtrl($scope, $document, edRoomService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edRoomService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('profile');\n\t\t\tedRoomService.setSelectMultipleRooms(true);\n\t\t\tedRoomService.updateMappedRoom(null);\n\n\t\t\tif ($stateParams.room || $stateParams.roomtype) {\n\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByName);\n\t\t\t\t} else if ($stateParams.roomtype) {\n\t\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoomByName(rooms) {\n\t\t\tvar selectedRooms = _.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar rooms = $stateParams.room.split(',');\n\t\t\t\t\t// Loop over each room name\n\t\t\t\t\tangular.forEach(rooms, function (name) {\n\t\t\t\t\t\t// If the room's name is part of the query select it\n\t\t\t\t\t\tif (room.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectRoomByType(rooms) {\n\t\t\tvar selectedRooms = _.sortBy(_.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.roomtype) {\n\t\t\t\t\t// Split roomtype query on comma\n\t\t\t\t\tvar roomtypes = $stateParams.roomtype.split(',');\n\t\t\t\t\t// Loop over each roomtype\n\t\t\t\t\tangular.forEach(roomtypes, function (type) {\n\t\t\t\t\t\t// If the room's type is part of the query select it\n\t\t\t\t\t\tif (room.type.toLocaleLowerCase() === type.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t}), 'name').reverse();\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedRoomService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t\t// If we added to selected rooms, go to first page and scroll to the top\n\t\t\tif (edRoomService.getSelectedRoomAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomMapCtrl', edRoomMapCtrl);\n\n\tedRoomMapCtrl.$inject = ['$state', '$scope', 'edRoomService', 'edSidebarService'];\n\n\tfunction edRoomMapCtrl($state, $scope, edRoomService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\tlocateRoom(vm.mappedRoom);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tlocateRoom(mappedRoom);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateRoom(room) {\n\t\t\tif (room) {\n\t\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n"],"sourceRoot":"/source/"}