{"version":3,"sources":["public/app/app.module.js","public/app/app.routes.js","public/app/app.run.js","public/app/admin/services/auth.service.js","public/app/admin/services/cached-user-resource.service.js","public/app/admin/services/employee-admin.service.js","public/app/admin/services/event-admin.service.js","public/app/admin/services/user-resource.service.js","public/app/admin/services/user.service.js","public/app/birthdays/components/birthdays-topbar.controller.js","public/app/birthdays/views/birthdays.controller.js","public/app/admin/components/admin-topbar.controller.js","public/app/admin/components/seat-picker-desk.directive.js","public/app/admin/components/seat-picker-topbar.controller.js","public/app/admin/components/user-selector.controller.js","public/app/admin/views/create-employee.controller.js","public/app/admin/views/create-user.controller.js","public/app/admin/views/login.controller.js","public/app/admin/views/seat-picker-floor.controller.js","public/app/admin/views/seat-picker.controller.js","public/app/admin/views/update-employee.controller.js","public/app/admin/views/update-user.controller.js","public/app/admin/views/user-list.controller.js","public/app/admin/views/user-profile.controller.js","public/app/common/services/artifact-resource.service.js","public/app/common/services/artifact.service.js","public/app/common/services/cached-artifact-resource.service.js","public/app/common/services/identity.service.js","public/app/common/services/notifier.service.js","public/app/common/services/sidebar.service.js","public/app/common/components/artifact.directive.js","public/app/common/components/footer.directive.js","public/app/common/components/header.directive.js","public/app/common/components/index-topbar.controller.js","public/app/common/components/sidebar-left.directive.js","public/app/common/components/today-panel.directive.js","public/app/common/filters/custom-filters.js","public/app/employees/services/cached-desk-resource.service.js","public/app/employees/services/cached-employee-resource.service.js","public/app/employees/services/desk-resource.service.js","public/app/employees/services/desk.service.js","public/app/employees/services/employee-resource.service.js","public/app/employees/services/employee.service.js","public/app/employees/views/employee.controller.js","public/app/committees/components/committees-topbar.controller.js","public/app/common/utilities/highlighter.directive.js","public/app/common/utilities/nanoscroller.directive.js","public/app/common/utilities/svg.directive.js","public/app/committees/views/committees.controller.js","public/app/events/components/event-info.directive.js","public/app/events/components/event-sidebar.controller.js","public/app/events/components/event-topbar.controller.js","public/app/events/views/event.controller.js","public/app/employees/components/desk.directive.js","public/app/employees/components/employee-card.directive.js","public/app/employees/components/employee-selector.controller.js","public/app/employees/components/employee-topbar.controller.js","public/app/events/services/cached-event-resource.service.js","public/app/events/services/event-resource.service.js","public/app/events/services/event.service.js","public/app/guilds/components/guilds-topbar.controller.js","public/app/help/views/help.controller.js","public/app/printers/components/printer-card.directive.js","public/app/printers/components/printer-selector.controller.js","public/app/printers/components/printer-topbar.controller.js","public/app/printers/components/printer.directive.js","public/app/printers/services/cached-printer-resource.service.js","public/app/printers/services/printer-resource.service.js","public/app/printers/services/printer.service.js","public/app/printers/views/printer.controller.js","public/app/common/views/floor.controller.js","public/app/common/views/index.controller.js","public/app/rooms/components/room-card.directive.js","public/app/rooms/components/room-selector.controller.js","public/app/rooms/components/room-topbar.controller.js","public/app/rooms/components/room.directive.js","public/app/rooms/views/room.controller.js","public/app/help/components/help-topbar.controller.js","public/app/guilds/views/guilds.controller.js","public/app/rooms/services/cached-room-resource.service.js","public/app/rooms/services/room-resource.service.js","public/app/rooms/services/room.service.js","public/app/admin/views/events/create-event.controller.js","public/app/admin/views/events/update-event.controller.js","public/app/employees/views/org-chart/org-chart.controller.js","public/app/employees/views/profile/employee-profile.controller.js","public/app/employees/views/map/employee-map.controller.js","public/app/help/views/org-chart/help-org-chart.controller.js","public/app/help/views/location/help-location.controller.js","public/app/help/views/navigation/help-navigation.controller.js","public/app/rooms/views/map/room-map.controller.js","public/app/rooms/views/profile/room-profile.controller.js","public/app/printers/views/profile/printer-profile.controller.js","public/app/printers/views/map/printer-map.controller.js","public/app/help/views/profile/help-profile.controller.js"],"names":["angular","module","constant","window","_","moment","configure","$stateProvider","$urlRouterProvider","$locationProvider","$compileProvider","routeRoleChecks","superAdmin","requireSuperAdmin","admin","requireAdmin","user","requireAuth","aHrefSanitizationWhitelist","html5Mode","otherwise","when","state","url","views","main","templateUrl","controller","controllerAs","topbar","sidebar","main@","sidebar@","topbar@","resolve","auth","edAuthService","authorizeCurrentUserForRoute","authorizeAuthenticatedUserForRoute","config","$inject","appRun","$rootScope","$state","$stateParams","$document","edSidebarService","$on","event","toState","toParams","fromState","fromParams","error","go","body","scrollTop","documentElement","firstname","lastname","printer","printerbrand","room","roomtype","employee","team","department","openTodayPanel","run","$http","$q","edIdentityService","edUserResourceService","edUserService","authenticateUser","username","password","dfd","defer","post","then","response","data","success","extend","currentUser","promise","createUser","newUserData","newUser","$save","$broadcast","getAllUsers","reject","reason","updateCurrentUser","clone","copy","$update","updateUser","selectedUser","getSelectedUser","currentUserClone","_id","setSelectedUser","logoutUser","logout","undefined","role","isAuthorized","isAuthenticated","service","factory","edCachedUserResourceService","query","cacheBust","users","cacheKill","Date","getTime","edEmployeeAdminService","edEmployeeService","edEmployeeResourceService","Upload","updateEmployee","newEmployeeData","selectedEmployees","getSelectedEmployees","removeAllSelectedEmployees","getAllEmployees","createEmployee","newEmployee","uploadEmployeePhoto","employeePhoto","employeeData","upload","file","fileName","eid","name","split","pop","resp","console","log","status","evt","progressPercentage","parseInt","loaded","total","edEventAdminService","edEventService","edEventResourceService","updateEvent","newEventData","selectedEvent","getSelectedEvent","getAllEvents","createEvent","newEvent","$resource","userResource","update","method","isArray","prototype","isAdmin","this","roles","indexOf","selected","edBirthdaysTopbarCtrl","edBirthdaysCtrl","activate","setLockSidebar","$promise","filterEmployeesByBirthday","employees","currentDay","date","vm","birthMonthEmployees","sortBy","filter","birthdate","requestedMonth","months","month","birthday","currentMonth","birthdayToday","profileEmployee","edAdminTopbarCtrl","identity","edSeatPickerDesk","directive","restrict","replace","scope","location","floor","seat","orientation","classification","xpos","ypos","ctrlFunc","edNotifierService","assignSeat","notify","edSeatPickerTopbarCtrl","edUserSelectorCtrl","$scope","selectUser","deregisterUserUpdated","edCreateEmployeeCtrl","edDeskService","resetForm","createManagerList","firstName","lastName","nickname","email","phone","ext","title","guilds","committees","hasReports","mid","managers","forEach","include","guild","push","committee","image","updateSelectedEmployees","toLowerCase","createEmployeeForm","$setPristine","desks","getAllDesks","locationOptions","value","text","departments","employeesUpdatedEvent","edCreateUserCtrl","edLoginCtrl","signin","edSeatPickerFloorCtrl","checkForSelectedEmployee","currentState","current","locationAndFloor","locationName","deskFilter","desk","length","setSelectMultipleEmployees","setDisplayEmployeeInfoType","deregisterEmployee","edSeatPickerCtrl","updateMappedEmployee","setRemoteEmployee","selectedEmployee","edUpdateEmployeeCtrl","populateEmployee","format","filterManagers","filteredManagers","manager","imageFile","deleteEmployee","deletedEmployee","directReports","directReport","deleted","cancelUpdateEmployee","selectedEmployeesChangeEvent","edUpdateUserCtrl","populateUserInfo","selectedUserChangeEvent","edUserListCtrl","edUserProfileCtrl","fname","lname","edArtifactResourceService","artifactResource","edArtifactService","edCachedArtifactResourceService","getAllArtifacts","artifacts","$window","bootstrappedUserObject","edToastr","msg","info","options","showDuration","hideDuration","toastr","lock","sidebarLocked","getLockSidebar","open","edArtifact","edFooter","signout","edHeader","edIndexTopbarCtrl","edSidebarLeft","sidebarOpen","toggleSidebar","closeSidebar","scrollSidebarTop","$","nanoScroller","scroll","deregister","deregisterSelectedEventChange","edTodayPanel","togglePanel","panelOpen","birthdays","filterEventsByDate","events","start","isSame","today","dayOfMonth","monthOfYear","edPhoneNumberFilter","tel","country","city","number","toString","trim","slice","edCachedDeskResourceService","edDeskResourceService","edCachedEmployeeResourceService","ees","find","displayName","fullName","deskResource","employeeResource","addAllFilteredEmployees","prevSelected","selectedEmployeeAdded","mappedEmployee","mapped","updateMappedEmployeeById","id","getMappedEmployee","infoType","displayEmployeeInfoType","getDisplayEmployeeInfoType","selectMultipleEmployees","splice","unshift","getSelectedEmployeeAdded","setProfilePageNumber","pageNumber","profilePageNumber","getProfilePageNumber","selectMultiple","lastSelectedEmployee","shift","getSelectMultipleEmployees","edEmployeeCtrl","edCommitteesTopbarCtrl","edHighlighter","$timeout","linkFunc","element","attrs","$watch","nv","ov","addClass","removeClass","duration","link","edNanoscroller","el","preventPageScrolling","template","svg","imgId","imgClass","imgUrl","path","filename","get","i","constructor","attr","removeAttr","replaceWith","edCommitteesCtrl","filterEmployeesByCommittee","committeeMembers","edEventInfo","$sce","populateEventInfo","allDay","end","day","details","trustAsHtml","updateSelectedEvent","edEventSidebarCtrl","edEventTopbarCtrl","edEventCtrl","loadEvents","uiConfig","calendar","editable","height","timezone","header","left","center","right","eventClick","selectEvent","eventSources","edDesk","$compile","scrollToElement","append","markerLabel","leftPos","outerWidth","css","remove","edPrinterService","edRoomService","mapEmployee","viewingProfile","mappedEmployeeArray","updateMappedPrinter","updateMappedRoom","viewProfile","edEmployeeCard","twEmail","lync","deselectEmployee","parent","child","children","first","editEmployee","edEmployeeSelectorCtrl","filterLocations","locations","locationFilter","nycOnly","filterFloors","floors","floorFilter","selectEmployee","selectAll","filteredEmployees","scrollTopAnimated","selectNone","clearFilter","employeeName","6","7","8","buf","nyc","allowSelectAll","deregisterEmployeesUpdated","deregisterSelectMultipleEmployeesChange","allowSelectMultipleEmployees","deregisterDisplayEmployeeInfoTypeChange","edEmployeeTopbarCtrl","deregisterSelectedEmployeesChanged","edCachedEventResourceService","eventResource","className","edGuildsTopbarCtrl","edHelpCtrl","edPrinterCard","deselectPrinter","updateSelectedPrinters","mapPrinter","edPrinterSelectorCtrl","selectPrinter","displayPrinterInfoType","selectedPrinters","addAllFilteredPrinters","filteredPrinters","removeAllSelectedPrinters","printerName","brand","color","printers","getAllPrinters","getSelectedPrinters","getDisplayPrinterInfoType","getSelectMultiplePrinters","deregisterSelectMultiplePrintersChange","allowSelectMultiplePrinters","deregisterDisplayPrinterInfoTypeChange","edPrinterTopbarCtrl","deregisterSelectedPrintersChanged","edPrinter","mappedPrinter","getMappedPrinter","mappedPrinterArray","selectedPrinter","edCachedPrinterResourceService","edPrinterResourceService","printerResource","selectedPrinterAdded","setDisplayPrinterInfoType","selectMultiplePrinters","getSelectedPrinterAdded","setSelectMultiplePrinters","lastSelectedPrinter","edPrinterCtrl","edFloorCtrl","setDisplayRoomInfoType","getAllRooms","roomFilter","printerFilter","artifactFilter","mapRoom","rooms","artifact","mapEmployeeBySeat","mapPrinterByName","mapRoomByName","mappedRoomArray","mappedRoom","selectedRooms","setSelectMultipleRooms","getMappedRoom","showSeatNumbers","deregisterPrinter","deregisterRoom","edIndexCtrl","edRoomCard","deselectRoom","updateSelectedRooms","edRoomSelectorCtrl","selectRoom","displayRoomInfoType","addAllFilteredRooms","filteredRooms","removeAllSelectedRooms","roomName","type","getSelectedRooms","getDisplayRoomInfoType","getSelectMultipleRooms","deregisterSelectMultipleRoomsChange","allowSelectMultipleRooms","deregisterDisplayRoomInfoTypeChange","edRoomTopbarCtrl","deregisterSelectedRoomsChanged","edRoom","selectedRoom","edRoomCtrl","edHelpTopbarCtrl","edGuildsCtrl","filterEmployeesByGuild","guildMembers","edCachedRoomResourceService","edRoomResourceService","roomResource","selectedRoomAdded","selectMultipleRooms","getSelectedRoomAdded","lastSelectedRoom","edCreateEventCtrl","classNames","createEventForm","edUpdateEventCtrl","deleteEvent","cancelUpdateEvent","edOrgChartCtrl","getEmployeeById","getManager","getDirectReports","findWhere","edEmployeeProfileCtrl","selectEmployeeById","selectEmployeeByTeam","selectEmployeeByDepartment","selectEmployeeByTitle","selectEmployeeByName","match","employeeids","hasOwnProperty","teams","reverse","titles","firstnames","lastnames","changePage","newPageNumber","currentPage","edEmployeeMapCtrl","locateEmployee","unknownLocationEmployee","edHelpOrgChartCtrl","edHelpLocationCtrl","edHelpNavigationCtrl","edRoomMapCtrl","locateRoom","edRoomProfileCtrl","selectRoomByName","selectRoomByType","toLocaleLowerCase","roomtypes","edPrinterProfileCtrl","selectPrinterByName","selectPrinterByBrand","printerbrands","edPrinterMapCtrl","locatePrinter","edHelpProfileCtrl"],"mappings":"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","file":"main-9624957b79.js","sourcesContent":["(function () {\n\t'use strict';\n\tangular.module('app', ['ngResource', 'ui.router', 'ngFileUpload', 'angular.filter', 'ngAnimate', 'duScroll', 'angular.vertilize', 'angularUtils.directives.dirPagination', 'focus-if', 'ui.calendar', 'moment-picker']);\n\n\tangular.module('app').constant('_', window._).constant('moment', window.moment);\n})();","(function () {\n\t'use strict';\n\tangular.module('app').config(configure);\n\n\tconfigure.$inject = ['$stateProvider', '$urlRouterProvider', '$locationProvider', '$compileProvider'];\n\n\tfunction configure($stateProvider, $urlRouterProvider, $locationProvider, $compileProvider) {\n\t\tvar routeRoleChecks = {\n\t\t\tsuperAdmin: requireSuperAdmin,\n\t\t\tadmin: requireAdmin,\n\t\t\tuser: requireAuth\n\t\t};\n\n\t\t// Allow some extra protocols\n\t\t$compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|chrome-extension|im|sip):/);\n\n\t\t$locationProvider.html5Mode(true);\n\n\t\t// for any unmatched url\n\t\t$urlRouterProvider.otherwise('/');\n\n\t\t$urlRouterProvider.when('/employees/', '/employees');\n\t\t$urlRouterProvider.when('/printers/', '/printers');\n\t\t$urlRouterProvider.when('/rooms/', '/rooms');\n\t\t$urlRouterProvider.when('/guilds/', '/guilds');\n\t\t$urlRouterProvider.when('/committees/', '/committees');\n\n\t\t$stateProvider\n\t\t\t.state('home', {\n\t\t\t\turl: '/',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/index',\n\t\t\t\t\t\tcontroller: 'edIndexCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/components/index-topbar',\n\t\t\t\t\t\tcontroller: 'edIndexTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees', {\n\t\t\t\turl: '/employees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/employee',\n\t\t\t\t\t\tcontroller: 'edEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-topbar',\n\t\t\t\t\t\tcontroller: 'edEmployeeTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile', {\n\t\t\t\turl: '/profile/?firstname&lastname',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.department', {\n\t\t\t\turl: 'department/:department',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.title', {\n\t\t\t\turl: 'title/:title',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.team', {\n\t\t\t\turl: 'team/:team',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.employee', {\n\t\t\t\turl: 'employee/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.org-chart', {\n\t\t\t\turl: '/org-chart/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/org-chart/org-chart',\n\t\t\t\t\t\tcontroller: 'edOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map', {\n\t\t\t\turl: '/map/?employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/map/employee-map',\n\t\t\t\t\t\tcontroller: 'edEmployeeMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-6', {\n\t\t\t\turl: 'buf-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-7', {\n\t\t\t\turl: 'buf-7/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-8', {\n\t\t\t\turl: 'buf-8/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.nyc-6', {\n\t\t\t\turl: 'nyc-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers', {\n\t\t\t\turl: '/printers',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/printer',\n\t\t\t\t\t\tcontroller: 'edPrinterCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-selector',\n\t\t\t\t\t\tcontroller: 'edPrinterSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-topbar',\n\t\t\t\t\t\tcontroller: 'edPrinterTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.name', {\n\t\t\t\turl: '/name/:printer',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.brand', {\n\t\t\t\turl: '/brand/:printerbrand',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/map/printer-map',\n\t\t\t\t\t\tcontroller: 'edPrinterMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms', {\n\t\t\t\turl: '/rooms',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/room',\n\t\t\t\t\t\tcontroller: 'edRoomCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-selector',\n\t\t\t\t\t\tcontroller: 'edRoomSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-topbar',\n\t\t\t\t\t\tcontroller: 'edRoomTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.name', {\n\t\t\t\turl: '/name/:room',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.type', {\n\t\t\t\turl: '/type/:roomtype',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/map/room-map',\n\t\t\t\t\t\tcontroller: 'edRoomMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin', {\n\t\t\t\turl: '/admin',\n\t\t\t\t'views': {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/login',\n\t\t\t\t\t\tcontroller: 'edLoginCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/admin-topbar',\n\t\t\t\t\t\tcontroller: 'edAdminTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.users', {\n\t\t\t\turl: '/users',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-list',\n\t\t\t\t\t\tcontroller: 'edUserListCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.user-profile', {\n\t\t\t\turl: '/user-profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-profile',\n\t\t\t\t\t\tcontroller: 'edUserProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.user\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-user', {\n\t\t\t\turl: '/create-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-user',\n\t\t\t\t\t\tcontroller: 'edCreateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-user', {\n\t\t\t\turl: '/update-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-user',\n\t\t\t\t\t\tcontroller: 'edUpdateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/user-selector',\n\t\t\t\t\t\tcontroller: 'edUserSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-employee', {\n\t\t\t\turl: '/create-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-employee',\n\t\t\t\t\t\tcontroller: 'edCreateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-employee', {\n\t\t\t\turl: '/update-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-employee',\n\t\t\t\t\t\tcontroller: 'edUpdateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-event', {\n\t\t\t\turl: '/create-event',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/events/create-event',\n\t\t\t\t\t\tcontroller: 'edCreateEventCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-event', {\n\t\t\t\turl: '/update-event',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/events/update-event',\n\t\t\t\t\t\tcontroller: 'edUpdateEventCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker', {\n\t\t\t\turl: '/seat-picker',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker',\n\t\t\t\t\t\tcontroller: 'edSeatPickerCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-topbar',\n\t\t\t\t\t\tcontroller: 'edSeatPickerTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-6', {\n\t\t\t\turl: '/buf-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-7', {\n\t\t\t\turl: '/buf-7',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-8', {\n\t\t\t\turl: '/buf-8',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.nyc-6', {\n\t\t\t\turl: '/nyc-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds', {\n\t\t\t\turl: '/guilds',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/components/guilds-topbar',\n\t\t\t\t\t\tcontroller: 'edGuildsTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds.front-end', {\n\t\t\t\turl: '/front-end',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees', {\n\t\t\t\turl: '/committees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/components/committees-topbar',\n\t\t\t\t\t\tcontroller: 'edCommitteesTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.fun-games', {\n\t\t\t\turl: '/fun-games',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.diversity', {\n\t\t\t\turl: '/diversity',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.wellness', {\n\t\t\t\turl: '/wellness',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.beautification', {\n\t\t\t\turl: '/beautification',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('birthdays', {\n\t\t\t\turl: '/birthdays',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/views/birthdays',\n\t\t\t\t\t\tcontroller: 'edBirthdaysCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/components/birthdays-topbar',\n\t\t\t\t\t\tcontroller: 'edBirthdaysTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('birthdays.month', {\n\t\t\t\turl: '/:month',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/views/birthdays',\n\t\t\t\t\t\tcontroller: 'edBirthdaysCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('events', {\n\t\t\t\turl: '/events',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/events/views/event',\n\t\t\t\t\t\tcontroller: 'edEventCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/events/components/event-sidebar',\n\t\t\t\t\t\tcontroller: 'edEventSidebarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/events/components/event-topbar',\n\t\t\t\t\t\tcontroller: 'edEventTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help', {\n\t\t\t\turl: '/help',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/help',\n\t\t\t\t\t\tcontroller: 'edHelpCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/components/help-topbar',\n\t\t\t\t\t\tcontroller: 'edHelpTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.navigation', {\n\t\t\t\turl: '/navigation',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/navigation/help-navigation',\n\t\t\t\t\t\tcontroller: 'edHelpNavigationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/profile/help-profile',\n\t\t\t\t\t\tcontroller: 'edHelpProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.location', {\n\t\t\t\turl: '/location',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/location/help-location',\n\t\t\t\t\t\tcontroller: 'edHelpLocationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.org-chart', {\n\t\t\t\turl: '/org-chart',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/org-chart/help-org-chart',\n\t\t\t\t\t\tcontroller: 'edHelpOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trequireAdmin.$inject = ['edAuthService'];\n\n\tfunction requireAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('admin');\n\t}\n\n\trequireSuperAdmin.$inject = ['edAuthService'];\n\n\tfunction requireSuperAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('super-admin');\n\t}\n\n\trequireAuth.$inject = ['edAuthService'];\n\n\tfunction requireAuth(edAuthService) {\n\t\treturn edAuthService.authorizeAuthenticatedUserForRoute();\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').run(appRun);\n\n\tappRun.$inject = ['$rootScope', '$state', '$stateParams', '$document', 'edSidebarService'];\n\n\tfunction appRun($rootScope, $state, $stateParams, $document, edSidebarService) {\n\t\t$rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\n\t\t\tif (error === 'not authorized') {\n\t\t\t\t$state.go('admin');\n\t\t\t}\n\t\t});\n\n\t\t// Clear state params and scroll to the top on route changes\n\t\t$rootScope.$on('$stateChangeSuccess', function () {\n\t\t\t$document[0].body.scrollTop = $document[0].documentElement.scrollTop = 0;\n\t\t\t$stateParams.firstname = null;\n\t\t\t$stateParams.lastname = null;\n\t\t\t$stateParams.printer = null;\n\t\t\t$stateParams.printerbrand = null;\n\t\t\t$stateParams.room = null;\n\t\t\t$stateParams.roomtype = null;\n\t\t\t$stateParams.employee = null;\n\t\t\t$stateParams.team = null;\n\t\t\t$stateParams.department = null;\n\t\t});\n\n\t\t$rootScope.$on('$stateChangeStart', function () {\n\t\t\tedSidebarService.openTodayPanel(false);\n\t\t});\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edAuthService', edAuthService);\n\n\tedAuthService.$inject = ['$http', '$rootScope', '$q', 'edIdentityService', 'edUserResourceService', 'edUserService'];\n\n\tfunction edAuthService($http, $rootScope, $q, edIdentityService, edUserResourceService, edUserService) {\n\t\tvar service = {\n\t\t\tauthenticateUser: authenticateUser,\n\t\t\tcreateUser: createUser,\n\t\t\tupdateUser: updateUser,\n\t\t\tupdateCurrentUser: updateCurrentUser,\n\t\t\tlogoutUser: logoutUser,\n\t\t\tauthorizeCurrentUserForRoute: authorizeCurrentUserForRoute,\n\t\t\tauthorizeAuthenticatedUserForRoute: authorizeAuthenticatedUserForRoute\n\t\t};\n\t\treturn service;\n\n\t\tfunction authenticateUser(username, password) {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/login', {\n\t\t\t\tusername: username,\n\t\t\t\tpassword: password\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\tvar user = new edUserResourceService();\n\t\t\t\t\tangular.extend(user, response.data.user);\n\t\t\t\t\tedIdentityService.currentUser = user;\n\t\t\t\t\tdfd.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.resolve(false);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction createUser(newUserData) {\n\t\t\tvar newUser = new edUserResourceService(newUserData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewUser.$save().then(function () {\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction updateCurrentUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar clone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tclone.$update().then(function () {\n\t\t\t\tedIdentityService.currentUser = clone;\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Updates user record in database\n\t\t * Uses the selected user for updating\n\t\t *\n\t\t * @param {Object} newUserData user data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedUser = edUserService.getSelectedUser();\n\t\t\tvar clone = angular.copy(selectedUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tvar currentUserClone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(currentUserClone, newUserData);\n\t\t\tif (edIdentityService.currentUser._id === clone._id) {\n\t\t\t\tedIdentityService.currentUser = currentUserClone;\n\t\t\t}\n\t\t\tclone.$update().then(function (user) {\n\t\t\t\tedUserService.setSelectedUser(null);\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve(user);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction logoutUser() {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/logout', {\n\t\t\t\tlogout: true\n\t\t\t}).then(function () {\n\t\t\t\tedIdentityService.currentUser = undefined;\n\t\t\t\tdfd.resolve();\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction authorizeCurrentUserForRoute(role) {\n\t\t\tif (edIdentityService.isAuthorized(role)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\n\t\tfunction authorizeAuthenticatedUserForRoute() {\n\t\t\tif (edIdentityService.isAuthenticated()) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedUserResourceService', edCachedUserResourceService);\n\n\tedCachedUserResourceService.$inject = ['edUserResourceService', '_'];\n\n\tfunction edCachedUserResourceService(edUserResourceService, _) {\n\t\tvar users;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!users || cacheBust) {\n\t\t\t\tusers = edUserResourceService.query({cacheKill: new Date().getTime()});\n\t\t\t}\n\n\t\t\treturn users;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeAdminService', edEmployeeAdminService);\n\n\tedEmployeeAdminService.$inject = ['$rootScope', '$q', 'edEmployeeService', 'edEmployeeResourceService', 'Upload'];\n\n\tfunction edEmployeeAdminService($rootScope, $q, edEmployeeService, edEmployeeResourceService, Upload) {\n\t\tvar service = {\n\t\t\tupdateEmployee: updateEmployee,\n\t\t\tcreateEmployee: createEmployee,\n\t\t\tuploadEmployeePhoto: uploadEmployeePhoto\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Updates employee record in database\n\t\t * Uses the selected employee for updating\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateEmployee(newEmployeeData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\t\tvar clone = angular.copy(selectedEmployees[0]);\n\t\t\tangular.extend(clone, newEmployeeData);\n\t\t\tclone.$update().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Create employee record in database\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to insert\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction createEmployee(newEmployeeData) {\n\t\t\tvar newEmployee = new edEmployeeResourceService(newEmployeeData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewEmployee.$save().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Upload employee photo to disk\n\t\t *\n\t\t * @param {Object} employeePhoto employee photo data\n\t\t * @param {Object} employeeData employee data\n\t\t */\n\t\tfunction uploadEmployeePhoto(employeePhoto, employeeData) {\n\t\t\tUpload.upload({\n\t\t\t\turl: 'api/employees/uploadphoto',\n\t\t\t\tdata: {\n\t\t\t\t\tfile: employeePhoto,\n\t\t\t\t\tfileName: employeeData.eid + '.' + employeePhoto.name.split('.').pop()\n\t\t\t\t}\n\t\t\t}).then(function (resp) {\n\t\t\t\tconsole.log('Success ' + resp.config.data.file.name + 'uploaded. Response: ' + resp.data);\n\t\t\t}, function (resp) {\n\t\t\t\tconsole.log('Error status: ' + resp.status);\n\t\t\t}, function (evt) {\n\t\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n\t\t\t\tconsole.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEventAdminService', edEventAdminService);\n\n\tedEventAdminService.$inject = ['$rootScope', '$q', 'edEventService', 'edEventResourceService'];\n\n\tfunction edEventAdminService($rootScope, $q, edEventService, edEventResourceService) {\n\t\tvar service = {\n\t\t\tupdateEvent: updateEvent,\n\t\t\tcreateEvent: createEvent\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Updates event record in database\n\t\t * Uses the selected event for updating\n\t\t *\n\t\t * @param {Object} newEventData event data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateEvent(newEventData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedEvent = edEventService.getSelectedEvent();\n\t\t\tvar clone = angular.copy(selectedEvent);\n\t\t\tangular.extend(clone, newEventData);\n\t\t\tclone.$update().then(function (event) {\n\t\t\t\t$rootScope.$broadcast('eventsUpdated', edEventService.getAllEvents(true));\n\t\t\t\tdfd.resolve(event);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Create event record in database\n\t\t *\n\t\t * @param {Object} newEventData event data to insert\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction createEvent(newEventData) {\n\t\t\tvar newEvent = new edEventResourceService(newEventData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewEvent.$save().then(function (event) {\n\t\t\t\t$rootScope.$broadcast('eventsUpdated', edEventService.getAllEvents(true));\n\t\t\t\tdfd.resolve(event);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserResourceService', edUserResourceService);\n\n\tedUserResourceService.$inject = ['$resource'];\n\n\tfunction edUserResourceService($resource) {\n\t\tvar userResource = $resource('/api/users/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\tuserResource.prototype.isAdmin = function () {\n\t\t\treturn this.roles && this.roles.indexOf('admin') > -1;\n\t\t};\n\n\t\treturn userResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserService', edUserService);\n\n\tedUserService.$inject = ['$rootScope', 'edCachedUserResourceService'];\n\n\tfunction edUserService($rootScope, edUserResourceService) {\n\t\tvar selectedUser = null;\n\t\tvar service = {\n\t\t\tgetAllUsers: getAllUsers,\n\t\t\tgetSelectedUser: getSelectedUser,\n\t\t\tsetSelectedUser: setSelectedUser\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all user from the database\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} users\n\t\t */\n\t\tfunction getAllUsers(cacheBust) {\n\t\t\treturn edUserResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected user\n\t\t *\n\t\t * @return {object} selected user\n\t\t */\n\t\tfunction getSelectedUser() {\n\t\t\treturn selectedUser;\n\t\t}\n\n\t\t/**\n\t\t * Updates the selected user\n\t\t *\n\t\t * @param {Object} user the user select / deselect\n\t\t * @return {Array} selected user\n\t\t */\n\t\tfunction setSelectedUser(user) {\n\t\t\t// Deselect the currently selected user\n\t\t\tif (!user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\tselectedUser = null;\n\t\t\t\t// Deselect the currently selected user and (possibly) select the new one\n\t\t\t} else if (user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\t// Select the new user\n\t\t\t\tif (selectedUser._id !== user._id) {\n\t\t\t\t\tuser.selected = true;\n\t\t\t\t\tselectedUser = user;\n\t\t\t\t\t// Just remove the currently selected user\n\t\t\t\t} else {\n\t\t\t\t\tselectedUser = null;\n\t\t\t\t}\n\t\t\t\t// Select the requested user (none currently selected)\n\t\t\t} else if (user && !selectedUser) {\n\t\t\t\tuser.selected = true;\n\t\t\t\tselectedUser = user;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectedUserChange', selectedUser);\n\t\t\treturn selectedUser;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edBirthdaysTopbarCtrl', edBirthdaysTopbarCtrl);\n\n\tedBirthdaysTopbarCtrl.$inject = [];\n\n\tfunction edBirthdaysTopbarCtrl() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edBirthdaysCtrl', edBirthdaysCtrl);\n\n\tedBirthdaysCtrl.$inject = ['$state', '$stateParams', 'edSidebarService', 'edEmployeeService', '_', 'moment'];\n\n\tfunction edBirthdaysCtrl($state, $stateParams, edSidebarService, edEmployeeService, _, moment) {\n\t\tvar vm = this;\n\t\tvm.month = null;\n\t\tvm.birthMonthEmployees = [];\n\t\tvm.profileEmployee = profileEmployee;\n\t\tvm.months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\t\tvm.requestedMonth = $stateParams.month;\n\t\tvm.currentMonth = moment().month();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByBirthday);\n\t\t}\n\n\t\tfunction filterEmployeesByBirthday(employees) {\n\t\t\tvar currentDay = moment().date();\n\t\t\tvm.birthMonthEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\t// If the employee has a birthday and it is in the month we are looking at, display them\n\t\t\t\tif (employee.birthdate && vm.requestedMonth === vm.months[moment(employee.birthdate).month()]) {\n\t\t\t\t\t// Get the day of the month to display\n\t\t\t\t\temployee.birthday = moment(employee.birthdate).date();\n\t\t\t\t\t// If the employee's birthday is today, set a property to use\n\t\t\t\t\tif (vm.requestedMonth === vm.months[vm.currentMonth] && currentDay === employee.birthday) {\n\t\t\t\t\t\temployee.birthdayToday = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'birthday');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edAdminTopbarCtrl', edAdminTopbarCtrl);\n\n\tedAdminTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edAdminTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSeatPickerDesk', edSeatPickerDesk);\n\n\tfunction edSeatPickerDesk() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tfloor: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edEmployeeAdminService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edEmployeeAdminService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.assignSeat = assignSeat;\n\n\t\tfunction assignSeat(location, floor, seat) {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: location,\n\t\t\t\tfloor: floor,\n\t\t\t\tseat: seat\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee seat updated!');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerTopbarCtrl', edSeatPickerTopbarCtrl);\n\n\tfunction edSeatPickerTopbarCtrl() {\n\t\t// Put awesome here\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserSelectorCtrl', edUserSelectorCtrl);\n\n\tedUserSelectorCtrl.$inject = ['$scope', 'edUserService'];\n\n\tfunction edUserSelectorCtrl($scope, edUserService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserService.getAllUsers(false);\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\t\tvm.selectUser = selectUser;\n\n\t\tfunction selectUser(user) {\n\t\t\tedUserService.setSelectedUser(user);\n\t\t}\n\n\t\tvar deregisterUserUpdated = $scope.$on('userUpdated', function (event, users) {\n\t\t\tvm.users = users;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterUserUpdated);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateEmployeeCtrl', edCreateEmployeeCtrl);\n\n\tedCreateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edSidebarService', 'edEmployeeAdminService', 'edIdentityService', '_'];\n\n\tfunction edCreateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edSidebarService, edEmployeeAdminService, edIdentityService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.createEmployee = createEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.managers = null;\n\t\tvm.newEmployee = {};\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tresetForm();\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t}\n\n\t\tfunction resetForm() {\n\t\t\tvm.newEmployee = {\n\t\t\t\teid: '',\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\tnickname: '',\n\t\t\t\temail: '',\n\t\t\t\tphone: '',\n\t\t\t\text: '',\n\t\t\t\tdepartment: '',\n\t\t\t\ttitle: '',\n\t\t\t\tteam: '',\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: '',\n\t\t\t\tfloor: '',\n\t\t\t\tseat: '',\n\t\t\t\thasReports: '',\n\t\t\t\tmid: '',\n\t\t\t\tbirthdate: ''\n\t\t\t};\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t}\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction createEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.newEmployee.eid,\n\t\t\t\tfirstName: vm.newEmployee.firstName,\n\t\t\t\tlastName: vm.newEmployee.lastName,\n\t\t\t\tnickname: vm.newEmployee.nickname,\n\t\t\t\temail: vm.newEmployee.email,\n\t\t\t\tphone: vm.newEmployee.phone,\n\t\t\t\text: vm.newEmployee.ext,\n\t\t\t\tdepartment: vm.newEmployee.department,\n\t\t\t\ttitle: vm.newEmployee.title,\n\t\t\t\tteam: vm.newEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.newEmployee.location,\n\t\t\t\tfloor: vm.newEmployee.floor,\n\t\t\t\tseat: vm.newEmployee.seat,\n\t\t\t\thasReports: vm.newEmployee.hasReports,\n\t\t\t\tmid: vm.newEmployee.mid,\n\t\t\t\tbirthdate: vm.newEmployee.birthdate\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.newEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.newEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedEmployeeAdminService.createEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('New Employee Added!');\n\t\t\t\t// upload the employee photo if there is one\n\t\t\t\tif (vm.newEmployee.image) {\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(vm.newEmployee.image, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\t// update the selected employee to add so we can update them\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + vm.newEmployee.image.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresetForm();\n\t\t\t\t$scope.createEmployeeForm.$setPristine();\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateUserCtrl', edCreateUserCtrl);\n\n\tedCreateUserCtrl.$inject = ['$state', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edCreateUserCtrl($state, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.createUser = createUser;\n\t\tvm.newUser = {};\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction createUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.newUser.username,\n\t\t\t\tpassword: vm.newUser.password,\n\t\t\t\tfirstName: vm.newUser.firstName,\n\t\t\t\tlastName: vm.newUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.newUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedAuthService.createUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account created!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edLoginCtrl', edLoginCtrl);\n\n\tedLoginCtrl.$inject = ['edIdentityService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edLoginCtrl(edIdentityService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signin = signin;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction signin(username, password) {\n\t\t\tedAuthService.authenticateUser(username, password).then(function (success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tedNotifierService.notify('You have successfully signed in!');\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Username / Password combination incorrect');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerFloorCtrl', edSeatPickerFloorCtrl);\n\n\tedSeatPickerFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$scope', 'edSidebarService', '_'];\n\n\tfunction edSeatPickerFloorCtrl(edEmployeeService, edDeskService, $state, $scope, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\tvm.desks = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tcheckForSelectedEmployee(vm.selectedEmployees);\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tcheckForSelectedEmployee(selectedEmployees);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction checkForSelectedEmployee(selectedEmployees) {\n\t\t\tif (selectedEmployees.length !== 1) {\n\t\t\t\t$state.go('admin.seat-picker');\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerCtrl', edSeatPickerCtrl);\n\n\tedSeatPickerCtrl.$inject = ['$scope', 'edEmployeeService', 'edEmployeeAdminService', 'edNotifierService', 'edSidebarService'];\n\n\tfunction edSeatPickerCtrl($scope, edEmployeeService, edEmployeeAdminService, edNotifierService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.setSelectMultipleEmployees(false)[0];\n\t\tvm.setRemoteEmployee = setRemoteEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction setRemoteEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: 'oth',\n\t\t\t\tfloor: null,\n\t\t\t\tseat: ''\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee location set to remote');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateEmployeeCtrl', edUpdateEmployeeCtrl);\n\n\tedUpdateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edEmployeeAdminService', 'edIdentityService', 'edSidebarService', '_', 'moment'];\n\n\tfunction edUpdateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edEmployeeAdminService, edIdentityService, edSidebarService, _, moment) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.updateEmployee = updateEmployee;\n\t\tvm.deleteEmployee = deleteEmployee;\n\t\tvm.cancelUpdateEmployee = cancelUpdateEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.selectedEmployee = null;\n\t\tvm.managers = null;\n\t\tvm.filteredManagers = [];\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t\tvar selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateEmployee(selectedEmployees) {\n\t\t\tvm.selectedEmployee = {\n\t\t\t\teid: selectedEmployees[0].eid,\n\t\t\t\tfirstName: selectedEmployees[0].firstName,\n\t\t\t\tlastName: selectedEmployees[0].lastName,\n\t\t\t\tnickname: selectedEmployees[0].nickname,\n\t\t\t\temail: selectedEmployees[0].email,\n\t\t\t\tphone: selectedEmployees[0].phone,\n\t\t\t\text: selectedEmployees[0].ext,\n\t\t\t\ttitle: selectedEmployees[0].title,\n\t\t\t\tdepartment: selectedEmployees[0].department,\n\t\t\t\tteam: selectedEmployees[0].team,\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: selectedEmployees[0].location,\n\t\t\t\tfloor: selectedEmployees[0].floor,\n\t\t\t\tseat: selectedEmployees[0].seat,\n\t\t\t\thasReports: selectedEmployees[0].hasReports,\n\t\t\t\tmid: selectedEmployees[0].mid\n\t\t\t};\n\n\t\t\tif (selectedEmployees[0].birthdate) {\n\t\t\t\tvm.selectedEmployee.birthdate = moment(selectedEmployees[0].birthdate).format('LL');\n\t\t\t}\n\n\t\t\t_.forEach(selectedEmployees[0].guilds, function (guild) {\n\t\t\t\tvm.selectedEmployee.guilds[guild] = true;\n\t\t\t});\n\n\t\t\t_.forEach(selectedEmployees[0].committees, function (committee) {\n\t\t\t\tvm.selectedEmployee.committees[committee] = true;\n\t\t\t});\n\n\t\t\tfilterManagers(selectedEmployees[0]);\n\t\t}\n\n\t\t/**\n\t\t * Filter out the selected employee and their direct reports from the managers list\n\t\t *\n\t\t * @param {Object} selectedEmployee employee data for selected employee\n\t\t * @return {Boolean} to include this manager in the list\n\t\t */\n\t\tfunction filterManagers(selectedEmployee) {\n\t\t\tif (vm.managers && selectedEmployee) {\n\t\t\t\tvm.filteredManagers = _.filter(vm.managers, function (manager) {\n\t\t\t\t\t// TODO: Recursively filter out direct reports of direct reports\n\t\t\t\t\treturn (selectedEmployee.eid !== manager.eid) && (selectedEmployee.eid !== manager.mid);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t\tfilterManagers(vm.selectedEmployee);\n\t\t}\n\n\t\tvar selectedEmployeesChangeEvent = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t} else {\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedEmployeesChangeEvent);\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction updateEmployee() {\n\t\t\t// Get the employee data from the form\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.selectedEmployee.eid,\n\t\t\t\tfirstName: vm.selectedEmployee.firstName,\n\t\t\t\tlastName: vm.selectedEmployee.lastName,\n\t\t\t\tnickname: vm.selectedEmployee.nickname,\n\t\t\t\temail: vm.selectedEmployee.email,\n\t\t\t\tphone: vm.selectedEmployee.phone,\n\t\t\t\text: vm.selectedEmployee.ext,\n\t\t\t\ttitle: vm.selectedEmployee.title,\n\t\t\t\tdepartment: vm.selectedEmployee.department,\n\t\t\t\tteam: vm.selectedEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.selectedEmployee.location,\n\t\t\t\tfloor: vm.selectedEmployee.floor,\n\t\t\t\tseat: vm.selectedEmployee.seat,\n\t\t\t\thasReports: vm.selectedEmployee.hasReports,\n\t\t\t\tmid: vm.selectedEmployee.mid,\n\t\t\t\tbirthdate: vm.selectedEmployee.birthdate\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.selectedEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.selectedEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Save the image file for uploading\n\t\t\tvar imageFile = vm.selectedEmployee.imageFile;\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('Employee information updated!');\n\t\t\t\tif (imageFile) {\n\t\t\t\t\t// upload the file to the file system\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(imageFile, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + imageFile.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t\timageFile = null;\n\t\t\t\t}\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Marks employee as deleted\n\t\t * Makes all direct reports of the deleted employee direct reports of the employee's manager\n\t\t */\n\t\tfunction deleteEmployee() {\n\t\t\t// Save employee to delete for later\n\t\t\tvar deletedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\t\t// Find all employees that report to this employee and make them report to the next level up\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(\n\t\t\t\tfunction (employees) {\n\t\t\t\t\tvar eid = deletedEmployee.eid;\n\t\t\t\t\tvar mid = deletedEmployee.mid;\n\t\t\t\t\tvar directReports = _.filter(employees, {'mid': eid});\n\t\t\t\t\t_.forEach(directReports, function (directReport) {\n\t\t\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(directReport);\n\t\t\t\t\t\tedEmployeeAdminService.updateEmployee({mid: mid});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Now delete the employee that was requested to be deleted\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(deletedEmployee);\n\n\t\t\tedEmployeeAdminService.updateEmployee({deleted: true}).then(function (employee) {\n\t\t\t\tedNotifierService.notify(employee.firstName + ' ' + employee.lastName + ' deleted!');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\tfunction cancelUpdateEmployee() {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateUserCtrl', edUpdateUserCtrl);\n\n\tedUpdateUserCtrl.$inject = ['$scope', 'edUserService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edUpdateUserCtrl($scope, edUserService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tif (vm.selectedUser) {\n\t\t\t\tpopulateUserInfo(vm.selectedUser);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateUserInfo(user) {\n\t\t\tvm.selectedUser = {\n\t\t\t\tfirstName: user.firstName,\n\t\t\t\tlastName: user.lastName,\n\t\t\t\tusername: user.username,\n\t\t\t\troles: {}\n\t\t\t};\n\n\t\t\t_.forEach(user.roles, function (role) {\n\t\t\t\tvm.selectedUser.roles[role] = true;\n\t\t\t});\n\t\t}\n\n\t\tvar selectedUserChangeEvent = $scope.$on('selectedUserChange', function (event, selectedUser) {\n\t\t\tif (selectedUser) {\n\t\t\t\tpopulateUserInfo(selectedUser);\n\t\t\t} else {\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedUserChangeEvent);\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tpassword: vm.selectedUser.password,\n\t\t\t\tfirstName: vm.selectedUser.firstName,\n\t\t\t\tlastName: vm.selectedUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.selectedUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (vm.selectedUser.password && vm.selectedUser.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.selectedUser.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserListCtrl', edUserListCtrl);\n\n\tedUserListCtrl.$inject = ['edUserResourceService', 'edSidebarService'];\n\n\tfunction edUserListCtrl(edUserResourceService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserResourceService.query();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserProfileCtrl', edUserProfileCtrl);\n\n\tedUserProfileCtrl.$inject = ['$state', 'edIdentityService', 'edNotifierService', 'edAuthService', 'edUserService', 'edSidebarService'];\n\n\tfunction edUserProfileCtrl($state, edIdentityService, edNotifierService, edAuthService, edUserService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.username = edIdentityService.currentUser.username;\n\t\tvm.fname = edIdentityService.currentUser.firstName;\n\t\tvm.lname = edIdentityService.currentUser.lastName;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedUserService.setSelectedUser(edIdentityService.currentUser);\n\t\t}\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.username,\n\t\t\t\tpassword: vm.password,\n\t\t\t\tfirstName: vm.fname,\n\t\t\t\tlastName: vm.lname\n\t\t\t};\n\n\t\t\tif (vm.password && vm.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactResourceService', edArtifactResourceService);\n\n\tedArtifactResourceService.$inject = ['$resource'];\n\n\tfunction edArtifactResourceService($resource) {\n\t\tvar artifactResource = $resource('/api/artifacts/:id', {\n\t\t\t_id: '@id'\n\t\t});\n\n\t\treturn artifactResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactService', edArtifactService);\n\n\tedArtifactService.$inject = ['edCachedArtifactResourceService'];\n\n\tfunction edArtifactService(edCachedArtifactResourceService) {\n\t\tvar service = {\n\t\t\tgetAllArtifacts: getAllArtifacts\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all artifacts from the database (or memory)\n\t\t *\n\t\t * @return {Array} artifacts\n\t\t */\n\t\tfunction getAllArtifacts() {\n\t\t\treturn edCachedArtifactResourceService.query();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedArtifactResourceService', edCachedArtifactResourceService);\n\n\tedCachedArtifactResourceService.$inject = ['edArtifactResourceService'];\n\n\tfunction edCachedArtifactResourceService(edArtifactResourceService) {\n\t\tvar artifacts;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!artifacts) {\n\t\t\t\tartifacts = edArtifactResourceService.query();\n\t\t\t}\n\n\t\t\treturn artifacts;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edIdentityService', edIdentityService);\n\n\tedIdentityService.$inject = ['$window', 'edUserResourceService'];\n\n\tfunction edIdentityService($window, edUserResourceService) {\n\t\tvar currentUser;\n\t\tif (!!$window.bootstrappedUserObject) {\n\t\t\tcurrentUser = new edUserResourceService();\n\t\t\tangular.extend(currentUser, $window.bootstrappedUserObject);\n\t\t}\n\t\tvar service = {\n\t\t\tcurrentUser: currentUser,\n\t\t\tisAuthenticated: isAuthenticated,\n\t\t\tisAuthorized: isAuthorized\n\t\t};\n\t\treturn service;\n\n\t\tfunction isAuthenticated() {\n\t\t\treturn !!this.currentUser;\n\t\t}\n\n\t\tfunction isAuthorized(role) {\n\t\t\treturn !!this.currentUser && this.currentUser.roles.indexOf(role) > -1;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').value('edToastr', toastr);\n\n\tangular.module('app').factory('edNotifierService', edNotifierService);\n\n\tedNotifierService.$inject = ['edToastr'];\n\n\tfunction edNotifierService(edToastr) {\n\t\tvar service = {\n\t\t\tnotify: notify,\n\t\t\tinfo: info,\n\t\t\terror: error\n\t\t};\n\n\t\tedToastr.options = {\n\t\t\t'showDuration': '300',\n\t\t\t'hideDuration': '300'\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction notify(msg) {\n\t\t\tedToastr.success(msg);\n\t\t}\n\n\t\tfunction info(msg) {\n\t\t\tedToastr.info(msg);\n\t\t}\n\n\t\tfunction error(msg) {\n\t\t\tedToastr.error(msg);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edSidebarService', edSidebarService);\n\n\tedSidebarService.$inject = ['$rootScope'];\n\n\tfunction edSidebarService($rootScope) {\n\t\tvar sidebarLocked = false;\n\t\tvar service = {\n\t\t\tsetLockSidebar: setLockSidebar,\n\t\t\tgetLockSidebar: getLockSidebar,\n\t\t\topenTodayPanel: openTodayPanel\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction setLockSidebar(lock) {\n\t\t\tsidebarLocked = lock;\n\t\t\t$rootScope.$broadcast('sidebarLockedChange', sidebarLocked);\n\t\t\treturn sidebarLocked;\n\t\t}\n\n\t\tfunction getLockSidebar() {\n\t\t\treturn sidebarLocked;\n\t\t}\n\n\t\tfunction openTodayPanel(open) {\n\t\t\t$rootScope.$broadcast('openTodayPanel', open);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edArtifact', edArtifact);\n\n\tfunction edArtifact() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/artifact',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tfunction ctrlFunc() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edFooter', edFooter);\n\n\tfunction edFooter() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/footer',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService', 'edAuthService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edIdentityService, edAuthService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signout = signout;\n\n\t\tfunction signout() {\n\t\t\tedAuthService.logoutUser().then(function () {\n\t\t\t\tvm.username = '';\n\t\t\t\tvm.password = '';\n\t\t\t\tedNotifierService.notify('You have successfully signed out');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edHeader', edHeader);\n\n\tfunction edHeader() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/header',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService'];\n\n\tfunction ctrlFunc(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexTopbarCtrl', edIndexTopbarCtrl);\n\n\tfunction edIndexTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSidebarLeft', edSidebarLeft);\n\n\tfunction edSidebarLeft() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/sidebar-left',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['$scope', 'edSidebarService', 'edIdentityService'];\n\n\tfunction ctrlFunc($scope, edSidebarService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.sidebarOpen = false;\n\t\tvm.sidebarLocked = edSidebarService.getLockSidebar();\n\t\tvm.toggleSidebar = toggleSidebar;\n\t\tvm.closeSidebar = closeSidebar;\n\t\tvm.scrollSidebarTop = scrollSidebarTop;\n\n\t\tactivate();\n\n\t\t// If the sidebar is locked open, make sure it is open\n\t\tfunction activate() {\n\t\t\tif (vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = true;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, toggle it\n\t\tfunction toggleSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = !vm.sidebarOpen;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, close it\n\t\tfunction closeSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// Watch for the sidebar locked change event\n\t\tvar deregister = $scope.$on('sidebarLockedChange', function (event, sidebarLocked) {\n\t\t\tvm.sidebarLocked = sidebarLocked;\n\t\t\tvm.sidebarOpen = vm.sidebarLocked ? true : false;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction scrollSidebarTop() {\n\t\t\t$('.nano').nanoScroller({scroll: 'top'});\n\t\t}\n\n\t\t// Use this to trigger the highlighter directive\n\t\tvar deregisterSelectedEventChange = $scope.$on('selectedEventChange', function (event, selectedEvent) {\n\t\t\tif (selectedEvent) {\n\t\t\t\tvm.selectedEvent = angular.copy(selectedEvent._id);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEventChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edTodayPanel', edTodayPanel);\n\n\tfunction edTodayPanel() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/today-panel',\n\t\t\treplace: true,\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['$scope', 'edEmployeeService', 'edEventService', 'edIdentityService', 'moment', '_'];\n\n\tfunction ctrlFunc($scope, edEmployeeService, edEventService, edIdentityService, moment, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.panelOpen = false;\n\t\tvm.dayOfMonth = moment().date();\n\t\tvm.monthOfYear = moment().format('MMM');\n\t\tvm.birthdays = [];\n\t\tvm.events = [];\n\t\tvm.togglePanel = togglePanel;\n\n\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByBirthday);\n\t\tedEventService.getAllEvents().$promise.then(filterEventsByDate);\n\n\t\tfunction togglePanel() {\n\t\t\tvm.panelOpen = !vm.panelOpen;\n\t\t}\n\n\t\tvar today = moment();\n\n\t\t/**\n\t\t * Filters employees with the specified birthday\n\t\t *\n\t\t * @param {Array} employees, employees to search for a birthday\n\t\t * @param {Object} date, birthday\n\t\t * @return {Array} employees\n\t\t */\n\t\tfunction filterEmployeesByBirthday(employees) {\n\t\t\tvm.birthdays = _.filter(employees, function (employee) {\n\t\t\t\tif (employee.birthdate && moment(employee.birthdate).date() === moment().date() && moment(employee.birthdate).month() === moment().month()) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Filters events for the specified date (excluding year)\n\t\t *\n\t\t * @param {Array} events, events to search for one that starts on the specified date\n\t\t * @param {Object} date, event date\n\t\t * @return {Array} events\n\t\t */\n\t\tfunction filterEventsByDate(events) {\n\t\t\tvm.events =  _.filter(events, function (event) {\n\t\t\t\tif (moment(event.start).isSame(today, 'day')) {\n\t\t\t\t\treturn event;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvar deregister = $scope.$on('openTodayPanel', function (event, open) {\n\t\t\tvm.panelOpen = open;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').filter('edPhoneNumberFilter', edPhoneNumberFilter);\n\n\tfunction edPhoneNumberFilter() {\n\t\treturn function (tel) {\n\t\t\tif (!tel) { return ''; }\n\n\t\t\t// strip all non-digits\n\t\t\tvar value = tel.toString().trim().replace(/\\D/g, '');\n\n\t\t\tvar country, city, number;\n\n\t\t\tswitch (value.length) {\n\t\t\t\tcase 10: // +1PPP####### -> C (PPP) ###-####\n\t\t\t\t\tcountry = 1;\n\t\t\t\t\tcity = value.slice(0, 3);\n\t\t\t\t\tnumber = value.slice(3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 11: // +CPPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value[0];\n\t\t\t\t\tcity = value.slice(1, 4);\n\t\t\t\t\tnumber = value.slice(4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 12: // +CCCPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value.slice(0, 3);\n\t\t\t\t\tcity = value.slice(3, 5);\n\t\t\t\t\tnumber = value.slice(5);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn tel;\n\t\t\t}\n\n\t\t\tif (country === 1) {\n\t\t\t\tcountry = '';\n\t\t\t}\n\n\t\t\tnumber = number.slice(0, 3) + '-' + number.slice(3);\n\n\t\t\treturn (country + ' (' + city + ') ' + number).trim();\n\t\t};\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedDeskResourceService', edCachedDeskResourceService);\n\n\tedCachedDeskResourceService.$inject = ['edDeskResourceService'];\n\n\tfunction edCachedDeskResourceService(edDeskResourceService) {\n\t\tvar desks;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!desks) {\n\t\t\t\tdesks = edDeskResourceService.query();\n\t\t\t}\n\n\t\t\treturn desks;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedEmployeeResourceService', edCachedEmployeeResourceService);\n\n\tedCachedEmployeeResourceService.$inject = ['edEmployeeResourceService', '_'];\n\n\tfunction edCachedEmployeeResourceService(edEmployeeResourceService, _) {\n\t\tvar employees;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!employees || cacheBust) {\n\t\t\t\temployees = edEmployeeResourceService.query({cacheKill: new Date().getTime()}, function (ees) {\n\t\t\t\t\tangular.forEach(ees, function (employee) {\n\t\t\t\t\t\t// Create a manager property for each employee\n\t\t\t\t\t\tvar manager = _.find(ees, {'eid': employee.mid});\n\t\t\t\t\t\tif (manager) {\n\t\t\t\t\t\t\tif (manager.nickname) {\n\t\t\t\t\t\t\t\temployee.manager = manager.nickname + ' ' + manager.lastName;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\temployee.manager = manager.firstName + ' ' + manager.lastName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Create a displayName property for each employee\n\t\t\t\t\t\tif (employee.nickname) {\n\t\t\t\t\t\t\temployee.displayName = employee.nickname + ' ' + employee.lastName;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temployee.displayName = employee.firstName + ' ' + employee.lastName;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Create a fullName property for each employee\n\t\t\t\t\t\temployee.fullName = employee.firstName + ' ' + employee.lastName;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn employees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskResourceService', edDeskResourceService);\n\n\tedDeskResourceService.$inject = ['$resource'];\n\n\tfunction edDeskResourceService($resource) {\n\t\tvar deskResource = $resource('/api/desks/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn deskResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskService', edDeskService);\n\n\tedDeskService.$inject = ['edCachedDeskResourceService'];\n\n\tfunction edDeskService(edCachedDeskResourceService) {\n\t\tvar service = {\n\t\t\tgetAllDesks: getAllDesks\n\t\t};\n\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all desks from the database (or memory)\n\t\t *\n\t\t * @return {Array} desks\n\t\t */\n\t\tfunction getAllDesks() {\n\t\t\treturn edCachedDeskResourceService.query();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeResourceService', edEmployeeResourceService);\n\n\tedEmployeeResourceService.$inject = ['$resource'];\n\n\tfunction edEmployeeResourceService($resource) {\n\t\tvar employeeResource = $resource('/api/employees/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn employeeResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeService', edEmployeeService);\n\n\tedEmployeeService.$inject = ['$rootScope', 'edCachedEmployeeResourceService', 'edNotifierService', '_'];\n\n\tfunction edEmployeeService($rootScope, edCachedEmployeeResourceService, edNotifierService, _) {\n\t\tvar selectedEmployees = [];\n\t\tvar selectedEmployeeAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedEmployee = null;\n\t\tvar selectMultipleEmployees = false;\n\t\tvar displayEmployeeInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllEmployees: getAllEmployees,\n\t\t\tgetSelectedEmployees: getSelectedEmployees,\n\t\t\taddAllFilteredEmployees: addAllFilteredEmployees,\n\t\t\tupdateSelectedEmployees: updateSelectedEmployees,\n\t\t\tremoveAllSelectedEmployees: removeAllSelectedEmployees,\n\t\t\tsetSelectMultipleEmployees: setSelectMultipleEmployees,\n\t\t\tgetSelectMultipleEmployees: getSelectMultipleEmployees,\n\t\t\tupdateMappedEmployee: updateMappedEmployee,\n\t\t\tupdateMappedEmployeeById: updateMappedEmployeeById,\n\t\t\tgetMappedEmployee: getMappedEmployee,\n\t\t\tsetDisplayEmployeeInfoType: setDisplayEmployeeInfoType,\n\t\t\tgetDisplayEmployeeInfoType: getDisplayEmployeeInfoType,\n\t\t\tgetSelectedEmployeeAdded: getSelectedEmployeeAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all employees from the database (or memory)\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} employees\n\t\t */\n\t\tfunction getAllEmployees(cacheBust) {\n\t\t\treturn edCachedEmployeeResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected employees\n\t\t *\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction getSelectedEmployees() {\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered employees to the selected employees\n\t\t * Removes any unfiltered employees from selected employees\n\t\t *\n\t\t * @param {Array} employees to add to selected\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction addAllFilteredEmployees(employees) {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(employees, function (employee) {\n\t\t\t\temployee.selected = true;\n\t\t\t});\n\t\t\tselectedEmployees = employees;\n\t\t\tselectedEmployeeAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee\n\t\t *\n\t\t * @param {Object} employee to map / un-map\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction updateMappedEmployee(employee) {\n\t\t\t// Un-map the currently mapped employee\n\t\t\tif (!employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\tmappedEmployee = null;\n\t\t\t\t// Un-map the currently mapped employee and (possibly) map the new one\n\t\t\t} else if (employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\t// Map the new employee\n\t\t\t\tif (mappedEmployee._id !== employee._id) {\n\t\t\t\t\temployee.mapped = true;\n\t\t\t\t\tmappedEmployee = employee;\n\t\t\t\t\t// Just remove the currently mapped employee\n\t\t\t\t} else {\n\t\t\t\t\tmappedEmployee = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested employee (none currently mapped)\n\t\t\t} else if (employee && !mappedEmployee) {\n\t\t\t\temployee.mapped = true;\n\t\t\t\tmappedEmployee = employee;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedEmployeeChange', mappedEmployee);\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee using an employee ID\n\t\t */\n\t\tfunction updateMappedEmployeeById(id) {\n\t\t\tgetAllEmployees().$promise.then(function (employees) {\n\t\t\t\tvar employee = _.filter(employees, function (employee) {\n\t\t\t\t\treturn employee.eid === parseInt(id);\n\t\t\t\t});\n\t\t\t\tif (employee.length > 0) {\n\t\t\t\t\tupdateMappedEmployee(employee[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('I\\'m not sure who you\\'re looking for.');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped employee\n\t\t *\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction getMappedEmployee() {\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayEmployeeInfoType(infoType) {\n\t\t\tdisplayEmployeeInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayEmployeeInfoTypeChange', displayEmployeeInfoType);\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayEmployeeInfoType() {\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected employees\n\t\t *\n\t\t * @param {Object} employee the employee to add / remove from selected employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction updateSelectedEmployees(employee) {\n\t\t\t// Allowed to have multiple employees selected\n\t\t\tif (selectMultipleEmployees) {\n\t\t\t\t// This employee is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\tselectedEmployees.unshift(employee);\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees.splice(selectedEmployees.indexOf(employee), 1);\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple employees selected\n\t\t\t} else {\n\t\t\t\t// This employee is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\t// set all selected employee's selected property to false\n\t\t\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this employee's selected property to true\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\t// replace the array of selected employees with just this one employee\n\t\t\t\t\tselectedEmployees = [employee];\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees = [];\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected employees\n\t\t */\n\t\tfunction removeAllSelectedEmployees() {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedEmployees = [];\n\t\t\tselectedEmployeeAdded = false;\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected employee was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected employees added\n\t\t */\n\t\tfunction getSelectedEmployeeAdded() {\n\t\t\treturn selectedEmployeeAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the employee profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on employee profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the employee profile page number\n\t\t *\n\t\t * @return {Number} employee profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one employee at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction setSelectMultipleEmployees(selectMultiple) {\n\t\t\tselectMultipleEmployees = selectMultiple;\n\t\t\t// If there are multiple selected employees, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedEmployees.length > 1) {\n\t\t\t\tvar lastSelectedEmployee = selectedEmployees.shift();\n\t\t\t\t// This employee will be reselected in updateSelectedEmployees\n\t\t\t\tlastSelectedEmployee.selected = false;\n\t\t\t\tselectedEmployees = updateSelectedEmployees(lastSelectedEmployee);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleEmployeesChange', selectMultipleEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple employees to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple employee\n\t\t */\n\t\tfunction getSelectMultipleEmployees() {\n\t\t\treturn selectMultipleEmployees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeCtrl', edEmployeeCtrl);\n\n\tedEmployeeCtrl.$inject = ['edSidebarService'];\n\n\tfunction edEmployeeCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesTopbarCtrl', edCommitteesTopbarCtrl);\n\n\tedCommitteesTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edCommitteesTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","/**\n * highlighter directive\n * highlights dom element on model change\n */\n(function () {\n\t'use strict';\n\tangular.module('app').directive('edHighlighter', edHighlighter);\n\n\tedHighlighter.$inject = ['$timeout'];\n\n\tfunction edHighlighter($timeout) {\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, element, attrs) {\n\t\t\tscope.$watch(attrs.edHighlighter, function (nv, ov) {\n\t\t\t\tif (nv !== ov) {\n\t\t\t\t\telement.addClass('activate');\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\telement.removeClass('activate');\n\t\t\t\t\t}, attrs.duration);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edNanoscroller', edNanoscroller);\n\n\tedNanoscroller.$inject = ['$timeout'];\n\n\tfunction edNanoscroller($timeout) {\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\ttemplate: '',\n\t\t\treplace: false,\n\t\t\tscope: {},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\t// Do this right away so scrollbars don't display in IE and Firefox\n\t\t\tangular.element('.nano').nanoScroller({preventPageScrolling: true});\n\t\t\t// Do this again after a few seconds to wait for the model to populate\n\t\t\t$timeout(function () {\n\t\t\t\tangular.element('.nano').nanoScroller();\n\t\t\t}, 3000);\n\t\t\t// Do this again after a few seconds to wait for the model to populate\n\t\t\t$timeout(function () {\n\t\t\t\tangular.element('.nano').nanoScroller();\n\t\t\t}, 10000);\n\t\t}\n\t}\n})();","/**\n * svg directive\n * replace img tag with its svg content\n * adaptation from https://stackoverflow.com/questions/11978995/how-to-change-color-of-svg-image-using-css-jquery-svg-image-replacement\n */\n(function () {\n\t'use strict';\n\tangular.module('app').directive('svg', svg);\n\n\tsvg.$inject = ['$http'];\n\n\tfunction svg($http) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\tscope: {\n\t\t\t\tpath: '@',\n\t\t\t\tfilename: '@'\n\t\t\t},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, element, attrs) {\n\t\t\tvar imgId = attrs.id;\n\t\t\tvar imgClass = attrs.class;\n\t\t\tvar imgUrl = scope.path + scope.filename + '.svg';\n\n\t\t\t// Load svg content\n\t\t\t$http.get(imgUrl).success(function (data, status) {\n\t\t\t\tvar svg = angular.element(data);\n\t\t\t\tfor (var i = svg.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (svg[i].constructor.name === 'SVGSVGElement') {\n\t\t\t\t\t\tsvg = angular.element(svg[i]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgId !== 'undefined') {\n\t\t\t\t\tsvg.attr('id', imgId);\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgClass !== 'undefined') {\n\t\t\t\t\tsvg.attr('class', imgClass);\n\t\t\t\t}\n\t\t\t\t// Remove invalid attributes\n\t\t\t\tsvg = svg.removeAttr('xmlns:a');\n\t\t\t\telement.replaceWith(svg);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesCtrl', edCommitteesCtrl);\n\n\tedCommitteesCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edCommitteesCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.committee = null;\n\t\tvm.committeeMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the committee based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.committee = {\n\t\t\t\tname: currentState.split('.')[1]\n\t\t\t};\n\n\t\t\tif (vm.committee.name) {\n\t\t\t\tvm.committee.text = vm.committee.name;\n\n\t\t\t\tif (vm.committee.name === 'fun-games') {\n\t\t\t\t\tvm.committee.text = 'Fun & Games';\n\t\t\t\t}\n\n\t\t\t\tif (vm.committee.name === 'diversity') {\n\t\t\t\t\tvm.committee.text = 'Cultural Diversity & Community Outreach';\n\t\t\t\t}\n\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByCommittee);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByCommittee(employees) {\n\t\t\tvm.committeeMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.committees && _.indexOf(employee.committees, vm.committee.name) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edEventInfo', edEventInfo);\n\n\tedEventInfo.$inject = ['$timeout', '$sce', 'edEventService', 'moment'];\n\n\tfunction edEventInfo($timeout, $sce, edEventService, moment) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/events/components/event-info',\n\t\t\tscope: {},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.selectedEvent = edEventService.updateSelectedEvent(null);\n\n\t\t\tvar deregister = scope.$on('selectedEventChange', function (event, selectedEvent) {\n\t\t\t\tif (scope.selectedEvent) {\n\t\t\t\t\tel.addClass('slide-out').removeClass('slide-in');\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\tel.removeClass('slide-out').addClass('slide-in');\n\t\t\t\t\t\tpopulateEventInfo(selectedEvent);\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tangular.element('.nano').nanoScroller();\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}, 200);\n\t\t\t\t} else {\n\t\t\t\t\tel.addClass('slide-in');\n\t\t\t\t\tpopulateEventInfo(selectedEvent);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\n\t\t\tfunction populateEventInfo(event) {\n\t\t\t\tscope.selectedEvent = angular.copy(event);\n\t\t\t\tif (!scope.selectedEvent.allDay) {\n\t\t\t\t\tscope.selectedEvent.start = moment(event.start).format('h:mm a');\n\t\t\t\t\tscope.selectedEvent.end = moment(event.end).format('h:mm a');\n\t\t\t\t}\n\t\t\t\tscope.selectedEvent.day = moment(event.start).format('MMMM Do, YYYY');\n\t\t\t\tscope.selectedEvent.details = $sce.trustAsHtml(event.details);\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEventSidebarCtrl', edEventSidebarCtrl);\n\n\tedEventSidebarCtrl.$inject = ['$scope', 'edEventService', 'edIdentityService'];\n\n\tfunction edEventSidebarCtrl($scope, edEventService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.selectedEvent = edEventService.getSelectedEvent();\n\t\tvm.identity = edIdentityService;\n\n\t\tvar deregisterSelectedEventChange = $scope.$on('selectedEventChange', function (event, selectedEvent) {\n\t\t\tvm.selectedEvent = angular.copy(selectedEvent);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEventChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEventTopbarCtrl', edEventTopbarCtrl);\n\n\tedEventTopbarCtrl.$inject = [];\n\n\tfunction edEventTopbarCtrl() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEventCtrl', edEventCtrl);\n\n\tedEventCtrl.$inject = ['edSidebarService', 'edEventService', '_'];\n\n\tfunction edEventCtrl(edSidebarService, edEventService, _) {\n\t\tvar vm = this;\n\t\tvm.selectEvent = selectEvent;\n\t\tvm.events = [];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEventService.getAllEvents().$promise.then(loadEvents);\n\n\t\t\t/* config object */\n\t\t\tvm.uiConfig = {\n\t\t\t\tcalendar: {\n\t\t\t\t\teditable: false,\n\t\t\t\t\theight: 650,\n\t\t\t\t\ttimezone: 'local',\n\t\t\t\t\theader: {\n\t\t\t\t\t\tleft: 'prev,next today',\n\t\t\t\t\t\tcenter: 'title',\n\t\t\t\t\t\tright: 'month,agendaWeek,agendaDay'\n\t\t\t\t\t},\n\t\t\t\t\teventClick: selectEvent\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvm.eventSources = [vm.events];\n\t\t}\n\n\t\tfunction loadEvents(events) {\n\t\t\t_.forEach(events, function (event) {\n\t\t\t\tvm.events.push(event);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEvent(event) {\n\t\t\tedEventService.updateSelectedEvent(event);\n\t\t\t$('.fc-event.selected').removeClass('selected');\n\t\t\t$(this).addClass('selected');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edDesk', edDesk);\n\n\tedDesk.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edEmployeeService', '_'];\n\n\tfunction edDesk($stateParams, $document, $timeout, $compile, edEmployeeService, _) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedEmployee = edEmployeeService.getMappedEmployee();\n\n\t\t\t// If coming from the profile page via a link in the employee card\n\t\t\tif ($stateParams.seat === attrs.seat && scope.mappedEmployee) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\t\tif (mappedEmployee && mappedEmployee.seat === attrs.seat) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edNotifierService', 'edIdentityService', 'edPrinterService', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edNotifierService, edIdentityService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.mappedEmployee = null;\n\t\tvm.identity = edIdentityService;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapEmployee(seat, location) {\n\t\t\t// Don't map employee if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedEmployeeArray = _.filter(vm.employees, function (employee) {\n\t\t\t\t\treturn employee.seat === seat && employee.location === location;\n\t\t\t\t});\n\n\t\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know who sits there.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tvar selectedEmployee = edEmployeeService.updateSelectedEmployees(edEmployeeService.getMappedEmployee())[0];\n\t\t\t$state.go('employees.profile.employee', {'employee': selectedEmployee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edEmployeeCard', edEmployeeCard);\n\n\tedEmployeeCard.$inject = ['$timeout', '$state', 'edEmployeeService'];\n\n\tfunction edEmployeeCard($timeout, $state, edEmployeeService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/employee-card',\n\t\t\tscope: {\n\t\t\t\temployee: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\t// Some people have a different username for lync than their liazon email address\n\t\t\tif (scope.employee.lync) {\n\t\t\t\tvm.twEmail = scope.employee.lync + '@towerswatson.com';\n\t\t\t} else {\n\t\t\t\tvm.twEmail = scope.employee.email.split('@')[0] + '@towerswatson.com';\n\t\t\t}\n\n\t\t\tvm.deselectEmployee = function (employee) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edIdentityService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.editEmployee = editEmployee;\n\n\t\tfunction mapEmployee(employee) {\n\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t}\n\n\t\tfunction editEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t$state.go('admin.update-employee');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeSelectorCtrl', edEmployeeSelectorCtrl);\n\n\tedEmployeeSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edEmployeeService', 'edNotifierService', 'edPrinterService', 'edRoomService'];\n\n\tfunction edEmployeeSelectorCtrl($scope, $state, $document, edEmployeeService, edNotifierService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.displayEmployeeInfoType = edEmployeeService.getDisplayEmployeeInfoType();\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edEmployeeService.getSelectMultipleEmployees();\n\t\tvm.filteredEmployees = edEmployeeService.getAllEmployees();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(employee) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (employee.location) {\n\t\t\t\t\treturn vm.locations.indexOf(employee.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(employee) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the employee is on a floor in BUF\n\t\t\t\t\tif (employee.floor && employee.location === 'buf') {\n\t\t\t\t\t\t// Include this employee if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(employee.floor) > -1;\n\t\t\t\t\t// Include this employee if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t// Include all filtered employees if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t// Include all filtered employees if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tif (vm.displayEmployeeInfoType === 'profile') {\n\t\t\t\tvm.selectedEmployees = edEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t// If the user is viewing an employee profile page other than the generic employee profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tvar currentState = $state.current.name;\n\t\t\t\tif (currentState !== 'employees.profile' && currentState.indexOf('employees.profile') === 0) {\n\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayEmployeeInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedEmployees = edEmployeeService.addAllFilteredEmployees(vm.filteredEmployees);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif (vm.team === 'Prestige Worldwide') {\n\t\t\t\tedNotifierService.info('Investors?  Possibly you!');\n\t\t\t}\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedEmployees = edEmployeeService.removeAllSelectedEmployees();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.employeeName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.department = '';\n\t\t\tvm.team = '';\n\t\t}\n\n\t\tvar deregisterEmployeesUpdated = $scope.$on('employeesUpdated', function (event, employees) {\n\t\t\tvm.employees = employees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployeesUpdated);\n\n\t\tvar deregisterSelectMultipleEmployeesChange = $scope.$on('selectMultipleEmployeesChange', function (event, allowSelectMultipleEmployees) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleEmployeesChange);\n\n\t\tvar deregisterDisplayEmployeeInfoTypeChange = $scope.$on('displayEmployeeInfoTypeChange', function (event, displayEmployeeInfoType) {\n\t\t\tvm.displayEmployeeInfoType = displayEmployeeInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayEmployeeInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeTopbarCtrl', edEmployeeTopbarCtrl);\n\n\tedEmployeeTopbarCtrl.$inject = ['$scope', 'edEmployeeService'];\n\n\tfunction edEmployeeTopbarCtrl($scope, edEmployeeService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\n\t\tvar deregisterSelectedEmployeesChanged = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEmployeesChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedEventResourceService', edCachedEventResourceService);\n\n\tedCachedEventResourceService.$inject = ['edEventResourceService'];\n\n\tfunction edCachedEventResourceService(edEventResourceService) {\n\t\tvar events;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!events || cacheBust) {\n\t\t\t\tevents = edEventResourceService.query({cacheKill: new Date().getTime()});\n\t\t\t}\n\n\t\t\treturn events;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEventResourceService', edEventResourceService);\n\n\tedEventResourceService.$inject = ['$resource'];\n\n\tfunction edEventResourceService($resource) {\n\t\tvar eventResource = $resource('/api/events/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn eventResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEventService', edEventService);\n\n\tedEventService.$inject = ['$rootScope', 'edCachedEventResourceService', '_'];\n\n\tfunction edEventService($rootScope, edCachedEventResourceService, _) {\n\t\tvar selectedEvent = null;\n\t\tvar service = {\n\t\t\tgetAllEvents: getAllEvents,\n\t\t\tgetSelectedEvent: getSelectedEvent,\n\t\t\tupdateSelectedEvent: updateSelectedEvent\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all events from the database (or memory)\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} events\n\t\t */\n\t\tfunction getAllEvents(cacheBust) {\n\t\t\treturn edCachedEventResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected event\n\t\t *\n\t\t */\n\t\tfunction getSelectedEvent() {\n\t\t\treturn selectedEvent;\n\t\t}\n\n\t\t/**\n\t\t * Updates the selected event\n\t\t *\n\t\t * @param {Object} event selected event\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction updateSelectedEvent(event) {\n\t\t\tif (event) {\n\t\t\t\t// Find the matching event from the database to use as selectedEvent\n\t\t\t\tselectedEvent = _.find(getAllEvents(), {_id: event._id});\n\t\t\t\t// Use the date objects from the calendar\n\t\t\t\tselectedEvent.start = angular.extend({}, event.start);\n\t\t\t\tif (event.end) {\n\t\t\t\t\tselectedEvent.end = angular.extend({}, event.end);\n\t\t\t\t}\n\t\t\t\tselectedEvent.className = event.className.toString();\n\t\t\t} else {\n\t\t\t\tselectedEvent = null;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectedEventChange', selectedEvent);\n\t\t\treturn selectedEvent;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsTopbarCtrl', edGuildsTopbarCtrl);\n\n\tedGuildsTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edGuildsTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpCtrl', edHelpCtrl);\n\n\tedHelpCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinterCard', edPrinterCard);\n\n\tedPrinterCard.$inject = ['$timeout', '$state', 'edPrinterService'];\n\n\tfunction edPrinterCard($timeout, $state, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer-card',\n\t\t\tscope: {\n\t\t\t\tprinter: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectPrinter = function (printer) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService'];\n\n\tfunction ctrlFunc($state, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\n\t\tfunction mapPrinter(printer) {\n\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterSelectorCtrl', edPrinterSelectorCtrl);\n\n\tedPrinterSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edPrinterService', 'edEmployeeService', 'edRoomService'];\n\n\tfunction edPrinterSelectorCtrl($scope, $state, $document, edPrinterService, edEmployeeService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.displayPrinterInfoType = edPrinterService.getDisplayPrinterInfoType();\n\t\tvm.selectPrinter = selectPrinter;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edPrinterService.getSelectMultiplePrinters();\n\t\tvm.filteredEmployees = edPrinterService.getAllPrinters();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(printer) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (printer.location) {\n\t\t\t\t\treturn vm.locations.indexOf(printer.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(printer) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the printer is on a floor in BUF\n\t\t\t\t\tif (printer.floor && printer.location === 'buf') {\n\t\t\t\t\t\t// Include this printer if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(printer.floor) > -1;\n\t\t\t\t\t\t// Include this printer if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered printer if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered printer if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinter(printer) {\n\t\t\tif (vm.displayPrinterInfoType === 'profile') {\n\t\t\t\tvm.selectedPrinters = edPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t// If the user is viewing a printer profile page other than the generic printer profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayPrinterInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedPrinters = edPrinterService.addAllFilteredPrinters(vm.filteredPrinters);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedPrinters = edPrinterService.removeAllSelectedPrinters();\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.printerName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.brand = '';\n\t\t\tvm.color = '';\n\t\t}\n\n\t\tvar deregisterSelectMultiplePrintersChange = $scope.$on('selectMultiplePrintersChange', function (event, allowSelectMultiplePrinters) {\n\t\t\tvm.allowSelectAll = allowSelectMultiplePrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultiplePrintersChange);\n\n\t\tvar deregisterDisplayPrinterInfoTypeChange = $scope.$on('displayPrinterInfoTypeChange', function (event, displayPrinterInfoType) {\n\t\t\tvm.displayPrinterInfoType = displayPrinterInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayPrinterInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterTopbarCtrl', edPrinterTopbarCtrl);\n\n\tedPrinterTopbarCtrl.$inject = ['$scope', 'edPrinterService'];\n\n\tfunction edPrinterTopbarCtrl($scope, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\n\t\tvar deregisterSelectedPrintersChanged = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedPrintersChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinter', edPrinter);\n\n\tedPrinter.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edPrinterService'];\n\n\tfunction edPrinter($stateParams, $document, $timeout, $compile, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\torientation: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\t\t// If coming from the profile page via a link in the printer card\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedPrinter) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\t\tif (mappedPrinter && mappedPrinter.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService', 'edNotifierService', 'edEmployeeService', 'edRoomService', '_'];\n\n\tfunction ctrlFunc($state, edPrinterService, edNotifierService, edEmployeeService, edRoomService, _) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.mappedPrinter = null;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapPrinter(name) {\n\t\t\t// Don't map printer if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedPrinterArray = _.filter(vm.printers, function (printer) {\n\t\t\t\t\treturn printer.name === name;\n\t\t\t\t});\n\n\t\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this printer.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\tvar selectedPrinter = edPrinterService.updateSelectedPrinters(edPrinterService.getMappedPrinter())[0];\n\t\t\t$state.go('printers.profile.name', {'printer': selectedPrinter.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedPrinterResourceService', edCachedPrinterResourceService);\n\n\tedCachedPrinterResourceService.$inject = ['edPrinterResourceService'];\n\n\tfunction edCachedPrinterResourceService(edPrinterResourceService) {\n\t\tvar printers;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!printers) {\n\t\t\t\tprinters = edPrinterResourceService.query();\n\t\t\t}\n\n\t\t\treturn printers;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterResourceService', edPrinterResourceService);\n\n\tedPrinterResourceService.$inject = ['$resource'];\n\n\tfunction edPrinterResourceService($resource) {\n\t\tvar printerResource = $resource('/api/printers/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn printerResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterService', edPrinterService);\n\n\tedPrinterService.$inject = ['$rootScope', 'edCachedPrinterResourceService'];\n\n\tfunction edPrinterService($rootScope, edCachedPrinterResourceService) {\n\t\tvar selectedPrinters = [];\n\t\tvar selectedPrinterAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedPrinter = null;\n\t\tvar selectMultiplePrinters = false;\n\t\tvar displayPrinterInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllPrinters: getAllPrinters,\n\t\t\tgetSelectedPrinters: getSelectedPrinters,\n\t\t\taddAllFilteredPrinters: addAllFilteredPrinters,\n\t\t\tupdateSelectedPrinters: updateSelectedPrinters,\n\t\t\tremoveAllSelectedPrinters: removeAllSelectedPrinters,\n\t\t\tsetSelectMultiplePrinters: setSelectMultiplePrinters,\n\t\t\tgetSelectMultiplePrinters: getSelectMultiplePrinters,\n\t\t\tupdateMappedPrinter: updateMappedPrinter,\n\t\t\tgetMappedPrinter: getMappedPrinter,\n\t\t\tsetDisplayPrinterInfoType: setDisplayPrinterInfoType,\n\t\t\tgetDisplayPrinterInfoType: getDisplayPrinterInfoType,\n\t\t\tgetSelectedPrinterAdded: getSelectedPrinterAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all printers from the database (or memory)\n\t\t *\n\t\t * @return {Array} printers\n\t\t */\n\t\tfunction getAllPrinters() {\n\t\t\treturn edCachedPrinterResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected printers\n\t\t *\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction getSelectedPrinters() {\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered printers to the selected printers\n\t\t * Removes any unfiltered printers from selected printers\n\t\t *\n\t\t * @param {Array} printers to add to selected\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction addAllFilteredPrinters(printers) {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(printers, function (printer) {\n\t\t\t\tprinter.selected = true;\n\t\t\t});\n\t\t\tselectedPrinters = printers;\n\t\t\tselectedPrinterAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped printer\n\t\t *\n\t\t * @param {Object} printer to map / un-map\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction updateMappedPrinter(printer) {\n\t\t\t// Un-map the currently mapped printer\n\t\t\tif (!printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\tmappedPrinter = null;\n\t\t\t\t// Un-map the currently mapped printer and (possibly) map the new one\n\t\t\t} else if (printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\t// Map the new printer\n\t\t\t\tif (mappedPrinter._id !== printer._id) {\n\t\t\t\t\tprinter.mapped = true;\n\t\t\t\t\tmappedPrinter = printer;\n\t\t\t\t\t// Just remove the currently mapped printer\n\t\t\t\t} else {\n\t\t\t\t\tmappedPrinter = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested printer (none currently mapped)\n\t\t\t} else if (printer && !mappedPrinter) {\n\t\t\t\tprinter.mapped = true;\n\t\t\t\tmappedPrinter = printer;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedPrinterChange', mappedPrinter);\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped printer\n\t\t *\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction getMappedPrinter() {\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayPrinterInfoType(infoType) {\n\t\t\tdisplayPrinterInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayPrinterInfoTypeChange', displayPrinterInfoType);\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayPrinterInfoType() {\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected printers\n\t\t *\n\t\t * @param {Object} printer the printer to add / remove from selected printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction updateSelectedPrinters(printer) {\n\t\t\t// Allowed to have multiple printers selected\n\t\t\tif (selectMultiplePrinters) {\n\t\t\t\t// This printer is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\tselectedPrinters.unshift(printer);\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters.splice(selectedPrinters.indexOf(printer), 1);\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple printers selected\n\t\t\t} else {\n\t\t\t\t// This printer is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\t// set all selected printer's selected property to false\n\t\t\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this printer's selected property to true\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\t// replace the array of selected printers with just this one printer\n\t\t\t\t\tselectedPrinters = [printer];\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters = [];\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected printers\n\t\t */\n\t\tfunction removeAllSelectedPrinters() {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedPrinters = [];\n\t\t\tselectedPrinterAdded = false;\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected printer was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected printers added\n\t\t */\n\t\tfunction getSelectedPrinterAdded() {\n\t\t\treturn selectedPrinterAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the printer profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on printer profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the printer profile page number\n\t\t *\n\t\t * @return {Number} printer profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one printer at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction setSelectMultiplePrinters(selectMultiple) {\n\t\t\tselectMultiplePrinters = selectMultiple;\n\t\t\t// If there are multiple selected printers, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedPrinters.length > 1) {\n\t\t\t\tvar lastSelectedPrinter = selectedPrinters.shift();\n\t\t\t\t// This printer will be reselected in updateSelectedPrinters\n\t\t\t\tlastSelectedPrinter.selected = false;\n\t\t\t\tselectedPrinters = updateSelectedPrinters(lastSelectedPrinter);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultiplePrintersChange', selectMultiplePrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple printers to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple printer\n\t\t */\n\t\tfunction getSelectMultiplePrinters() {\n\t\t\treturn selectMultiplePrinters;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterCtrl', edPrinterCtrl);\n\n\tedPrinterCtrl.$inject = ['edSidebarService'];\n\n\tfunction edPrinterCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edFloorCtrl', edFloorCtrl);\n\n\tedFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$stateParams', '$scope', 'edRoomService', 'edPrinterService', 'edArtifactService', 'edSidebarService', '_'];\n\n\tfunction edFloorCtrl(edEmployeeService, edDeskService, $state, $stateParams, $scope, edRoomService, edPrinterService, edArtifactService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\t\tvm.showSeatNumbers = false;\n\t\tvm.desks = null;\n\t\tvm.rooms = null;\n\t\tvm.printers = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks and rooms on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t\tedRoomService.getAllRooms().$promise.then(roomFilter);\n\t\t\tedPrinterService.getAllPrinters().$promise.then(printerFilter);\n\t\t\tedArtifactService.getAllArtifacts().$promise.then(artifactFilter);\n\n\t\t\tmapEmployee();\n\t\t\tmapRoom();\n\t\t\tmapPrinter();\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tif (mappedEmployee) {\n\t\t\t\tif (mappedEmployee.floor && (mappedEmployee.location !== vm.location || mappedEmployee.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('employees.map.' + mappedEmployee.location + '-' + mappedEmployee.floor, {'seat': mappedEmployee.seat});\n\t\t\t\t} else if (!mappedEmployee.floor) {\n\t\t\t\t\t$state.go('employees.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tvar deregisterPrinter = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tif (mappedPrinter) {\n\t\t\t\tif (mappedPrinter.floor && (mappedPrinter.location !== vm.location || mappedPrinter.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('printers.map.' + mappedPrinter.location + '-' + mappedPrinter.floor, {'name': mappedPrinter.name});\n\t\t\t\t} else if (!mappedPrinter.floor) {\n\t\t\t\t\t$state.go('printers.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterPrinter);\n\n\t\tvar deregisterRoom = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tif (mappedRoom) {\n\t\t\t\tif (mappedRoom.floor && (mappedRoom.location !== vm.location || mappedRoom.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('rooms.map.' + mappedRoom.location + '-' + mappedRoom.floor, {'name': mappedRoom.name});\n\t\t\t\t} else if (!mappedRoom.floor) {\n\t\t\t\t\t$state.go('rooms.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterRoom);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction roomFilter(rooms) {\n\t\t\tvm.rooms = _.filter(rooms, function (room) {\n\t\t\t\treturn room.floor === vm.floor && room.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction printerFilter(printers) {\n\t\t\tvm.printers = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.floor === vm.floor && printer.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction artifactFilter(artifacts) {\n\t\t\tvm.artifacts = _.filter(artifacts, function (artifact) {\n\t\t\t\treturn artifact.floor === vm.floor && artifact.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction mapEmployee() {\n\t\t\t// If there is a mapped employee and we know their floor\n\t\t\tif (vm.mappedEmployee && vm.mappedEmployee.floor) {\n\t\t\t\t// If the mapped employee is on a different floor, un-map them\n\t\t\t\tif (vm.floor !== vm.mappedEmployee.floor) {\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(null);\n\t\t\t\t}\n\t\t\t\t// Map an employee based on a seat number\n\t\t\t} else if ($stateParams.seat) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(mapEmployeeBySeat);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapEmployeeBySeat(employees) {\n\t\t\tvar mappedEmployeeArray = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.seat === $stateParams.seat;\n\t\t\t});\n\n\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\tvm.location = vm.mappedEmployee.location;\n\t\t\t\tvm.floor = vm.mappedEmployee.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoom() {\n\t\t\t// If there is a mapped printer and we know its floor\n\t\t\tif (vm.mappedPrinter && vm.mappedPrinter.floor) {\n\t\t\t\t// If the mapped printer is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedPrinter.floor) {\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(null);\n\t\t\t\t}\n\t\t\t\t// Map an printer based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedPrinterService.getAllPrinters().$promise.then(mapPrinterByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoomByName(rooms) {\n\t\t\tvar mappedRoomArray = _.filter(rooms, function (room) {\n\t\t\t\treturn room.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t\tvm.floor = vm.mappedRoom.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinter() {\n\t\t\t// If there is a mapped room and we know its floor\n\t\t\tif (vm.mappedRoom && vm.mappedRoom.floor) {\n\t\t\t\t// If the mapped room is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedRoom.floor) {\n\t\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(null);\n\t\t\t\t}\n\t\t\t\t// Map an room based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedRoomService.getAllRooms().$promise.then(mapRoomByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinterByName(printers) {\n\t\t\tvar mappedPrinterArray = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\tvm.floor = vm.mappedPrinter.floor;\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexCtrl', edIndexCtrl);\n\n\tedIndexCtrl.$inject = ['edSidebarService', 'edIdentityService'];\n\n\tfunction edIndexCtrl(edSidebarService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedSidebarService.openTodayPanel(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoomCard', edRoomCard);\n\n\tedRoomCard.$inject = ['$timeout', '$state', 'edRoomService'];\n\n\tfunction edRoomCard($timeout, $state, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room-card',\n\t\t\tscope: {\n\t\t\t\troom: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectRoom = function (room) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\n\t\tfunction mapRoom(room) {\n\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomSelectorCtrl', edRoomSelectorCtrl);\n\n\tedRoomSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edRoomService', 'edEmployeeService', 'edPrinterService'];\n\n\tfunction edRoomSelectorCtrl($scope, $state, $document, edRoomService, edEmployeeService, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.displayRoomInfoType = edRoomService.getDisplayRoomInfoType();\n\t\tvm.selectRoom = selectRoom;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edRoomService.getSelectMultipleRooms();\n\t\tvm.filteredEmployees = edRoomService.getAllRooms();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(room) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (room.location) {\n\t\t\t\t\treturn vm.locations.indexOf(room.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(room) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the room is on a floor in BUF\n\t\t\t\t\tif (room.floor && room.location === 'buf') {\n\t\t\t\t\t\t// Include this room if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(room.floor) > -1;\n\t\t\t\t\t\t// Include this room if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered room if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered room if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoom(room) {\n\t\t\tif (vm.displayRoomInfoType === 'profile') {\n\t\t\t\tvm.selectedRooms = edRoomService.updateSelectedRooms(room);\n\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayRoomInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedRooms = edRoomService.addAllFilteredRooms(vm.filteredRooms);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t// If the user is viewing a room profile page other than the generic room profile page\n\t\t\t// go back to the generic room page\n\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedRooms = edRoomService.removeAllSelectedRooms();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.roomName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.type = '';\n\t\t}\n\n\t\tvar deregisterSelectMultipleRoomsChange = $scope.$on('selectMultipleRoomsChange', function (event, allowSelectMultipleRooms) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleRoomsChange);\n\n\t\tvar deregisterDisplayRoomInfoTypeChange = $scope.$on('displayRoomInfoTypeChange', function (event, displayRoomInfoType) {\n\t\t\tvm.displayRoomInfoType = displayRoomInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayRoomInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomTopbarCtrl', edRoomTopbarCtrl);\n\n\tedRoomTopbarCtrl.$inject = ['$scope', 'edRoomService'];\n\n\tfunction edRoomTopbarCtrl($scope, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\n\t\tvar deregisterSelectedRoomsChanged = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedRoomsChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoom', edRoom);\n\n\tedRoom.$inject = ['$stateParams', '$document', '$timeout', 'edRoomService'];\n\n\tfunction edRoom($stateParams, $document, $timeout, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tseat: '@',\n\t\t\t\tnumber: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedRoom = edRoomService.getMappedRoom();\n\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedRoom) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\t\tif (mappedRoom && mappedRoom.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService', 'edNotifierService', 'edEmployeeService', 'edPrinterService', '_'];\n\n\tfunction ctrlFunc($state, edRoomService, edNotifierService, edEmployeeService, edPrinterService, _) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.mappedRoom = null;\n\n\t\tfunction mapRoom(name) {\n\t\t\tvar mappedRoomArray = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.name === name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t} else {\n\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this room.');\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile(seat) {\n\t\t\tvar selectedRoom = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.seat === seat;\n\t\t\t});\n\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\tedRoomService.updateSelectedRooms(selectedRoom[0]);\n\t\t\t$state.go('rooms.profile.name', {'room': selectedRoom[0].name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomCtrl', edRoomCtrl);\n\n\tedRoomCtrl.$inject = ['edSidebarService'];\n\n\tfunction edRoomCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpTopbarCtrl', edHelpTopbarCtrl);\n\n\tedHelpTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edHelpTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsCtrl', edGuildsCtrl);\n\n\tedGuildsCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edGuildsCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.guild = null;\n\t\tvm.guildMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the guild based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.guild = currentState.split('.')[1];\n\n\t\t\tif (vm.guild) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByGuild);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByGuild(employees) {\n\t\t\tvm.guildMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.guilds && _.indexOf(employee.guilds, vm.guild) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedRoomResourceService', edCachedRoomResourceService);\n\n\tedCachedRoomResourceService.$inject = ['edRoomResourceService'];\n\n\tfunction edCachedRoomResourceService(edRoomResourceService) {\n\t\tvar rooms;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!rooms) {\n\t\t\t\trooms = edRoomResourceService.query();\n\t\t\t}\n\n\t\t\treturn rooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomResourceService', edRoomResourceService);\n\n\tedRoomResourceService.$inject = ['$resource'];\n\n\tfunction edRoomResourceService($resource) {\n\t\tvar roomResource = $resource('/api/rooms/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn roomResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomService', edRoomService);\n\n\tedRoomService.$inject = ['$rootScope', 'edCachedRoomResourceService'];\n\n\tfunction edRoomService($rootScope, edCachedRoomResourceService) {\n\t\tvar selectedRooms = [];\n\t\tvar selectedRoomAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedRoom = null;\n\t\tvar selectMultipleRooms = false;\n\t\tvar displayRoomInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllRooms: getAllRooms,\n\t\t\tgetSelectedRooms: getSelectedRooms,\n\t\t\taddAllFilteredRooms: addAllFilteredRooms,\n\t\t\tupdateSelectedRooms: updateSelectedRooms,\n\t\t\tremoveAllSelectedRooms: removeAllSelectedRooms,\n\t\t\tsetSelectMultipleRooms: setSelectMultipleRooms,\n\t\t\tgetSelectMultipleRooms: getSelectMultipleRooms,\n\t\t\tupdateMappedRoom: updateMappedRoom,\n\t\t\tgetMappedRoom: getMappedRoom,\n\t\t\tsetDisplayRoomInfoType: setDisplayRoomInfoType,\n\t\t\tgetDisplayRoomInfoType: getDisplayRoomInfoType,\n\t\t\tgetSelectedRoomAdded: getSelectedRoomAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all pooms from the database (or memory)\n\t\t *\n\t\t * @return {Array} rooms\n\t\t */\n\t\tfunction getAllRooms() {\n\t\t\treturn edCachedRoomResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected rooms\n\t\t *\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction getSelectedRooms() {\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered rooms to the selected rooms\n\t\t * Removes any unfiltered rooms from selected rooms\n\t\t *\n\t\t * @param {Array} rooms to add to selected\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction addAllFilteredRooms(rooms) {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(rooms, function (room) {\n\t\t\t\troom.selected = true;\n\t\t\t});\n\t\t\tselectedRooms = rooms;\n\t\t\tselectedRoomAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped room\n\t\t *\n\t\t * @param {Object} room to map / un-map\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction updateMappedRoom(room) {\n\t\t\t// Un-map the currently mapped room\n\t\t\tif (!room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\tmappedRoom = null;\n\t\t\t\t// Un-map the currently mapped room and (possibly) map the new one\n\t\t\t} else if (room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\t// Map the new room\n\t\t\t\tif (mappedRoom._id !== room._id) {\n\t\t\t\t\troom.mapped = true;\n\t\t\t\t\tmappedRoom = room;\n\t\t\t\t\t// Just remove the currently mapped room\n\t\t\t\t} else {\n\t\t\t\t\tmappedRoom = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested room (none currently mapped)\n\t\t\t} else if (room && !mappedRoom) {\n\t\t\t\troom.mapped = true;\n\t\t\t\tmappedRoom = room;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedRoomChange', mappedRoom);\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped room\n\t\t *\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction getMappedRoom() {\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayRoomInfoType(infoType) {\n\t\t\tdisplayRoomInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayRoomInfoTypeChange', displayRoomInfoType);\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayRoomInfoType() {\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected rooms\n\t\t *\n\t\t * @param {Object} room the room to add / remove from selected rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction updateSelectedRooms(room) {\n\t\t\t// Allowed to have multiple rooms selected\n\t\t\tif (selectMultipleRooms) {\n\t\t\t\t// This room is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\tselectedRooms.unshift(room);\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms.splice(selectedRooms.indexOf(room), 1);\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple rooms selected\n\t\t\t} else {\n\t\t\t\t// This room is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\t// set all selected room's selected property to false\n\t\t\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this room's selected property to true\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\t// replace the array of selected rooms with just this one room\n\t\t\t\t\tselectedRooms = [room];\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms = [];\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected rooms\n\t\t */\n\t\tfunction removeAllSelectedRooms() {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedRooms = [];\n\t\t\tselectedRoomAdded = false;\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected room was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected rooms added\n\t\t */\n\t\tfunction getSelectedRoomAdded() {\n\t\t\treturn selectedRoomAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the room profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on room profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the room profile page number\n\t\t *\n\t\t * @return {Number} room profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one room at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction setSelectMultipleRooms(selectMultiple) {\n\t\t\tselectMultipleRooms = selectMultiple;\n\t\t\t// If there are multiple selected rooms, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedRooms.length > 1) {\n\t\t\t\tvar lastSelectedRoom = selectedRooms.shift();\n\t\t\t\t// This room will be reselected in updateSelectedRooms\n\t\t\t\tlastSelectedRoom.selected = false;\n\t\t\t\tselectedRooms = updateSelectedRooms(lastSelectedRoom);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleRoomsChange', selectMultipleRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Gets wether or not we should allow multiple rooms to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple room\n\t\t */\n\t\tfunction getSelectMultipleRooms() {\n\t\t\treturn selectMultipleRooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateEventCtrl', edCreateEventCtrl);\n\n\tedCreateEventCtrl.$inject = ['$scope', 'edNotifierService', 'edSidebarService', 'edEventAdminService', 'edIdentityService', '_'];\n\n\tfunction edCreateEventCtrl($scope, edNotifierService, edSidebarService, edEventAdminService, edIdentityService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.createEvent = createEvent;\n\t\tvm.newEvent = {};\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tresetForm();\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction resetForm() {\n\t\t\tvm.newEvent = {\n\t\t\t\ttitle: '',\n\t\t\t\tstart: '',\n\t\t\t\tend: '',\n\t\t\t\tdetails: '',\n\t\t\t\tclassName: '',\n\t\t\t\turl: '',\n\t\t\t\tlink: '',\n\t\t\t\tallDay: ''\n\t\t\t};\n\t\t}\n\n\t\tfunction createEvent() {\n\t\t\tvar newEventData = {\n\t\t\t\ttitle: vm.newEvent.title,\n\t\t\t\tstart: vm.newEvent.start,\n\t\t\t\tend: vm.newEvent.end,\n\t\t\t\tdetails: vm.newEvent.details,\n\t\t\t\tclassName: [],\n\t\t\t\turl: vm.newEvent.url,\n\t\t\t\tlink: vm.newEvent.link,\n\t\t\t\tallDay: vm.newEvent.allDay\n\t\t\t};\n\n\t\t\t// Add all the classes\n\t\t\tvar classNames = vm.newEvent.className.split(',');\n\t\t\t_.forEach(classNames, function (className) {\n\t\t\t\tnewEventData.className.push(className);\n\t\t\t});\n\n\t\t\tedEventAdminService.createEvent(newEventData).then(function () {\n\t\t\t\tedNotifierService.notify('New Event Added');\n\t\t\t\tresetForm();\n\t\t\t\t$scope.createEventForm.$setPristine();\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateEventCtrl', edUpdateEventCtrl);\n\n\tedUpdateEventCtrl.$inject = ['$state', 'edNotifierService', 'edEventService', 'edEventAdminService', 'edIdentityService', 'edSidebarService', '_'];\n\n\tfunction edUpdateEventCtrl($state, edNotifierService, edEventService, edEventAdminService, edIdentityService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.updateEvent = updateEvent;\n\t\tvm.deleteEvent = deleteEvent;\n\t\tvm.cancelUpdateEvent = cancelUpdateEvent;\n\t\tvm.selectedEvent = edEventService.getSelectedEvent();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tif (!vm.selectedEvent) {\n\t\t\t\tedNotifierService.info('Please select an event to update.');\n\t\t\t\t$state.go('events');\n\t\t\t}\n\t\t\t//vm.selectedEvent = angular.extend({}, vm.selEvent);\n\t\t}\n\n\t\tfunction updateEvent() {\n\t\t\t// Get the event data from the form\n\t\t\tvar newEventData = {\n\t\t\t\ttitle: vm.selectedEvent.title,\n\t\t\t\tstart: vm.selectedEvent.start,\n\t\t\t\tend: vm.selectedEvent.end,\n\t\t\t\tdetails: vm.selectedEvent.details,\n\t\t\t\tclassName: [],\n\t\t\t\turl: vm.selectedEvent.url,\n\t\t\t\tlink: vm.selectedEvent.link,\n\t\t\t\tallDay: vm.selectedEvent.allDay\n\t\t\t};\n\n\t\t\t// Add all the classes\n\t\t\tvar classNames = vm.selectedEvent.className.split(',');\n\t\t\t_.forEach(classNames, function (className) {\n\t\t\t\tnewEventData.className.push(className.trim());\n\t\t\t});\n\n\t\t\tedEventAdminService.updateEvent(newEventData).then(function (event) {\n\t\t\t\tedNotifierService.notify('Event information updated!');\n\t\t\t\t$state.go('events');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Marks event as deleted\n\t\t */\n\t\tfunction deleteEvent() {\n\t\t\tedEventAdminService.updateEvent({deleted: true}).then(function (event) {\n\t\t\t\tedNotifierService.notify('Event deleted!');\n\t\t\t\t$state.go('events');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\tfunction cancelUpdateEvent() {\n\t\t\t$state.go('events');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edOrgChartCtrl', edOrgChartCtrl);\n\n\tedOrgChartCtrl.$inject = ['$scope', '$state', '$stateParams', 'edEmployeeService', 'edSidebarService', '_'];\n\n\tfunction edOrgChartCtrl($scope, $state, $stateParams, edEmployeeService, edSidebarService, _) {\n\t\tvar employees = edEmployeeService.getAllEmployees();\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\tvm.manager = null;\n\t\tvm.directReports = [];\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(getEmployeeById);\n\t\t\t} else if (vm.selectedEmployee) {\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getEmployeeById(employees) {\n\t\t\tvar employee = _.findWhere(employees, {'eid': parseInt($stateParams.employee)});\n\t\t\tif (employee) {\n\t\t\t\tif (employee !== vm.selectedEmployee) {\n\t\t\t\t\tselectEmployee(employee);\n\t\t\t\t}\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getManager() {\n\t\t\tvm.manager = _.findWhere(employees, {'eid': vm.selectedEmployee.mid});\n\t\t}\n\n\t\tfunction getDirectReports() {\n\t\t\tvm.directReports = _.sortBy(_.filter(employees, {'mid': vm.selectedEmployee.eid}), 'lastName');\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(employee)[0];\n\t\t}\n\n\t\tfunction profileEmployee() {\n\t\t\t$state.go('employees.profile.employee', {'employee': vm.selectedEmployee.eid});\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\n\t\t\tif (vm.selectedEmployee) {\n\t\t\t\t$state.go('employees.org-chart', {'employee': vm.selectedEmployee.eid});\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeProfileCtrl', edEmployeeProfileCtrl);\n\n\tedEmployeeProfileCtrl.$inject = ['$scope', '$document', 'edEmployeeService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edEmployeeProfileCtrl($scope, $document, edEmployeeService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edEmployeeService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(true);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\n\t\t\tif ($stateParams.employee || $stateParams.team || $stateParams.department || $stateParams.title || $stateParams.firstname || $stateParams.lastname) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(function (employees) {\n\t\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t\tselectEmployeeById(employees);\n\t\t\t\t\t} else if ($stateParams.team) {\n\t\t\t\t\t\tselectEmployeeByTeam(employees);\n\t\t\t\t\t} else if ($stateParams.department) {\n\t\t\t\t\t\tselectEmployeeByDepartment(employees);\n\t\t\t\t\t} else if ($stateParams.title) {\n\t\t\t\t\t\tselectEmployeeByTitle(employees);\n\t\t\t\t\t} else if ($stateParams.firstname || $stateParams.lastname) {\n\t\t\t\t\t\tselectEmployeeByName(employees);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployeeById(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t// Split eid query on comma\n\t\t\t\t\tvar employeeids = $stateParams.employee.split(',');\n\t\t\t\t\tangular.forEach(employeeids, function (eid) {\n\t\t\t\t\t\t// If the employee's id is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('eid') && employee.eid === parseInt(eid)) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTeam(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.team) {\n\t\t\t\t\t// Split teams query on comma\n\t\t\t\t\tvar teams = $stateParams.team.split(',');\n\t\t\t\t\tangular.forEach(teams, function (team) {\n\t\t\t\t\t\t// If the employee's team is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('team') && employee.team.toLowerCase() === team.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByDepartment(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.department) {\n\t\t\t\t\t// Split departments query on comma\n\t\t\t\t\tvar departments = $stateParams.department.split(',');\n\t\t\t\t\tangular.forEach(departments, function (department) {\n\t\t\t\t\t\t// If the employee's department is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('department') && employee.department.toLowerCase() === department.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTitle(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.title) {\n\t\t\t\t\t// Split titles query on pipe\n\t\t\t\t\tvar titles = $stateParams.title.split('|');\n\t\t\t\t\tangular.forEach(titles, function (title) {\n\t\t\t\t\t\t// If the employee's title is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('title') && employee.title.toLowerCase() === title.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByName(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.firstname) {\n\t\t\t\t\t// Split first name query on comma\n\t\t\t\t\tvar firstnames = $stateParams.firstname.split(',');\n\t\t\t\t\t// Loop over each first name\n\t\t\t\t\tangular.forEach(firstnames, function (firstname) {\n\t\t\t\t\t\t// If the employee's first name (or nickname) is part of the query check the last names\n\t\t\t\t\t\tif (employee.firstName.toLowerCase() === firstname.toLowerCase() ||\n\t\t\t\t\t\t\t(employee.hasOwnProperty('nickname') && employee.nickname.toLowerCase() === firstname.toLowerCase())) {\n\t\t\t\t\t\t\t// If last names are on the query string\n\t\t\t\t\t\t\tif ($stateParams.lastname) {\n\t\t\t\t\t\t\t\t// Split last name query on comma\n\t\t\t\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// No last name query so only worry about the first name\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// This employee's first name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// No first name query so only worry about the last name\n\t\t\t\t} else if ($stateParams.lastname) {\n\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t// This employee's last name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedEmployeeService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t\t// If we added to selected employees, go to first page and scroll to the top\n\t\t\tif (edEmployeeService.getSelectedEmployeeAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeMapCtrl', edEmployeeMapCtrl);\n\n\tedEmployeeMapCtrl.$inject = ['$state', '$stateParams', '$scope', 'edEmployeeService', 'edSidebarService'];\n\n\tfunction edEmployeeMapCtrl($state, $stateParams, $scope, edEmployeeService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.unknownLocationEmployee = false;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.updateMappedEmployeeById($stateParams.employee);\n\t\t\t} else if (vm.mappedEmployee) {\n\t\t\t\tlocateEmployee(vm.mappedEmployee);\n\t\t\t}\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tlocateEmployee(mappedEmployee);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateEmployee(employee) {\n\t\t\tif (employee) {\n\t\t\t\tif (employee.seat) {\n\t\t\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t\t\t} else {\n\t\t\t\t\tvm.unknownLocationEmployee = true;\n\t\t\t\t\tvm.mappedEmployee = employee;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvm.unknownLocationEmployee = false;\n\t\t\t\tvm.mappedEmployee = null;\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpOrgChartCtrl', edHelpOrgChartCtrl);\n\n\tedHelpOrgChartCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpOrgChartCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpLocationCtrl', edHelpLocationCtrl);\n\n\tedHelpLocationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpLocationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpNavigationCtrl', edHelpNavigationCtrl);\n\n\tedHelpNavigationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpNavigationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomMapCtrl', edRoomMapCtrl);\n\n\tedRoomMapCtrl.$inject = ['$state', '$scope', 'edRoomService', 'edSidebarService'];\n\n\tfunction edRoomMapCtrl($state, $scope, edRoomService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\tlocateRoom(vm.mappedRoom);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tlocateRoom(mappedRoom);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateRoom(room) {\n\t\t\tif (room) {\n\t\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomProfileCtrl', edRoomProfileCtrl);\n\n\tedRoomProfileCtrl.$inject = ['$scope', '$document', 'edRoomService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edRoomProfileCtrl($scope, $document, edRoomService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edRoomService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('profile');\n\t\t\tedRoomService.setSelectMultipleRooms(true);\n\t\t\tedRoomService.updateMappedRoom(null);\n\n\t\t\tif ($stateParams.room || $stateParams.roomtype) {\n\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByName);\n\t\t\t\t} else if ($stateParams.roomtype) {\n\t\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoomByName(rooms) {\n\t\t\tvar selectedRooms = _.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar rooms = $stateParams.room.split(',');\n\t\t\t\t\t// Loop over each room name\n\t\t\t\t\tangular.forEach(rooms, function (name) {\n\t\t\t\t\t\t// If the room's name is part of the query select it\n\t\t\t\t\t\tif (room.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectRoomByType(rooms) {\n\t\t\tvar selectedRooms = _.sortBy(_.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.roomtype) {\n\t\t\t\t\t// Split roomtype query on comma\n\t\t\t\t\tvar roomtypes = $stateParams.roomtype.split(',');\n\t\t\t\t\t// Loop over each roomtype\n\t\t\t\t\tangular.forEach(roomtypes, function (type) {\n\t\t\t\t\t\t// If the room's type is part of the query select it\n\t\t\t\t\t\tif (room.type.toLocaleLowerCase() === type.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t}), 'name').reverse();\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedRoomService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t\t// If we added to selected rooms, go to first page and scroll to the top\n\t\t\tif (edRoomService.getSelectedRoomAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterProfileCtrl', edPrinterProfileCtrl);\n\n\tedPrinterProfileCtrl.$inject = ['$scope', '$document', 'edPrinterService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edPrinterProfileCtrl($scope, $document, edPrinterService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edPrinterService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('profile');\n\t\t\tedPrinterService.setSelectMultiplePrinters(true);\n\t\t\tedPrinterService.updateMappedPrinter(null);\n\n\t\t\tif ($stateParams.printer || $stateParams.printerbrand) {\n\t\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByName);\n\t\t\t\t} else if ($stateParams.printerbrand) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByBrand);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinterByName(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar printers = $stateParams.printer.split(',');\n\t\t\t\t\t// Loop over each printer name\n\t\t\t\t\tangular.forEach(printers, function (name) {\n\t\t\t\t\t\t// If the printer's name is part of the query select it\n\t\t\t\t\t\tif (printer.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectPrinterByBrand(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printerbrand) {\n\t\t\t\t\t// Split printerbrand query on comma\n\t\t\t\t\tvar printerbrands = $stateParams.printerbrand.split(',');\n\t\t\t\t\t// Loop over each printerbrand\n\t\t\t\t\tangular.forEach(printerbrands, function (brand) {\n\t\t\t\t\t\t// If the printer's branc is part of the query select it\n\t\t\t\t\t\tif (printer.brand.toLocaleLowerCase() === brand.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedPrinterService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t\t// If we added to selected printers, go to first page and scroll to the top\n\t\t\tif (edPrinterService.getSelectedPrinterAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterMapCtrl', edPrinterMapCtrl);\n\n\tedPrinterMapCtrl.$inject = ['$state', '$scope', 'edPrinterService', 'edSidebarService'];\n\n\tfunction edPrinterMapCtrl($state, $scope, edPrinterService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tlocatePrinter(vm.mappedPrinter);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tlocatePrinter(mappedPrinter);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locatePrinter(printer) {\n\t\t\tif (printer) {\n\t\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpProfileCtrl', edHelpProfileCtrl);\n\n\tedHelpProfileCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpProfileCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n"],"sourceRoot":"/source/"}