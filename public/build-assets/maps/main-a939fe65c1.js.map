{"version":3,"sources":["public/app/app.module.js","public/app/app.routes.js","public/app/app.run.js","public/app/admin/services/auth.service.js","public/app/admin/services/cached-user-resource.service.js","public/app/admin/services/employee-admin.service.js","public/app/admin/services/user-resource.service.js","public/app/admin/services/user.service.js","public/app/committees/components/committees-topbar.controller.js","public/app/admin/components/admin-topbar.controller.js","public/app/admin/components/seat-picker-desk.directive.js","public/app/admin/components/seat-picker-topbar.controller.js","public/app/admin/components/user-selector.controller.js","public/app/committees/views/committees.controller.js","public/app/guilds/components/guilds-topbar.controller.js","public/app/help/views/help.controller.js","public/app/rooms/components/room-card.directive.js","public/app/rooms/components/room-selector.controller.js","public/app/rooms/components/room-topbar.controller.js","public/app/rooms/components/room.directive.js","public/app/guilds/views/guilds.controller.js","public/app/help/components/help-topbar.controller.js","public/app/rooms/views/room.controller.js","public/app/admin/views/create-employee.controller.js","public/app/admin/views/create-user.controller.js","public/app/admin/views/login.controller.js","public/app/admin/views/seat-picker-floor.controller.js","public/app/admin/views/seat-picker.controller.js","public/app/admin/views/update-employee.controller.js","public/app/admin/views/update-user.controller.js","public/app/admin/views/user-list.controller.js","public/app/admin/views/user-profile.controller.js","public/app/printers/components/printer-card.directive.js","public/app/printers/components/printer-selector.controller.js","public/app/printers/components/printer-topbar.controller.js","public/app/printers/components/printer.directive.js","public/app/printers/services/cached-printer-resource.service.js","public/app/printers/services/printer-resource.service.js","public/app/printers/services/printer.service.js","public/app/printers/views/printer.controller.js","public/app/employees/services/cached-desk-resource.service.js","public/app/employees/services/cached-employee-resource.service.js","public/app/employees/services/desk-resource.service.js","public/app/employees/services/desk.service.js","public/app/employees/services/employee-resource.service.js","public/app/employees/services/employee.service.js","public/app/employees/components/desk.directive.js","public/app/employees/components/employee-card.directive.js","public/app/employees/components/employee-selector.controller.js","public/app/employees/components/employee-topbar.controller.js","public/app/employees/views/employee.controller.js","public/app/rooms/services/cached-room-resource.service.js","public/app/rooms/services/room-resource.service.js","public/app/rooms/services/room.service.js","public/app/common/services/artifact-resource.service.js","public/app/common/services/artifact.service.js","public/app/common/services/cached-artifact-resource.service.js","public/app/common/services/identity.service.js","public/app/common/services/notifier.service.js","public/app/common/services/sidebar.service.js","public/app/common/components/artifact.directive.js","public/app/common/components/footer.directive.js","public/app/common/components/header.directive.js","public/app/common/components/index-topbar.controller.js","public/app/common/components/sidebar-left.directive.js","public/app/common/filters/custom-filters.js","public/app/common/utilities/nanoscroller.directive.js","public/app/common/utilities/svg.directive.js","public/app/help/views/navigation/help-navigation.controller.js","public/app/help/views/profile/help-profile.controller.js","public/app/rooms/views/map/room-map.controller.js","public/app/rooms/views/profile/room-profile.controller.js","public/app/help/views/location/help-location.controller.js","public/app/help/views/org-chart/help-org-chart.controller.js","public/app/printers/views/profile/printer-profile.controller.js","public/app/common/views/floor.controller.js","public/app/common/views/index.controller.js","public/app/printers/views/map/printer-map.controller.js","public/app/employees/views/map/employee-map.controller.js","public/app/employees/views/org-chart/org-chart.controller.js","public/app/employees/views/profile/employee-profile.controller.js"],"names":["angular","module","constant","window","_","configure","$stateProvider","$urlRouterProvider","$locationProvider","$compileProvider","routeRoleChecks","superAdmin","requireSuperAdmin","admin","requireAdmin","user","requireAuth","aHrefSanitizationWhitelist","html5Mode","otherwise","when","state","url","views","main","templateUrl","controller","controllerAs","topbar","sidebar","main@","sidebar@","topbar@","resolve","auth","edAuthService","authorizeCurrentUserForRoute","authorizeAuthenticatedUserForRoute","config","$inject","appRun","$rootScope","$state","$stateParams","$document","$on","event","toState","toParams","fromState","fromParams","error","go","body","scrollTop","documentElement","firstname","lastname","printer","printerbrand","room","roomtype","employee","team","department","run","$http","$q","edIdentityService","edUserResourceService","edUserService","authenticateUser","username","password","dfd","defer","post","then","response","data","success","extend","currentUser","promise","createUser","newUserData","newUser","$save","$broadcast","getAllUsers","reject","reason","updateCurrentUser","clone","copy","$update","updateUser","selectedUser","getSelectedUser","currentUserClone","_id","setSelectedUser","logoutUser","logout","undefined","role","isAuthorized","isAuthenticated","service","factory","edCachedUserResourceService","query","cacheBust","users","cacheKill","Date","getTime","edEmployeeAdminService","edEmployeeService","edEmployeeResourceService","Upload","updateEmployee","newEmployeeData","selectedEmployees","getSelectedEmployees","removeAllSelectedEmployees","getAllEmployees","createEmployee","newEmployee","uploadEmployeePhoto","employeePhoto","employeeData","upload","file","fileName","eid","name","split","pop","resp","console","log","status","evt","progressPercentage","parseInt","loaded","total","$resource","userResource","update","method","isArray","prototype","isAdmin","this","roles","indexOf","selected","edCommitteesTopbarCtrl","vm","identity","edAdminTopbarCtrl","edSeatPickerDesk","directive","restrict","replace","scope","location","floor","seat","orientation","classification","xpos","ypos","ctrlFunc","edNotifierService","assignSeat","notify","edSeatPickerTopbarCtrl","edUserSelectorCtrl","$scope","selectUser","deregisterUserUpdated","edCommitteesCtrl","edSidebarService","activate","setLockSidebar","currentState","current","committee","text","$promise","filterEmployeesByCommittee","employees","committeeMembers","sortBy","filter","committees","profileEmployee","edGuildsTopbarCtrl","edHelpCtrl","edRoomCard","$timeout","edRoomService","linkFunc","el","attrs","deselectRoom","parent","child","children","first","addClass","updateSelectedRooms","link","mapRoom","updateMappedRoom","edRoomSelectorCtrl","edPrinterService","filterLocations","locations","push","splice","locationFilter","length","nycOnly","filterFloors","floors","floorFilter","selectRoom","displayRoomInfoType","selectedRooms","updateMappedEmployee","updateMappedPrinter","selectAll","addAllFilteredRooms","filteredRooms","scrollTopAnimated","selectNone","removeAllSelectedRooms","clearFilter","roomName","6","7","8","buf","nyc","type","rooms","getAllRooms","getSelectedRooms","getDisplayRoomInfoType","allowSelectAll","getSelectMultipleRooms","filteredEmployees","deregisterSelectMultipleRoomsChange","allowSelectMultipleRooms","deregisterDisplayRoomInfoTypeChange","edRoomTopbarCtrl","deregisterSelectedRoomsChanged","edRoom","mappedRoom","getMappedRoom","scrollToElement","append","removeClass","find","remove","deregister","number","mappedRoomArray","viewProfile","selectedRoom","edGuildsCtrl","guild","filterEmployeesByGuild","guildMembers","guilds","edHelpTopbarCtrl","edRoomCtrl","edCreateEmployeeCtrl","edDeskService","resetForm","createManagerList","firstName","lastName","nickname","email","phone","ext","title","hasReports","mid","managers","forEach","include","image","updateSelectedEmployees","toLowerCase","createEmployeeForm","$setPristine","desks","getAllDesks","locationOptions","value","departments","employeesUpdatedEvent","edCreateUserCtrl","edLoginCtrl","signin","edSeatPickerFloorCtrl","checkForSelectedEmployee","locationAndFloor","locationName","deskFilter","desk","setSelectMultipleEmployees","setDisplayEmployeeInfoType","deregisterEmployee","edSeatPickerCtrl","setRemoteEmployee","selectedEmployee","edUpdateEmployeeCtrl","populateEmployee","filterManagers","filteredManagers","manager","imageFile","deleteEmployee","deletedEmployee","directReports","directReport","deleted","cancelUpdateEmployee","selectedEmployeesChangeEvent","edUpdateUserCtrl","populateUserInfo","selectedUserChangeEvent","edUserListCtrl","edUserProfileCtrl","fname","lname","edPrinterCard","deselectPrinter","updateSelectedPrinters","mapPrinter","edPrinterSelectorCtrl","selectPrinter","displayPrinterInfoType","selectedPrinters","addAllFilteredPrinters","filteredPrinters","removeAllSelectedPrinters","printerName","brand","color","printers","getAllPrinters","getSelectedPrinters","getDisplayPrinterInfoType","getSelectMultiplePrinters","deregisterSelectMultiplePrintersChange","allowSelectMultiplePrinters","deregisterDisplayPrinterInfoTypeChange","edPrinterTopbarCtrl","deregisterSelectedPrintersChanged","edPrinter","$compile","mappedPrinter","getMappedPrinter","markerLabel","$","leftPos","outerWidth","css","viewingProfile","mappedPrinterArray","selectedPrinter","edCachedPrinterResourceService","edPrinterResourceService","printerResource","prevSelected","selectedPrinterAdded","mapped","setDisplayPrinterInfoType","infoType","selectMultiplePrinters","unshift","getSelectedPrinterAdded","setProfilePageNumber","pageNumber","profilePageNumber","getProfilePageNumber","setSelectMultiplePrinters","selectMultiple","lastSelectedPrinter","shift","edPrinterCtrl","edCachedDeskResourceService","edDeskResourceService","edCachedEmployeeResourceService","ees","displayName","deskResource","employeeResource","addAllFilteredEmployees","selectedEmployeeAdded","mappedEmployee","updateMappedEmployeeById","id","getMappedEmployee","displayEmployeeInfoType","getDisplayEmployeeInfoType","selectMultipleEmployees","getSelectedEmployeeAdded","lastSelectedEmployee","getSelectMultipleEmployees","edDesk","mapEmployee","mappedEmployeeArray","edEmployeeCard","twEmail","lync","deselectEmployee","editEmployee","edEmployeeSelectorCtrl","selectEmployee","info","employeeName","deregisterEmployeesUpdated","deregisterSelectMultipleEmployeesChange","allowSelectMultipleEmployees","deregisterDisplayEmployeeInfoTypeChange","edEmployeeTopbarCtrl","deregisterSelectedEmployeesChanged","edEmployeeCtrl","edCachedRoomResourceService","edRoomResourceService","roomResource","selectedRoomAdded","setDisplayRoomInfoType","selectMultipleRooms","getSelectedRoomAdded","setSelectMultipleRooms","lastSelectedRoom","edArtifactResourceService","artifactResource","edArtifactService","edCachedArtifactResourceService","getAllArtifacts","artifacts","$window","bootstrappedUserObject","edToastr","msg","options","showDuration","hideDuration","toastr","lock","sidebarLocked","getLockSidebar","edArtifact","edFooter","signout","edHeader","edIndexTopbarCtrl","edSidebarLeft","sidebarOpen","toggleSidebar","closeSidebar","scrollSidebarTop","nanoScroller","scroll","edPhoneNumberFilter","tel","country","city","toString","trim","slice","edNanoscroller","element","preventPageScrolling","template","svg","imgId","imgClass","imgUrl","path","filename","get","i","constructor","attr","removeAttr","replaceWith","edHelpNavigationCtrl","edHelpProfileCtrl","edRoomMapCtrl","locateRoom","edRoomProfileCtrl","selectRoomByName","selectRoomByType","match","toLocaleLowerCase","roomtypes","reverse","changePage","newPageNumber","currentPage","edHelpLocationCtrl","edHelpOrgChartCtrl","edPrinterProfileCtrl","selectPrinterByName","selectPrinterByBrand","printerbrands","edFloorCtrl","roomFilter","printerFilter","artifactFilter","artifact","mapEmployeeBySeat","mapPrinterByName","mapRoomByName","deregisterPrinter","deregisterRoom","edIndexCtrl","edPrinterMapCtrl","locatePrinter","edEmployeeMapCtrl","locateEmployee","unknownLocationEmployee","edOrgChartCtrl","getEmployeeById","getManager","getDirectReports","findWhere","edEmployeeProfileCtrl","selectEmployeeById","selectEmployeeByTeam","selectEmployeeByDepartment","selectEmployeeByTitle","selectEmployeeByName","employeeids","hasOwnProperty","teams","titles","firstnames","lastnames"],"mappings":"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","file":"main-a939fe65c1.js","sourcesContent":["(function () {\n\t'use strict';\n\tangular.module('app', ['ngResource', 'ui.router', 'ngFileUpload', 'angular.filter', 'ngAnimate', 'duScroll', 'angular.vertilize', 'angularUtils.directives.dirPagination', 'focus-if']);\n\n\tangular.module('app').constant('_', window._);\n})();","(function () {\n\t'use strict';\n\tangular.module('app').config(configure);\n\n\tconfigure.$inject = ['$stateProvider', '$urlRouterProvider', '$locationProvider', '$compileProvider'];\n\n\tfunction configure($stateProvider, $urlRouterProvider, $locationProvider, $compileProvider) {\n\t\tvar routeRoleChecks = {\n\t\t\tsuperAdmin: requireSuperAdmin,\n\t\t\tadmin: requireAdmin,\n\t\t\tuser: requireAuth\n\t\t};\n\n\t\t// Allow some extra protocols\n\t\t$compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|chrome-extension|im|sip):/);\n\n\t\t$locationProvider.html5Mode(true);\n\n\t\t// for any unmatched url\n\t\t$urlRouterProvider.otherwise('/');\n\n\t\t$urlRouterProvider.when('/employees/', '/employees');\n\t\t$urlRouterProvider.when('/printers/', '/printers');\n\t\t$urlRouterProvider.when('/rooms/', '/rooms');\n\t\t$urlRouterProvider.when('/guilds/', '/guilds');\n\t\t$urlRouterProvider.when('/committees/', '/committees');\n\n\t\t$stateProvider\n\t\t\t.state('home', {\n\t\t\t\turl: '/',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/index',\n\t\t\t\t\t\tcontroller: 'edIndexCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/components/index-topbar',\n\t\t\t\t\t\tcontroller: 'edIndexTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees', {\n\t\t\t\turl: '/employees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/employee',\n\t\t\t\t\t\tcontroller: 'edEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-topbar',\n\t\t\t\t\t\tcontroller: 'edEmployeeTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile', {\n\t\t\t\turl: '/profile/?firstname&lastname',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.department', {\n\t\t\t\turl: 'department/:department',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.title', {\n\t\t\t\turl: 'title/:title',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.team', {\n\t\t\t\turl: 'team/:team',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.employee', {\n\t\t\t\turl: 'employee/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.org-chart', {\n\t\t\t\turl: '/org-chart/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/org-chart/org-chart',\n\t\t\t\t\t\tcontroller: 'edOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map', {\n\t\t\t\turl: '/map/?employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/map/employee-map',\n\t\t\t\t\t\tcontroller: 'edEmployeeMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-6', {\n\t\t\t\turl: 'buf-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-7', {\n\t\t\t\turl: 'buf-7/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-8', {\n\t\t\t\turl: 'buf-8/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.nyc-6', {\n\t\t\t\turl: 'nyc-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers', {\n\t\t\t\turl: '/printers',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/printer',\n\t\t\t\t\t\tcontroller: 'edPrinterCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-selector',\n\t\t\t\t\t\tcontroller: 'edPrinterSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-topbar',\n\t\t\t\t\t\tcontroller: 'edPrinterTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.name', {\n\t\t\t\turl: '/name/:printer',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.brand', {\n\t\t\t\turl: '/brand/:printerbrand',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/map/printer-map',\n\t\t\t\t\t\tcontroller: 'edPrinterMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms', {\n\t\t\t\turl: '/rooms',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/room',\n\t\t\t\t\t\tcontroller: 'edRoomCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-selector',\n\t\t\t\t\t\tcontroller: 'edRoomSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-topbar',\n\t\t\t\t\t\tcontroller: 'edRoomTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.name', {\n\t\t\t\turl: '/name/:room',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.type', {\n\t\t\t\turl: '/type/:roomtype',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/map/room-map',\n\t\t\t\t\t\tcontroller: 'edRoomMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin', {\n\t\t\t\turl: '/admin',\n\t\t\t\t'views': {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/login',\n\t\t\t\t\t\tcontroller: 'edLoginCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/admin-topbar',\n\t\t\t\t\t\tcontroller: 'edAdminTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.users', {\n\t\t\t\turl: '/users',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-list',\n\t\t\t\t\t\tcontroller: 'edUserListCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.user-profile', {\n\t\t\t\turl: '/user-profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-profile',\n\t\t\t\t\t\tcontroller: 'edUserProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.user\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-user', {\n\t\t\t\turl: '/create-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-user',\n\t\t\t\t\t\tcontroller: 'edCreateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-user', {\n\t\t\t\turl: '/update-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-user',\n\t\t\t\t\t\tcontroller: 'edUpdateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/user-selector',\n\t\t\t\t\t\tcontroller: 'edUserSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-employee', {\n\t\t\t\turl: '/create-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-employee',\n\t\t\t\t\t\tcontroller: 'edCreateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-employee', {\n\t\t\t\turl: '/update-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-employee',\n\t\t\t\t\t\tcontroller: 'edUpdateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker', {\n\t\t\t\turl: '/seat-picker',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker',\n\t\t\t\t\t\tcontroller: 'edSeatPickerCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-topbar',\n\t\t\t\t\t\tcontroller: 'edSeatPickerTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-6', {\n\t\t\t\turl: '/buf-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-7', {\n\t\t\t\turl: '/buf-7',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-8', {\n\t\t\t\turl: '/buf-8',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.nyc-6', {\n\t\t\t\turl: '/nyc-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds', {\n\t\t\t\turl: '/guilds',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/components/guilds-topbar',\n\t\t\t\t\t\tcontroller: 'edGuildsTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds.front-end', {\n\t\t\t\turl: '/front-end',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees', {\n\t\t\t\turl: '/committees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/components/committees-topbar',\n\t\t\t\t\t\tcontroller: 'edCommitteesTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.fun-games', {\n\t\t\t\turl: '/fun-games',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.diversity', {\n\t\t\t\turl: '/diversity',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.wellness', {\n\t\t\t\turl: '/wellness',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.beautification', {\n\t\t\t\turl: '/beautification',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help', {\n\t\t\t\turl: '/help',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/help',\n\t\t\t\t\t\tcontroller: 'edHelpCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/components/help-topbar',\n\t\t\t\t\t\tcontroller: 'edHelpTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.navigation', {\n\t\t\t\turl: '/navigation',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/navigation/help-navigation',\n\t\t\t\t\t\tcontroller: 'edHelpNavigationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/profile/help-profile',\n\t\t\t\t\t\tcontroller: 'edHelpProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.location', {\n\t\t\t\turl: '/location',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/location/help-location',\n\t\t\t\t\t\tcontroller: 'edHelpLocationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.org-chart', {\n\t\t\t\turl: '/org-chart',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/org-chart/help-org-chart',\n\t\t\t\t\t\tcontroller: 'edHelpOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trequireAdmin.$inject = ['edAuthService'];\n\n\tfunction requireAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('admin');\n\t}\n\n\trequireSuperAdmin.$inject = ['edAuthService'];\n\n\tfunction requireSuperAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('super-admin');\n\t}\n\n\trequireAuth.$inject = ['edAuthService'];\n\n\tfunction requireAuth(edAuthService) {\n\t\treturn edAuthService.authorizeAuthenticatedUserForRoute();\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').run(appRun);\n\n\tappRun.$inject = ['$rootScope', '$state', '$stateParams', '$document'];\n\n\tfunction appRun($rootScope, $state, $stateParams, $document) {\n\t\t$rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\n\t\t\tif (error === 'not authorized') {\n\t\t\t\t$state.go('admin');\n\t\t\t}\n\t\t});\n\n\t\t// Clear state params and scroll to the top on route changes\n\t\t$rootScope.$on('$stateChangeSuccess', function () {\n\t\t\t$document[0].body.scrollTop = $document[0].documentElement.scrollTop = 0;\n\t\t\t$stateParams.firstname = null;\n\t\t\t$stateParams.lastname = null;\n\t\t\t$stateParams.printer = null;\n\t\t\t$stateParams.printerbrand = null;\n\t\t\t$stateParams.room = null;\n\t\t\t$stateParams.roomtype = null;\n\t\t\t$stateParams.employee = null;\n\t\t\t$stateParams.team = null;\n\t\t\t$stateParams.department = null;\n\t\t});\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edAuthService', edAuthService);\n\n\tedAuthService.$inject = ['$http', '$rootScope', '$q', 'edIdentityService', 'edUserResourceService', 'edUserService'];\n\n\tfunction edAuthService($http, $rootScope, $q, edIdentityService, edUserResourceService, edUserService) {\n\t\tvar service = {\n\t\t\tauthenticateUser: authenticateUser,\n\t\t\tcreateUser: createUser,\n\t\t\tupdateUser: updateUser,\n\t\t\tupdateCurrentUser: updateCurrentUser,\n\t\t\tlogoutUser: logoutUser,\n\t\t\tauthorizeCurrentUserForRoute: authorizeCurrentUserForRoute,\n\t\t\tauthorizeAuthenticatedUserForRoute: authorizeAuthenticatedUserForRoute\n\t\t};\n\t\treturn service;\n\n\t\tfunction authenticateUser(username, password) {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/login', {\n\t\t\t\tusername: username,\n\t\t\t\tpassword: password\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\tvar user = new edUserResourceService();\n\t\t\t\t\tangular.extend(user, response.data.user);\n\t\t\t\t\tedIdentityService.currentUser = user;\n\t\t\t\t\tdfd.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.resolve(false);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction createUser(newUserData) {\n\t\t\tvar newUser = new edUserResourceService(newUserData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewUser.$save().then(function () {\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction updateCurrentUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar clone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tclone.$update().then(function () {\n\t\t\t\tedIdentityService.currentUser = clone;\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Updates user record in database\n\t\t * Uses the selected user for updating\n\t\t *\n\t\t * @param {Object} newUserData user data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedUser = edUserService.getSelectedUser();\n\t\t\tvar clone = angular.copy(selectedUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tvar currentUserClone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(currentUserClone, newUserData);\n\t\t\tif (edIdentityService.currentUser._id === clone._id) {\n\t\t\t\tedIdentityService.currentUser = currentUserClone;\n\t\t\t}\n\t\t\tclone.$update().then(function (user) {\n\t\t\t\tedUserService.setSelectedUser(null);\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve(user);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction logoutUser() {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/logout', {\n\t\t\t\tlogout: true\n\t\t\t}).then(function () {\n\t\t\t\tedIdentityService.currentUser = undefined;\n\t\t\t\tdfd.resolve();\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction authorizeCurrentUserForRoute(role) {\n\t\t\tif (edIdentityService.isAuthorized(role)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\n\t\tfunction authorizeAuthenticatedUserForRoute() {\n\t\t\tif (edIdentityService.isAuthenticated()) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedUserResourceService', edCachedUserResourceService);\n\n\tedCachedUserResourceService.$inject = ['edUserResourceService', '_'];\n\n\tfunction edCachedUserResourceService(edUserResourceService, _) {\n\t\tvar users;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!users || cacheBust) {\n\t\t\t\tusers = edUserResourceService.query({cacheKill: new Date().getTime()});\n\t\t\t}\n\n\t\t\treturn users;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeAdminService', edEmployeeAdminService);\n\n\tedEmployeeAdminService.$inject = ['$rootScope', '$q', 'edEmployeeService', 'edEmployeeResourceService', 'Upload'];\n\n\tfunction edEmployeeAdminService($rootScope, $q, edEmployeeService, edEmployeeResourceService, Upload) {\n\t\tvar service = {\n\t\t\tupdateEmployee: updateEmployee,\n\t\t\tcreateEmployee: createEmployee,\n\t\t\tuploadEmployeePhoto: uploadEmployeePhoto\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Updates employee record in database\n\t\t * Uses the selected employee for updating\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateEmployee(newEmployeeData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\t\tvar clone = angular.copy(selectedEmployees[0]);\n\t\t\tangular.extend(clone, newEmployeeData);\n\t\t\tclone.$update().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Create employee record in database\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to insert\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction createEmployee(newEmployeeData) {\n\t\t\tvar newEmployee = new edEmployeeResourceService(newEmployeeData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewEmployee.$save().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Upload employee photo to disk\n\t\t *\n\t\t * @param {Object} employeePhoto employee photo data\n\t\t * @param {Object} employeeData employee data\n\t\t */\n\t\tfunction uploadEmployeePhoto(employeePhoto, employeeData) {\n\t\t\tUpload.upload({\n\t\t\t\turl: 'api/employees/uploadphoto',\n\t\t\t\tdata: {\n\t\t\t\t\tfile: employeePhoto,\n\t\t\t\t\tfileName: employeeData.eid + '.' + employeePhoto.name.split('.').pop()\n\t\t\t\t}\n\t\t\t}).then(function (resp) {\n\t\t\t\tconsole.log('Success ' + resp.config.data.file.name + 'uploaded. Response: ' + resp.data);\n\t\t\t}, function (resp) {\n\t\t\t\tconsole.log('Error status: ' + resp.status);\n\t\t\t}, function (evt) {\n\t\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n\t\t\t\tconsole.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserResourceService', edUserResourceService);\n\n\tedUserResourceService.$inject = ['$resource'];\n\n\tfunction edUserResourceService($resource) {\n\t\tvar userResource = $resource('/api/users/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\tuserResource.prototype.isAdmin = function () {\n\t\t\treturn this.roles && this.roles.indexOf('admin') > -1;\n\t\t};\n\n\t\treturn userResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserService', edUserService);\n\n\tedUserService.$inject = ['$rootScope', 'edCachedUserResourceService'];\n\n\tfunction edUserService($rootScope, edUserResourceService) {\n\t\tvar selectedUser = null;\n\t\tvar service = {\n\t\t\tgetAllUsers: getAllUsers,\n\t\t\tgetSelectedUser: getSelectedUser,\n\t\t\tsetSelectedUser: setSelectedUser\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all user from the database\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} users\n\t\t */\n\t\tfunction getAllUsers(cacheBust) {\n\t\t\treturn edUserResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected user\n\t\t *\n\t\t * @return {object} selected user\n\t\t */\n\t\tfunction getSelectedUser() {\n\t\t\treturn selectedUser;\n\t\t}\n\n\t\t/**\n\t\t * Updates the selected user\n\t\t *\n\t\t * @param {Object} user the user select / deselect\n\t\t * @return {Array} selected user\n\t\t */\n\t\tfunction setSelectedUser(user) {\n\t\t\t// Deselect the currently selected user\n\t\t\tif (!user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\tselectedUser = null;\n\t\t\t\t// Deselect the currently selected user and (possibly) select the new one\n\t\t\t} else if (user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\t// Select the new user\n\t\t\t\tif (selectedUser._id !== user._id) {\n\t\t\t\t\tuser.selected = true;\n\t\t\t\t\tselectedUser = user;\n\t\t\t\t\t// Just remove the currently selected user\n\t\t\t\t} else {\n\t\t\t\t\tselectedUser = null;\n\t\t\t\t}\n\t\t\t\t// Select the requested user (none currently selected)\n\t\t\t} else if (user && !selectedUser) {\n\t\t\t\tuser.selected = true;\n\t\t\t\tselectedUser = user;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectedUserChange', selectedUser);\n\t\t\treturn selectedUser;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesTopbarCtrl', edCommitteesTopbarCtrl);\n\n\tedCommitteesTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edCommitteesTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edAdminTopbarCtrl', edAdminTopbarCtrl);\n\n\tedAdminTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edAdminTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSeatPickerDesk', edSeatPickerDesk);\n\n\tfunction edSeatPickerDesk() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tfloor: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edEmployeeAdminService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edEmployeeAdminService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.assignSeat = assignSeat;\n\n\t\tfunction assignSeat(location, floor, seat) {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: location,\n\t\t\t\tfloor: floor,\n\t\t\t\tseat: seat\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee seat updated!');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerTopbarCtrl', edSeatPickerTopbarCtrl);\n\n\tfunction edSeatPickerTopbarCtrl() {\n\t\t// Put awesome here\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserSelectorCtrl', edUserSelectorCtrl);\n\n\tedUserSelectorCtrl.$inject = ['$scope', 'edUserService'];\n\n\tfunction edUserSelectorCtrl($scope, edUserService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserService.getAllUsers(false);\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\t\tvm.selectUser = selectUser;\n\n\t\tfunction selectUser(user) {\n\t\t\tedUserService.setSelectedUser(user);\n\t\t}\n\n\t\tvar deregisterUserUpdated = $scope.$on('userUpdated', function (event, users) {\n\t\t\tvm.users = users;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterUserUpdated);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesCtrl', edCommitteesCtrl);\n\n\tedCommitteesCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edCommitteesCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.committee = null;\n\t\tvm.committeeMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the committee based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.committee = {\n\t\t\t\tname: currentState.split('.')[1]\n\t\t\t};\n\n\t\t\tif (vm.committee.name) {\n\t\t\t\tvm.committee.text = vm.committee.name;\n\n\t\t\t\tif (vm.committee.name === 'fun-games') {\n\t\t\t\t\tvm.committee.text = 'Fun & Games';\n\t\t\t\t}\n\n\t\t\t\tif (vm.committee.name === 'diversity') {\n\t\t\t\t\tvm.committee.text = 'Cultural Diversity & Community Outreach';\n\t\t\t\t}\n\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByCommittee);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByCommittee(employees) {\n\t\t\tvm.committeeMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.committees && _.indexOf(employee.committees, vm.committee.name) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsTopbarCtrl', edGuildsTopbarCtrl);\n\n\tedGuildsTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edGuildsTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpCtrl', edHelpCtrl);\n\n\tedHelpCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoomCard', edRoomCard);\n\n\tedRoomCard.$inject = ['$timeout', '$state', 'edRoomService'];\n\n\tfunction edRoomCard($timeout, $state, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room-card',\n\t\t\tscope: {\n\t\t\t\troom: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectRoom = function (room) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\n\t\tfunction mapRoom(room) {\n\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomSelectorCtrl', edRoomSelectorCtrl);\n\n\tedRoomSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edRoomService', 'edEmployeeService', 'edPrinterService'];\n\n\tfunction edRoomSelectorCtrl($scope, $state, $document, edRoomService, edEmployeeService, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.displayRoomInfoType = edRoomService.getDisplayRoomInfoType();\n\t\tvm.selectRoom = selectRoom;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edRoomService.getSelectMultipleRooms();\n\t\tvm.filteredEmployees = edRoomService.getAllRooms();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(room) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (room.location) {\n\t\t\t\t\treturn vm.locations.indexOf(room.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(room) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the room is on a floor in BUF\n\t\t\t\t\tif (room.floor && room.location === 'buf') {\n\t\t\t\t\t\t// Include this room if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(room.floor) > -1;\n\t\t\t\t\t\t// Include this room if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered room if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered room if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoom(room) {\n\t\t\tif (vm.displayRoomInfoType === 'profile') {\n\t\t\t\tvm.selectedRooms = edRoomService.updateSelectedRooms(room);\n\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayRoomInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedRooms = edRoomService.addAllFilteredRooms(vm.filteredRooms);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t// If the user is viewing a room profile page other than the generic room profile page\n\t\t\t// go back to the generic room page\n\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedRooms = edRoomService.removeAllSelectedRooms();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.roomName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.type = '';\n\t\t}\n\n\t\tvar deregisterSelectMultipleRoomsChange = $scope.$on('selectMultipleRoomsChange', function (event, allowSelectMultipleRooms) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleRoomsChange);\n\n\t\tvar deregisterDisplayRoomInfoTypeChange = $scope.$on('displayRoomInfoTypeChange', function (event, displayRoomInfoType) {\n\t\t\tvm.displayRoomInfoType = displayRoomInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayRoomInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomTopbarCtrl', edRoomTopbarCtrl);\n\n\tedRoomTopbarCtrl.$inject = ['$scope', 'edRoomService'];\n\n\tfunction edRoomTopbarCtrl($scope, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\n\t\tvar deregisterSelectedRoomsChanged = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedRoomsChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoom', edRoom);\n\n\tedRoom.$inject = ['$stateParams', '$document', '$timeout', 'edRoomService'];\n\n\tfunction edRoom($stateParams, $document, $timeout, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tseat: '@',\n\t\t\t\tnumber: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedRoom = edRoomService.getMappedRoom();\n\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedRoom) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\t\tif (mappedRoom && mappedRoom.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService', 'edNotifierService', 'edEmployeeService', 'edPrinterService', '_'];\n\n\tfunction ctrlFunc($state, edRoomService, edNotifierService, edEmployeeService, edPrinterService, _) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.mappedRoom = null;\n\n\t\tfunction mapRoom(name) {\n\t\t\tvar mappedRoomArray = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.name === name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t} else {\n\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this room.');\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile(seat) {\n\t\t\tvar selectedRoom = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.seat === seat;\n\t\t\t});\n\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\tedRoomService.updateSelectedRooms(selectedRoom[0]);\n\t\t\t$state.go('rooms.profile.name', {'room': selectedRoom[0].name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsCtrl', edGuildsCtrl);\n\n\tedGuildsCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edGuildsCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.guild = null;\n\t\tvm.guildMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the guild based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.guild = currentState.split('.')[1];\n\n\t\t\tif (vm.guild) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByGuild);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByGuild(employees) {\n\t\t\tvm.guildMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.guilds && _.indexOf(employee.guilds, vm.guild) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpTopbarCtrl', edHelpTopbarCtrl);\n\n\tedHelpTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edHelpTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomCtrl', edRoomCtrl);\n\n\tedRoomCtrl.$inject = ['edSidebarService'];\n\n\tfunction edRoomCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateEmployeeCtrl', edCreateEmployeeCtrl);\n\n\tedCreateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edSidebarService', 'edEmployeeAdminService', 'edIdentityService', '_'];\n\n\tfunction edCreateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edSidebarService, edEmployeeAdminService, edIdentityService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.createEmployee = createEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.managers = null;\n\t\tvm.newEmployee = {};\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tresetForm();\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t}\n\n\t\tfunction resetForm() {\n\t\t\tvm.newEmployee = {\n\t\t\t\teid: '',\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\tnickname: '',\n\t\t\t\temail: '',\n\t\t\t\tphone: '',\n\t\t\t\text: '',\n\t\t\t\tdepartment: '',\n\t\t\t\ttitle: '',\n\t\t\t\tteam: '',\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: '',\n\t\t\t\tfloor: '',\n\t\t\t\tseat: '',\n\t\t\t\thasReports: '',\n\t\t\t\tmid: ''\n\t\t\t};\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t}\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction createEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.newEmployee.eid,\n\t\t\t\tfirstName: vm.newEmployee.firstName,\n\t\t\t\tlastName: vm.newEmployee.lastName,\n\t\t\t\tnickname: vm.newEmployee.nickname,\n\t\t\t\temail: vm.newEmployee.email,\n\t\t\t\tphone: vm.newEmployee.phone,\n\t\t\t\text: vm.newEmployee.ext,\n\t\t\t\tdepartment: vm.newEmployee.department,\n\t\t\t\ttitle: vm.newEmployee.title,\n\t\t\t\tteam: vm.newEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.newEmployee.location,\n\t\t\t\tfloor: vm.newEmployee.floor,\n\t\t\t\tseat: vm.newEmployee.seat,\n\t\t\t\thasReports: vm.newEmployee.hasReports,\n\t\t\t\tmid: vm.newEmployee.mid\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.newEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.newEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedEmployeeAdminService.createEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('New Employee Added!');\n\t\t\t\t// upload the employee photo if there is one\n\t\t\t\tif (vm.newEmployee.image) {\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(vm.newEmployee.image, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\t// update the selected employee to add so we can update them\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + vm.newEmployee.image.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresetForm();\n\t\t\t\t$scope.createEmployeeForm.$setPristine();\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateUserCtrl', edCreateUserCtrl);\n\n\tedCreateUserCtrl.$inject = ['$state', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edCreateUserCtrl($state, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.createUser = createUser;\n\t\tvm.newUser = {};\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction createUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.newUser.username,\n\t\t\t\tpassword: vm.newUser.password,\n\t\t\t\tfirstName: vm.newUser.firstName,\n\t\t\t\tlastName: vm.newUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.newUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedAuthService.createUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account created!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edLoginCtrl', edLoginCtrl);\n\n\tedLoginCtrl.$inject = ['edIdentityService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edLoginCtrl(edIdentityService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signin = signin;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction signin(username, password) {\n\t\t\tedAuthService.authenticateUser(username, password).then(function (success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tedNotifierService.notify('You have successfully signed in!');\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Username / Password combination incorrect');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerFloorCtrl', edSeatPickerFloorCtrl);\n\n\tedSeatPickerFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$scope', 'edSidebarService', '_'];\n\n\tfunction edSeatPickerFloorCtrl(edEmployeeService, edDeskService, $state, $scope, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\tvm.desks = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tcheckForSelectedEmployee(vm.selectedEmployees);\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tcheckForSelectedEmployee(selectedEmployees);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction checkForSelectedEmployee(selectedEmployees) {\n\t\t\tif (selectedEmployees.length !== 1) {\n\t\t\t\t$state.go('admin.seat-picker');\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerCtrl', edSeatPickerCtrl);\n\n\tedSeatPickerCtrl.$inject = ['$scope', 'edEmployeeService', 'edEmployeeAdminService', 'edNotifierService', 'edSidebarService'];\n\n\tfunction edSeatPickerCtrl($scope, edEmployeeService, edEmployeeAdminService, edNotifierService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.setSelectMultipleEmployees(false)[0];\n\t\tvm.setRemoteEmployee = setRemoteEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction setRemoteEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: 'oth',\n\t\t\t\tfloor: null,\n\t\t\t\tseat: ''\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee location set to remote');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateEmployeeCtrl', edUpdateEmployeeCtrl);\n\n\tedUpdateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edEmployeeAdminService', 'edIdentityService', 'edSidebarService', '_'];\n\n\tfunction edUpdateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edEmployeeAdminService, edIdentityService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.updateEmployee = updateEmployee;\n\t\tvm.deleteEmployee = deleteEmployee;\n\t\tvm.cancelUpdateEmployee = cancelUpdateEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.selectedEmployee = null;\n\t\tvm.managers = null;\n\t\tvm.filteredManagers = [];\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t\tvar selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateEmployee(selectedEmployees) {\n\t\t\tvm.selectedEmployee = {\n\t\t\t\teid: selectedEmployees[0].eid,\n\t\t\t\tfirstName: selectedEmployees[0].firstName,\n\t\t\t\tlastName: selectedEmployees[0].lastName,\n\t\t\t\tnickname: selectedEmployees[0].nickname,\n\t\t\t\temail: selectedEmployees[0].email,\n\t\t\t\tphone: selectedEmployees[0].phone,\n\t\t\t\text: selectedEmployees[0].ext,\n\t\t\t\ttitle: selectedEmployees[0].title,\n\t\t\t\tdepartment: selectedEmployees[0].department,\n\t\t\t\tteam: selectedEmployees[0].team,\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: selectedEmployees[0].location,\n\t\t\t\tfloor: selectedEmployees[0].floor,\n\t\t\t\tseat: selectedEmployees[0].seat,\n\t\t\t\thasReports: selectedEmployees[0].hasReports,\n\t\t\t\tmid: selectedEmployees[0].mid\n\t\t\t};\n\n\t\t\t_.forEach(selectedEmployees[0].guilds, function (guild) {\n\t\t\t\tvm.selectedEmployee.guilds[guild] = true;\n\t\t\t});\n\n\t\t\t_.forEach(selectedEmployees[0].committees, function (committee) {\n\t\t\t\tvm.selectedEmployee.committees[committee] = true;\n\t\t\t});\n\n\t\t\tfilterManagers(selectedEmployees[0]);\n\t\t}\n\n\t\t/**\n\t\t * Filter out the selected employee and their direct reports from the managers list\n\t\t *\n\t\t * @param {Object} selectedEmployee employee data for selected employee\n\t\t * @return {Boolean} to include this manager in the list\n\t\t */\n\t\tfunction filterManagers(selectedEmployee) {\n\t\t\tif (vm.managers && selectedEmployee) {\n\t\t\t\tvm.filteredManagers = _.filter(vm.managers, function (manager) {\n\t\t\t\t\t// TODO: Recursively filter out direct reports of direct reports\n\t\t\t\t\treturn (selectedEmployee.eid !== manager.eid) && (selectedEmployee.eid !== manager.mid);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t\tfilterManagers(vm.selectedEmployee);\n\t\t}\n\n\t\tvar selectedEmployeesChangeEvent = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t} else {\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedEmployeesChangeEvent);\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction updateEmployee() {\n\t\t\t// Get the employee data from the form\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.selectedEmployee.eid,\n\t\t\t\tfirstName: vm.selectedEmployee.firstName,\n\t\t\t\tlastName: vm.selectedEmployee.lastName,\n\t\t\t\tnickname: vm.selectedEmployee.nickname,\n\t\t\t\temail: vm.selectedEmployee.email,\n\t\t\t\tphone: vm.selectedEmployee.phone,\n\t\t\t\text: vm.selectedEmployee.ext,\n\t\t\t\ttitle: vm.selectedEmployee.title,\n\t\t\t\tdepartment: vm.selectedEmployee.department,\n\t\t\t\tteam: vm.selectedEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.selectedEmployee.location,\n\t\t\t\tfloor: vm.selectedEmployee.floor,\n\t\t\t\tseat: vm.selectedEmployee.seat,\n\t\t\t\thasReports: vm.selectedEmployee.hasReports,\n\t\t\t\tmid: vm.selectedEmployee.mid\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.selectedEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.selectedEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Save the image file for uploading\n\t\t\tvar imageFile = vm.selectedEmployee.imageFile;\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('Employee information updated!');\n\t\t\t\tif (imageFile) {\n\t\t\t\t\t// upload the file to the file system\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(imageFile, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + imageFile.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t\timageFile = null;\n\t\t\t\t}\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Marks employee as deleted\n\t\t * Makes all direct reports of the deleted employee direct reports of the employee's manager\n\t\t */\n\t\tfunction deleteEmployee() {\n\t\t\t// Save employee to delete for later\n\t\t\tvar deletedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\t\t// Find all employees that report to this employee and make them report to the next level up\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(\n\t\t\t\tfunction (employees) {\n\t\t\t\t\tvar eid = deletedEmployee.eid;\n\t\t\t\t\tvar mid = deletedEmployee.mid;\n\t\t\t\t\tvar directReports = _.filter(employees, {'mid': eid});\n\t\t\t\t\t_.forEach(directReports, function (directReport) {\n\t\t\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(directReport);\n\t\t\t\t\t\tedEmployeeAdminService.updateEmployee({mid: mid});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Now delete the employee that was requested to be deleted\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(deletedEmployee);\n\n\t\t\tedEmployeeAdminService.updateEmployee({deleted: true}).then(function (employee) {\n\t\t\t\tedNotifierService.notify(employee.firstName + ' ' + employee.lastName + ' deleted!');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\tfunction cancelUpdateEmployee() {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateUserCtrl', edUpdateUserCtrl);\n\n\tedUpdateUserCtrl.$inject = ['$scope', 'edUserService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edUpdateUserCtrl($scope, edUserService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tif (vm.selectedUser) {\n\t\t\t\tpopulateUserInfo(vm.selectedUser);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateUserInfo(user) {\n\t\t\tvm.selectedUser = {\n\t\t\t\tfirstName: user.firstName,\n\t\t\t\tlastName: user.lastName,\n\t\t\t\tusername: user.username,\n\t\t\t\troles: {}\n\t\t\t};\n\n\t\t\t_.forEach(user.roles, function (role) {\n\t\t\t\tvm.selectedUser.roles[role] = true;\n\t\t\t});\n\t\t}\n\n\t\tvar selectedUserChangeEvent = $scope.$on('selectedUserChange', function (event, selectedUser) {\n\t\t\tif (selectedUser) {\n\t\t\t\tpopulateUserInfo(selectedUser);\n\t\t\t} else {\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedUserChangeEvent);\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tpassword: vm.selectedUser.password,\n\t\t\t\tfirstName: vm.selectedUser.firstName,\n\t\t\t\tlastName: vm.selectedUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.selectedUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (vm.selectedUser.password && vm.selectedUser.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.selectedUser.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserListCtrl', edUserListCtrl);\n\n\tedUserListCtrl.$inject = ['edUserResourceService', 'edSidebarService'];\n\n\tfunction edUserListCtrl(edUserResourceService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserResourceService.query();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserProfileCtrl', edUserProfileCtrl);\n\n\tedUserProfileCtrl.$inject = ['$state', 'edIdentityService', 'edNotifierService', 'edAuthService', 'edUserService', 'edSidebarService'];\n\n\tfunction edUserProfileCtrl($state, edIdentityService, edNotifierService, edAuthService, edUserService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.username = edIdentityService.currentUser.username;\n\t\tvm.fname = edIdentityService.currentUser.firstName;\n\t\tvm.lname = edIdentityService.currentUser.lastName;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedUserService.setSelectedUser(edIdentityService.currentUser);\n\t\t}\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.username,\n\t\t\t\tpassword: vm.password,\n\t\t\t\tfirstName: vm.fname,\n\t\t\t\tlastName: vm.lname\n\t\t\t};\n\n\t\t\tif (vm.password && vm.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinterCard', edPrinterCard);\n\n\tedPrinterCard.$inject = ['$timeout', '$state', 'edPrinterService'];\n\n\tfunction edPrinterCard($timeout, $state, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer-card',\n\t\t\tscope: {\n\t\t\t\tprinter: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectPrinter = function (printer) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService'];\n\n\tfunction ctrlFunc($state, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\n\t\tfunction mapPrinter(printer) {\n\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterSelectorCtrl', edPrinterSelectorCtrl);\n\n\tedPrinterSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edPrinterService', 'edEmployeeService', 'edRoomService'];\n\n\tfunction edPrinterSelectorCtrl($scope, $state, $document, edPrinterService, edEmployeeService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.displayPrinterInfoType = edPrinterService.getDisplayPrinterInfoType();\n\t\tvm.selectPrinter = selectPrinter;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edPrinterService.getSelectMultiplePrinters();\n\t\tvm.filteredEmployees = edPrinterService.getAllPrinters();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(printer) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (printer.location) {\n\t\t\t\t\treturn vm.locations.indexOf(printer.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(printer) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the printer is on a floor in BUF\n\t\t\t\t\tif (printer.floor && printer.location === 'buf') {\n\t\t\t\t\t\t// Include this printer if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(printer.floor) > -1;\n\t\t\t\t\t\t// Include this printer if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered printer if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered printer if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinter(printer) {\n\t\t\tif (vm.displayPrinterInfoType === 'profile') {\n\t\t\t\tvm.selectedPrinters = edPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t// If the user is viewing a printer profile page other than the generic printer profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayPrinterInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedPrinters = edPrinterService.addAllFilteredPrinters(vm.filteredPrinters);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedPrinters = edPrinterService.removeAllSelectedPrinters();\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.printerName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.brand = '';\n\t\t\tvm.color = '';\n\t\t}\n\n\t\tvar deregisterSelectMultiplePrintersChange = $scope.$on('selectMultiplePrintersChange', function (event, allowSelectMultiplePrinters) {\n\t\t\tvm.allowSelectAll = allowSelectMultiplePrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultiplePrintersChange);\n\n\t\tvar deregisterDisplayPrinterInfoTypeChange = $scope.$on('displayPrinterInfoTypeChange', function (event, displayPrinterInfoType) {\n\t\t\tvm.displayPrinterInfoType = displayPrinterInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayPrinterInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterTopbarCtrl', edPrinterTopbarCtrl);\n\n\tedPrinterTopbarCtrl.$inject = ['$scope', 'edPrinterService'];\n\n\tfunction edPrinterTopbarCtrl($scope, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\n\t\tvar deregisterSelectedPrintersChanged = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedPrintersChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinter', edPrinter);\n\n\tedPrinter.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edPrinterService'];\n\n\tfunction edPrinter($stateParams, $document, $timeout, $compile, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\torientation: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\t\t// If coming from the profile page via a link in the printer card\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedPrinter) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\t\tif (mappedPrinter && mappedPrinter.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService', 'edNotifierService', 'edEmployeeService', 'edRoomService', '_'];\n\n\tfunction ctrlFunc($state, edPrinterService, edNotifierService, edEmployeeService, edRoomService, _) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.mappedPrinter = null;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapPrinter(name) {\n\t\t\t// Don't map printer if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedPrinterArray = _.filter(vm.printers, function (printer) {\n\t\t\t\t\treturn printer.name === name;\n\t\t\t\t});\n\n\t\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this printer.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\tvar selectedPrinter = edPrinterService.updateSelectedPrinters(edPrinterService.getMappedPrinter())[0];\n\t\t\t$state.go('printers.profile.name', {'printer': selectedPrinter.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedPrinterResourceService', edCachedPrinterResourceService);\n\n\tedCachedPrinterResourceService.$inject = ['edPrinterResourceService'];\n\n\tfunction edCachedPrinterResourceService(edPrinterResourceService) {\n\t\tvar printers;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!printers) {\n\t\t\t\tprinters = edPrinterResourceService.query();\n\t\t\t}\n\n\t\t\treturn printers;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterResourceService', edPrinterResourceService);\n\n\tedPrinterResourceService.$inject = ['$resource'];\n\n\tfunction edPrinterResourceService($resource) {\n\t\tvar printerResource = $resource('/api/printers/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn printerResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterService', edPrinterService);\n\n\tedPrinterService.$inject = ['$rootScope', 'edCachedPrinterResourceService'];\n\n\tfunction edPrinterService($rootScope, edCachedPrinterResourceService) {\n\t\tvar selectedPrinters = [];\n\t\tvar selectedPrinterAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedPrinter = null;\n\t\tvar selectMultiplePrinters = false;\n\t\tvar displayPrinterInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllPrinters: getAllPrinters,\n\t\t\tgetSelectedPrinters: getSelectedPrinters,\n\t\t\taddAllFilteredPrinters: addAllFilteredPrinters,\n\t\t\tupdateSelectedPrinters: updateSelectedPrinters,\n\t\t\tremoveAllSelectedPrinters: removeAllSelectedPrinters,\n\t\t\tsetSelectMultiplePrinters: setSelectMultiplePrinters,\n\t\t\tgetSelectMultiplePrinters: getSelectMultiplePrinters,\n\t\t\tupdateMappedPrinter: updateMappedPrinter,\n\t\t\tgetMappedPrinter: getMappedPrinter,\n\t\t\tsetDisplayPrinterInfoType: setDisplayPrinterInfoType,\n\t\t\tgetDisplayPrinterInfoType: getDisplayPrinterInfoType,\n\t\t\tgetSelectedPrinterAdded: getSelectedPrinterAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all printers from the database (or memory)\n\t\t *\n\t\t * @return {Array} printers\n\t\t */\n\t\tfunction getAllPrinters() {\n\t\t\treturn edCachedPrinterResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected printers\n\t\t *\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction getSelectedPrinters() {\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered printers to the selected printers\n\t\t * Removes any unfiltered printers from selected printers\n\t\t *\n\t\t * @param {Array} printers to add to selected\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction addAllFilteredPrinters(printers) {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(printers, function (printer) {\n\t\t\t\tprinter.selected = true;\n\t\t\t});\n\t\t\tselectedPrinters = printers;\n\t\t\tselectedPrinterAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped printer\n\t\t *\n\t\t * @param {Object} printer to map / un-map\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction updateMappedPrinter(printer) {\n\t\t\t// Un-map the currently mapped printer\n\t\t\tif (!printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\tmappedPrinter = null;\n\t\t\t\t// Un-map the currently mapped printer and (possibly) map the new one\n\t\t\t} else if (printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\t// Map the new printer\n\t\t\t\tif (mappedPrinter._id !== printer._id) {\n\t\t\t\t\tprinter.mapped = true;\n\t\t\t\t\tmappedPrinter = printer;\n\t\t\t\t\t// Just remove the currently mapped printer\n\t\t\t\t} else {\n\t\t\t\t\tmappedPrinter = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested printer (none currently mapped)\n\t\t\t} else if (printer && !mappedPrinter) {\n\t\t\t\tprinter.mapped = true;\n\t\t\t\tmappedPrinter = printer;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedPrinterChange', mappedPrinter);\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped printer\n\t\t *\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction getMappedPrinter() {\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayPrinterInfoType(infoType) {\n\t\t\tdisplayPrinterInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayPrinterInfoTypeChange', displayPrinterInfoType);\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayPrinterInfoType() {\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected printers\n\t\t *\n\t\t * @param {Object} printer the printer to add / remove from selected printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction updateSelectedPrinters(printer) {\n\t\t\t// Allowed to have multiple printers selected\n\t\t\tif (selectMultiplePrinters) {\n\t\t\t\t// This printer is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\tselectedPrinters.unshift(printer);\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters.splice(selectedPrinters.indexOf(printer), 1);\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple printers selected\n\t\t\t} else {\n\t\t\t\t// This printer is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\t// set all selected printer's selected property to false\n\t\t\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this printer's selected property to true\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\t// replace the array of selected printers with just this one printer\n\t\t\t\t\tselectedPrinters = [printer];\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters = [];\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected printers\n\t\t */\n\t\tfunction removeAllSelectedPrinters() {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedPrinters = [];\n\t\t\tselectedPrinterAdded = false;\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected printer was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected printers added\n\t\t */\n\t\tfunction getSelectedPrinterAdded() {\n\t\t\treturn selectedPrinterAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the printer profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on printer profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the printer profile page number\n\t\t *\n\t\t * @return {Number} printer profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one printer at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction setSelectMultiplePrinters(selectMultiple) {\n\t\t\tselectMultiplePrinters = selectMultiple;\n\t\t\t// If there are multiple selected printers, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedPrinters.length > 1) {\n\t\t\t\tvar lastSelectedPrinter = selectedPrinters.shift();\n\t\t\t\t// This printer will be reselected in updateSelectedPrinters\n\t\t\t\tlastSelectedPrinter.selected = false;\n\t\t\t\tselectedPrinters = updateSelectedPrinters(lastSelectedPrinter);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultiplePrintersChange', selectMultiplePrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple printers to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple printer\n\t\t */\n\t\tfunction getSelectMultiplePrinters() {\n\t\t\treturn selectMultiplePrinters;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterCtrl', edPrinterCtrl);\n\n\tedPrinterCtrl.$inject = ['edSidebarService'];\n\n\tfunction edPrinterCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedDeskResourceService', edCachedDeskResourceService);\n\n\tedCachedDeskResourceService.$inject = ['edDeskResourceService'];\n\n\tfunction edCachedDeskResourceService(edDeskResourceService) {\n\t\tvar desks;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!desks) {\n\t\t\t\tdesks = edDeskResourceService.query();\n\t\t\t}\n\n\t\t\treturn desks;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedEmployeeResourceService', edCachedEmployeeResourceService);\n\n\tedCachedEmployeeResourceService.$inject = ['edEmployeeResourceService', '_'];\n\n\tfunction edCachedEmployeeResourceService(edEmployeeResourceService, _) {\n\t\tvar employees;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!employees || cacheBust) {\n\t\t\t\temployees = edEmployeeResourceService.query({cacheKill: new Date().getTime()}, function(ees) {\n\t\t\t\t\tangular.forEach(ees, function (employee) {\n\t\t\t\t\t\t// Create a manager property for each employee\n\t\t\t\t\t\tvar manager = _.find(ees, {'eid': employee.mid});\n\t\t\t\t\t\tif (manager) {\n\t\t\t\t\t\t\tif (manager.nickname) {\n\t\t\t\t\t\t\t\temployee.manager = manager.nickname + ' ' + manager.lastName;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\temployee.manager = manager.firstName + ' ' + manager.lastName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Create a displayName property for each employee\n\t\t\t\t\t\tif (employee.nickname) {\n\t\t\t\t\t\t\temployee.displayName = employee.nickname + ' ' + employee.lastName;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temployee.displayName = employee.firstName + ' ' + employee.lastName;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn employees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskResourceService', edDeskResourceService);\n\n\tedDeskResourceService.$inject = ['$resource'];\n\n\tfunction edDeskResourceService($resource) {\n\t\tvar deskResource = $resource('/api/desks/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn deskResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskService', edDeskService);\n\n\tedDeskService.$inject = ['edCachedDeskResourceService'];\n\n\tfunction edDeskService(edCachedDeskResourceService) {\n\t\tvar service = {\n\t\t\tgetAllDesks: getAllDesks\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction getAllDesks() {\n\t\t\treturn edCachedDeskResourceService.query();\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeResourceService', edEmployeeResourceService);\n\n\tedEmployeeResourceService.$inject = ['$resource'];\n\n\tfunction edEmployeeResourceService($resource) {\n\t\tvar employeeResource = $resource('/api/employees/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn employeeResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeService', edEmployeeService);\n\n\tedEmployeeService.$inject = ['$rootScope', 'edCachedEmployeeResourceService', 'edNotifierService', '_'];\n\n\tfunction edEmployeeService($rootScope, edCachedEmployeeResourceService, edNotifierService, _) {\n\t\tvar selectedEmployees = [];\n\t\tvar selectedEmployeeAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedEmployee = null;\n\t\tvar selectMultipleEmployees = false;\n\t\tvar displayEmployeeInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllEmployees: getAllEmployees,\n\t\t\tgetSelectedEmployees: getSelectedEmployees,\n\t\t\taddAllFilteredEmployees: addAllFilteredEmployees,\n\t\t\tupdateSelectedEmployees: updateSelectedEmployees,\n\t\t\tremoveAllSelectedEmployees: removeAllSelectedEmployees,\n\t\t\tsetSelectMultipleEmployees: setSelectMultipleEmployees,\n\t\t\tgetSelectMultipleEmployees: getSelectMultipleEmployees,\n\t\t\tupdateMappedEmployee: updateMappedEmployee,\n\t\t\tupdateMappedEmployeeById: updateMappedEmployeeById,\n\t\t\tgetMappedEmployee: getMappedEmployee,\n\t\t\tsetDisplayEmployeeInfoType: setDisplayEmployeeInfoType,\n\t\t\tgetDisplayEmployeeInfoType: getDisplayEmployeeInfoType,\n\t\t\tgetSelectedEmployeeAdded: getSelectedEmployeeAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all employees from the database (or memory)\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} employees\n\t\t */\n\t\tfunction getAllEmployees(cacheBust) {\n\t\t\treturn edCachedEmployeeResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected employees\n\t\t *\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction getSelectedEmployees() {\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered employees to the selected employees\n\t\t * Removes any unfiltered employees from selected employees\n\t\t *\n\t\t * @param {Array} employees to add to selected\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction addAllFilteredEmployees(employees) {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(employees, function (employee) {\n\t\t\t\temployee.selected = true;\n\t\t\t});\n\t\t\tselectedEmployees = employees;\n\t\t\tselectedEmployeeAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee\n\t\t *\n\t\t * @param {Object} employee to map / un-map\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction updateMappedEmployee(employee) {\n\t\t\t// Un-map the currently mapped employee\n\t\t\tif (!employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\tmappedEmployee = null;\n\t\t\t\t// Un-map the currently mapped employee and (possibly) map the new one\n\t\t\t} else if (employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\t// Map the new employee\n\t\t\t\tif (mappedEmployee._id !== employee._id) {\n\t\t\t\t\temployee.mapped = true;\n\t\t\t\t\tmappedEmployee = employee;\n\t\t\t\t\t// Just remove the currently mapped employee\n\t\t\t\t} else {\n\t\t\t\t\tmappedEmployee = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested employee (none currently mapped)\n\t\t\t} else if (employee && !mappedEmployee) {\n\t\t\t\temployee.mapped = true;\n\t\t\t\tmappedEmployee = employee;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedEmployeeChange', mappedEmployee);\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee using an employee ID\n\t\t */\n\t\tfunction updateMappedEmployeeById(id) {\n\t\t\tgetAllEmployees().$promise.then(function (employees) {\n\t\t\t\tvar employee = _.filter(employees, function (employee) {\n\t\t\t\t\treturn employee.eid === parseInt(id);\n\t\t\t\t});\n\t\t\t\tif (employee.length > 0) {\n\t\t\t\t\tupdateMappedEmployee(employee[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('I\\'m not sure who you\\'re looking for.');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped employee\n\t\t *\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction getMappedEmployee() {\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayEmployeeInfoType(infoType) {\n\t\t\tdisplayEmployeeInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayEmployeeInfoTypeChange', displayEmployeeInfoType);\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayEmployeeInfoType() {\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected employees\n\t\t *\n\t\t * @param {Object} employee the employee to add / remove from selected employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction updateSelectedEmployees(employee) {\n\t\t\t// Allowed to have multiple employees selected\n\t\t\tif (selectMultipleEmployees) {\n\t\t\t\t// This employee is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\tselectedEmployees.unshift(employee);\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees.splice(selectedEmployees.indexOf(employee), 1);\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple employees selected\n\t\t\t} else {\n\t\t\t\t// This employee is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\t// set all selected employee's selected property to false\n\t\t\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this employee's selected property to true\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\t// replace the array of selected employees with just this one employee\n\t\t\t\t\tselectedEmployees = [employee];\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees = [];\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected employees\n\t\t */\n\t\tfunction removeAllSelectedEmployees() {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedEmployees = [];\n\t\t\tselectedEmployeeAdded = false;\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected employee was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected employees added\n\t\t */\n\t\tfunction getSelectedEmployeeAdded() {\n\t\t\treturn selectedEmployeeAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the employee profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on employee profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the employee profile page number\n\t\t *\n\t\t * @return {Number} employee profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one employee at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction setSelectMultipleEmployees(selectMultiple) {\n\t\t\tselectMultipleEmployees = selectMultiple;\n\t\t\t// If there are multiple selected employees, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedEmployees.length > 1) {\n\t\t\t\tvar lastSelectedEmployee = selectedEmployees.shift();\n\t\t\t\t// This employee will be reselected in updateSelectedEmployees\n\t\t\t\tlastSelectedEmployee.selected = false;\n\t\t\t\tselectedEmployees = updateSelectedEmployees(lastSelectedEmployee);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleEmployeesChange', selectMultipleEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple employees to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple employee\n\t\t */\n\t\tfunction getSelectMultipleEmployees() {\n\t\t\treturn selectMultipleEmployees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edDesk', edDesk);\n\n\tedDesk.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edEmployeeService', '_'];\n\n\tfunction edDesk($stateParams, $document, $timeout, $compile, edEmployeeService, _) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedEmployee = edEmployeeService.getMappedEmployee();\n\n\t\t\t// If coming from the profile page via a link in the employee card\n\t\t\tif ($stateParams.seat === attrs.seat && scope.mappedEmployee) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\t\tif (mappedEmployee && mappedEmployee.seat === attrs.seat) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edNotifierService', 'edIdentityService', 'edPrinterService', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edNotifierService, edIdentityService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.mappedEmployee = null;\n\t\tvm.identity = edIdentityService;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapEmployee(seat, location) {\n\t\t\t// Don't map employee if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedEmployeeArray = _.filter(vm.employees, function (employee) {\n\t\t\t\t\treturn employee.seat === seat && employee.location === location;\n\t\t\t\t});\n\n\t\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know who sits there.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tvar selectedEmployee = edEmployeeService.updateSelectedEmployees(edEmployeeService.getMappedEmployee())[0];\n\t\t\t$state.go('employees.profile.employee', {'employee': selectedEmployee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edEmployeeCard', edEmployeeCard);\n\n\tedEmployeeCard.$inject = ['$timeout', '$state', 'edEmployeeService'];\n\n\tfunction edEmployeeCard($timeout, $state, edEmployeeService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/employee-card',\n\t\t\tscope: {\n\t\t\t\temployee: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\t// Some people have a different username for lync than their liazon email address\n\t\t\tif (scope.employee.lync) {\n\t\t\t\tvm.twEmail = scope.employee.lync + '@towerswatson.com';\n\t\t\t} else {\n\t\t\t\tvm.twEmail = scope.employee.email.split('@')[0] + '@towerswatson.com';\n\t\t\t}\n\n\t\t\tvm.deselectEmployee = function (employee) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edIdentityService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.editEmployee = editEmployee;\n\n\t\tfunction mapEmployee(employee) {\n\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t}\n\n\t\tfunction editEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t$state.go('admin.update-employee');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeSelectorCtrl', edEmployeeSelectorCtrl);\n\n\tedEmployeeSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edEmployeeService', 'edNotifierService', 'edPrinterService', 'edRoomService'];\n\n\tfunction edEmployeeSelectorCtrl($scope, $state, $document, edEmployeeService, edNotifierService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.displayEmployeeInfoType = edEmployeeService.getDisplayEmployeeInfoType();\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edEmployeeService.getSelectMultipleEmployees();\n\t\tvm.filteredEmployees = edEmployeeService.getAllEmployees();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(employee) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (employee.location) {\n\t\t\t\t\treturn vm.locations.indexOf(employee.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(employee) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the employee is on a floor in BUF\n\t\t\t\t\tif (employee.floor && employee.location === 'buf') {\n\t\t\t\t\t\t// Include this employee if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(employee.floor) > -1;\n\t\t\t\t\t// Include this employee if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t// Include all filtered employees if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t// Include all filtered employees if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tif (vm.displayEmployeeInfoType === 'profile') {\n\t\t\t\tvm.selectedEmployees = edEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t// If the user is viewing an employee profile page other than the generic employee profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tvar currentState = $state.current.name;\n\t\t\t\tif (currentState !== 'employees.profile' && currentState.indexOf('employees.profile') === 0) {\n\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayEmployeeInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedEmployees = edEmployeeService.addAllFilteredEmployees(vm.filteredEmployees);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif (vm.team === 'Prestige Worldwide') {\n\t\t\t\tedNotifierService.info('Investors?  Possibly you!');\n\t\t\t}\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedEmployees = edEmployeeService.removeAllSelectedEmployees();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.employeeName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.department = '';\n\t\t\tvm.team = '';\n\t\t}\n\n\t\tvar deregisterEmployeesUpdated = $scope.$on('employeesUpdated', function (event, employees) {\n\t\t\tvm.employees = employees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployeesUpdated);\n\n\t\tvar deregisterSelectMultipleEmployeesChange = $scope.$on('selectMultipleEmployeesChange', function (event, allowSelectMultipleEmployees) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleEmployeesChange);\n\n\t\tvar deregisterDisplayEmployeeInfoTypeChange = $scope.$on('displayEmployeeInfoTypeChange', function (event, displayEmployeeInfoType) {\n\t\t\tvm.displayEmployeeInfoType = displayEmployeeInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayEmployeeInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeTopbarCtrl', edEmployeeTopbarCtrl);\n\n\tedEmployeeTopbarCtrl.$inject = ['$scope', 'edEmployeeService'];\n\n\tfunction edEmployeeTopbarCtrl($scope, edEmployeeService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\n\t\tvar deregisterSelectedEmployeesChanged = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEmployeesChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeCtrl', edEmployeeCtrl);\n\n\tedEmployeeCtrl.$inject = ['edSidebarService'];\n\n\tfunction edEmployeeCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedRoomResourceService', edCachedRoomResourceService);\n\n\tedCachedRoomResourceService.$inject = ['edRoomResourceService'];\n\n\tfunction edCachedRoomResourceService(edRoomResourceService) {\n\t\tvar rooms;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!rooms) {\n\t\t\t\trooms = edRoomResourceService.query();\n\t\t\t}\n\n\t\t\treturn rooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomResourceService', edRoomResourceService);\n\n\tedRoomResourceService.$inject = ['$resource'];\n\n\tfunction edRoomResourceService($resource) {\n\t\tvar roomResource = $resource('/api/rooms/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn roomResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomService', edRoomService);\n\n\tedRoomService.$inject = ['$rootScope', 'edCachedRoomResourceService'];\n\n\tfunction edRoomService($rootScope, edCachedRoomResourceService) {\n\t\tvar selectedRooms = [];\n\t\tvar selectedRoomAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedRoom = null;\n\t\tvar selectMultipleRooms = false;\n\t\tvar displayRoomInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllRooms: getAllRooms,\n\t\t\tgetSelectedRooms: getSelectedRooms,\n\t\t\taddAllFilteredRooms: addAllFilteredRooms,\n\t\t\tupdateSelectedRooms: updateSelectedRooms,\n\t\t\tremoveAllSelectedRooms: removeAllSelectedRooms,\n\t\t\tsetSelectMultipleRooms: setSelectMultipleRooms,\n\t\t\tgetSelectMultipleRooms: getSelectMultipleRooms,\n\t\t\tupdateMappedRoom: updateMappedRoom,\n\t\t\tgetMappedRoom: getMappedRoom,\n\t\t\tsetDisplayRoomInfoType: setDisplayRoomInfoType,\n\t\t\tgetDisplayRoomInfoType: getDisplayRoomInfoType,\n\t\t\tgetSelectedRoomAdded: getSelectedRoomAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all pooms from the database (or memory)\n\t\t *\n\t\t * @return {Array} rooms\n\t\t */\n\t\tfunction getAllRooms() {\n\t\t\treturn edCachedRoomResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected rooms\n\t\t *\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction getSelectedRooms() {\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered rooms to the selected rooms\n\t\t * Removes any unfiltered rooms from selected rooms\n\t\t *\n\t\t * @param {Array} rooms to add to selected\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction addAllFilteredRooms(rooms) {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(rooms, function (room) {\n\t\t\t\troom.selected = true;\n\t\t\t});\n\t\t\tselectedRooms = rooms;\n\t\t\tselectedRoomAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped room\n\t\t *\n\t\t * @param {Object} room to map / un-map\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction updateMappedRoom(room) {\n\t\t\t// Un-map the currently mapped room\n\t\t\tif (!room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\tmappedRoom = null;\n\t\t\t\t// Un-map the currently mapped room and (possibly) map the new one\n\t\t\t} else if (room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\t// Map the new room\n\t\t\t\tif (mappedRoom._id !== room._id) {\n\t\t\t\t\troom.mapped = true;\n\t\t\t\t\tmappedRoom = room;\n\t\t\t\t\t// Just remove the currently mapped room\n\t\t\t\t} else {\n\t\t\t\t\tmappedRoom = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested room (none currently mapped)\n\t\t\t} else if (room && !mappedRoom) {\n\t\t\t\troom.mapped = true;\n\t\t\t\tmappedRoom = room;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedRoomChange', mappedRoom);\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped room\n\t\t *\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction getMappedRoom() {\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayRoomInfoType(infoType) {\n\t\t\tdisplayRoomInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayRoomInfoTypeChange', displayRoomInfoType);\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayRoomInfoType() {\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected rooms\n\t\t *\n\t\t * @param {Object} room the room to add / remove from selected rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction updateSelectedRooms(room) {\n\t\t\t// Allowed to have multiple rooms selected\n\t\t\tif (selectMultipleRooms) {\n\t\t\t\t// This room is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\tselectedRooms.unshift(room);\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms.splice(selectedRooms.indexOf(room), 1);\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple rooms selected\n\t\t\t} else {\n\t\t\t\t// This room is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\t// set all selected room's selected property to false\n\t\t\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this room's selected property to true\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\t// replace the array of selected rooms with just this one room\n\t\t\t\t\tselectedRooms = [room];\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms = [];\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected rooms\n\t\t */\n\t\tfunction removeAllSelectedRooms() {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedRooms = [];\n\t\t\tselectedRoomAdded = false;\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected room was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected rooms added\n\t\t */\n\t\tfunction getSelectedRoomAdded() {\n\t\t\treturn selectedRoomAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the room profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on room profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the room profile page number\n\t\t *\n\t\t * @return {Number} room profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one room at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction setSelectMultipleRooms(selectMultiple) {\n\t\t\tselectMultipleRooms = selectMultiple;\n\t\t\t// If there are multiple selected rooms, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedRooms.length > 1) {\n\t\t\t\tvar lastSelectedRoom = selectedRooms.shift();\n\t\t\t\t// This room will be reselected in updateSelectedRooms\n\t\t\t\tlastSelectedRoom.selected = false;\n\t\t\t\tselectedRooms = updateSelectedRooms(lastSelectedRoom);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleRoomsChange', selectMultipleRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Gets wether or not we should allow multiple rooms to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple room\n\t\t */\n\t\tfunction getSelectMultipleRooms() {\n\t\t\treturn selectMultipleRooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactResourceService', edArtifactResourceService);\n\n\tedArtifactResourceService.$inject = ['$resource'];\n\n\tfunction edArtifactResourceService($resource) {\n\t\tvar artifactResource = $resource('/api/artifacts/:id', {\n\t\t\t_id: '@id'\n\t\t});\n\n\t\treturn artifactResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactService', edArtifactService);\n\n\tedArtifactService.$inject = ['edCachedArtifactResourceService'];\n\n\tfunction edArtifactService(edCachedArtifactResourceService) {\n\t\tvar service = {\n\t\t\tgetAllArtifacts: getAllArtifacts\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all artifacts from the database (or memory)\n\t\t *\n\t\t * @return {Array} artifacts\n\t\t */\n\t\tfunction getAllArtifacts() {\n\t\t\treturn edCachedArtifactResourceService.query();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedArtifactResourceService', edCachedArtifactResourceService);\n\n\tedCachedArtifactResourceService.$inject = ['edArtifactResourceService'];\n\n\tfunction edCachedArtifactResourceService(edArtifactResourceService) {\n\t\tvar artifacts;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!artifacts) {\n\t\t\t\tartifacts = edArtifactResourceService.query();\n\t\t\t}\n\n\t\t\treturn artifacts;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edIdentityService', edIdentityService);\n\n\tedIdentityService.$inject = ['$window', 'edUserResourceService'];\n\n\tfunction edIdentityService($window, edUserResourceService) {\n\t\tvar currentUser;\n\t\tif (!!$window.bootstrappedUserObject) {\n\t\t\tcurrentUser = new edUserResourceService();\n\t\t\tangular.extend(currentUser, $window.bootstrappedUserObject);\n\t\t}\n\t\tvar service = {\n\t\t\tcurrentUser: currentUser,\n\t\t\tisAuthenticated: isAuthenticated,\n\t\t\tisAuthorized: isAuthorized\n\t\t};\n\t\treturn service;\n\n\t\tfunction isAuthenticated() {\n\t\t\treturn !!this.currentUser;\n\t\t}\n\n\t\tfunction isAuthorized(role) {\n\t\t\treturn !!this.currentUser && this.currentUser.roles.indexOf(role) > -1;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').value('edToastr', toastr);\n\n\tangular.module('app').factory('edNotifierService', edNotifierService);\n\n\tedNotifierService.$inject = ['edToastr'];\n\n\tfunction edNotifierService(edToastr) {\n\t\tvar service = {\n\t\t\tnotify: notify,\n\t\t\tinfo: info,\n\t\t\terror: error\n\t\t};\n\n\t\tedToastr.options = {\n\t\t\t'showDuration': '300',\n\t\t\t'hideDuration': '300'\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction notify(msg) {\n\t\t\tedToastr.success(msg);\n\t\t}\n\n\t\tfunction info(msg) {\n\t\t\tedToastr.info(msg);\n\t\t}\n\n\t\tfunction error(msg) {\n\t\t\tedToastr.error(msg);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edSidebarService', edSidebarService);\n\n\tedSidebarService.$inject = ['$rootScope'];\n\n\tfunction edSidebarService($rootScope) {\n\t\tvar sidebarLocked = false;\n\t\tvar service = {\n\t\t\tsetLockSidebar: setLockSidebar,\n\t\t\tgetLockSidebar: getLockSidebar\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction setLockSidebar(lock) {\n\t\t\tsidebarLocked = lock;\n\t\t\t$rootScope.$broadcast('sidebarLockedChange', sidebarLocked);\n\t\t\treturn sidebarLocked;\n\t\t}\n\n\t\tfunction getLockSidebar() {\n\t\t\treturn sidebarLocked;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edArtifact', edArtifact);\n\n\tfunction edArtifact() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/artifact',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tfunction ctrlFunc() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edFooter', edFooter);\n\n\tfunction edFooter() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/footer',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService', 'edAuthService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edIdentityService, edAuthService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signout = signout;\n\n\t\tfunction signout() {\n\t\t\tedAuthService.logoutUser().then(function () {\n\t\t\t\tvm.username = '';\n\t\t\t\tvm.password = '';\n\t\t\t\tedNotifierService.notify('You have successfully signed out');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edHeader', edHeader);\n\n\tfunction edHeader() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/header',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService'];\n\n\tfunction ctrlFunc(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexTopbarCtrl', edIndexTopbarCtrl);\n\n\tfunction edIndexTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSidebarLeft', edSidebarLeft);\n\n\tfunction edSidebarLeft() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/sidebar-left',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['$scope', 'edSidebarService', 'edIdentityService'];\n\n\tfunction ctrlFunc($scope, edSidebarService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.sidebarOpen = false;\n\t\tvm.sidebarLocked = edSidebarService.getLockSidebar();\n\t\tvm.toggleSidebar = toggleSidebar;\n\t\tvm.closeSidebar = closeSidebar;\n\t\tvm.scrollSidebarTop = scrollSidebarTop;\n\n\t\tactivate();\n\n\t\t// If the sidebar is locked open, make sure it is open\n\t\tfunction activate() {\n\t\t\tif (vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = true;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, toggle it\n\t\tfunction toggleSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = !vm.sidebarOpen;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, close it\n\t\tfunction closeSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// Watch for the sidebar locked change event\n\t\tvar deregister = $scope.$on('sidebarLockedChange', function (event, sidebarLocked) {\n\t\t\tvm.sidebarLocked = sidebarLocked;\n\t\t\tvm.sidebarOpen = vm.sidebarLocked ? true : false;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction scrollSidebarTop() {\n\t\t\t$('.nano').nanoScroller({scroll: 'top'});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').filter('edPhoneNumberFilter', edPhoneNumberFilter);\n\n\tfunction edPhoneNumberFilter() {\n\t\treturn function (tel) {\n\t\t\tif (!tel) { return ''; }\n\n\t\t\t// strip all non-digits\n\t\t\tvar value = tel.toString().trim().replace(/\\D/g, '');\n\n\t\t\tvar country, city, number;\n\n\t\t\tswitch (value.length) {\n\t\t\t\tcase 10: // +1PPP####### -> C (PPP) ###-####\n\t\t\t\t\tcountry = 1;\n\t\t\t\t\tcity = value.slice(0, 3);\n\t\t\t\t\tnumber = value.slice(3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 11: // +CPPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value[0];\n\t\t\t\t\tcity = value.slice(1, 4);\n\t\t\t\t\tnumber = value.slice(4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 12: // +CCCPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value.slice(0, 3);\n\t\t\t\t\tcity = value.slice(3, 5);\n\t\t\t\t\tnumber = value.slice(5);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn tel;\n\t\t\t}\n\n\t\t\tif (country === 1) {\n\t\t\t\tcountry = '';\n\t\t\t}\n\n\t\t\tnumber = number.slice(0, 3) + '-' + number.slice(3);\n\n\t\t\treturn (country + ' (' + city + ') ' + number).trim();\n\t\t};\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edNanoscroller', edNanoscroller);\n\n\tedNanoscroller.$inject = ['$timeout'];\n\n\tfunction edNanoscroller($timeout) {\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\ttemplate: '',\n\t\t\treplace: false,\n\t\t\tscope: {},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\t// Do this right away so scrollbars don't display in IE and Firefox\n\t\t\tangular.element('.nano').nanoScroller({preventPageScrolling: true});\n\t\t\t// Do this again after a few seconds to wait for the model to populate\n\t\t\t$timeout(function () {\n\t\t\t\tangular.element('.nano').nanoScroller();\n\t\t\t}, 3000);\n\t\t}\n\t}\n})();","/**\n * svg directive\n * replace img tag with its svg content\n * adaptation from https://stackoverflow.com/questions/11978995/how-to-change-color-of-svg-image-using-css-jquery-svg-image-replacement\n */\n(function () {\n\t'use strict';\n\tangular.module('app').directive('svg', svg);\n\n\tsvg.$inject = ['$http'];\n\n\tfunction svg($http) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\tscope: {\n\t\t\t\tpath: '@',\n\t\t\t\tfilename: '@'\n\t\t\t},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, element, attrs) {\n\t\t\tvar imgId = attrs.id;\n\t\t\tvar imgClass = attrs.class;\n\t\t\tvar imgUrl = scope.path + scope.filename + '.svg';\n\n\t\t\t// Load svg content\n\t\t\t$http.get(imgUrl).success(function (data, status) {\n\t\t\t\tvar svg = angular.element(data);\n\t\t\t\tfor (var i = svg.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (svg[i].constructor.name === 'SVGSVGElement') {\n\t\t\t\t\t\tsvg = angular.element(svg[i]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgId !== 'undefined') {\n\t\t\t\t\tsvg.attr('id', imgId);\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgClass !== 'undefined') {\n\t\t\t\t\tsvg.attr('class', imgClass);\n\t\t\t\t}\n\t\t\t\t// Remove invalid attributes\n\t\t\t\tsvg = svg.removeAttr('xmlns:a');\n\t\t\t\telement.replaceWith(svg);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpNavigationCtrl', edHelpNavigationCtrl);\n\n\tedHelpNavigationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpNavigationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpProfileCtrl', edHelpProfileCtrl);\n\n\tedHelpProfileCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpProfileCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomMapCtrl', edRoomMapCtrl);\n\n\tedRoomMapCtrl.$inject = ['$state', '$scope', 'edRoomService', 'edSidebarService'];\n\n\tfunction edRoomMapCtrl($state, $scope, edRoomService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\tlocateRoom(vm.mappedRoom);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tlocateRoom(mappedRoom);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateRoom(room) {\n\t\t\tif (room) {\n\t\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomProfileCtrl', edRoomProfileCtrl);\n\n\tedRoomProfileCtrl.$inject = ['$scope', '$document', 'edRoomService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edRoomProfileCtrl($scope, $document, edRoomService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edRoomService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('profile');\n\t\t\tedRoomService.setSelectMultipleRooms(true);\n\t\t\tedRoomService.updateMappedRoom(null);\n\n\t\t\tif ($stateParams.room || $stateParams.roomtype) {\n\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByName);\n\t\t\t\t} else if ($stateParams.roomtype) {\n\t\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoomByName(rooms) {\n\t\t\tvar selectedRooms = _.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar rooms = $stateParams.room.split(',');\n\t\t\t\t\t// Loop over each room name\n\t\t\t\t\tangular.forEach(rooms, function (name) {\n\t\t\t\t\t\t// If the room's name is part of the query select it\n\t\t\t\t\t\tif (room.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectRoomByType(rooms) {\n\t\t\tvar selectedRooms = _.sortBy(_.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.roomtype) {\n\t\t\t\t\t// Split roomtype query on comma\n\t\t\t\t\tvar roomtypes = $stateParams.roomtype.split(',');\n\t\t\t\t\t// Loop over each roomtype\n\t\t\t\t\tangular.forEach(roomtypes, function (type) {\n\t\t\t\t\t\t// If the room's type is part of the query select it\n\t\t\t\t\t\tif (room.type.toLocaleLowerCase() === type.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t}), 'name').reverse();\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedRoomService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t\t// If we added to selected rooms, go to first page and scroll to the top\n\t\t\tif (edRoomService.getSelectedRoomAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpLocationCtrl', edHelpLocationCtrl);\n\n\tedHelpLocationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpLocationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpOrgChartCtrl', edHelpOrgChartCtrl);\n\n\tedHelpOrgChartCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpOrgChartCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterProfileCtrl', edPrinterProfileCtrl);\n\n\tedPrinterProfileCtrl.$inject = ['$scope', '$document', 'edPrinterService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edPrinterProfileCtrl($scope, $document, edPrinterService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edPrinterService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('profile');\n\t\t\tedPrinterService.setSelectMultiplePrinters(true);\n\t\t\tedPrinterService.updateMappedPrinter(null);\n\n\t\t\tif ($stateParams.printer || $stateParams.printerbrand) {\n\t\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByName);\n\t\t\t\t} else if ($stateParams.printerbrand) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByBrand);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinterByName(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar printers = $stateParams.printer.split(',');\n\t\t\t\t\t// Loop over each printer name\n\t\t\t\t\tangular.forEach(printers, function (name) {\n\t\t\t\t\t\t// If the printer's name is part of the query select it\n\t\t\t\t\t\tif (printer.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectPrinterByBrand(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printerbrand) {\n\t\t\t\t\t// Split printerbrand query on comma\n\t\t\t\t\tvar printerbrands = $stateParams.printerbrand.split(',');\n\t\t\t\t\t// Loop over each printerbrand\n\t\t\t\t\tangular.forEach(printerbrands, function (brand) {\n\t\t\t\t\t\t// If the printer's branc is part of the query select it\n\t\t\t\t\t\tif (printer.brand.toLocaleLowerCase() === brand.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedPrinterService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t\t// If we added to selected printers, go to first page and scroll to the top\n\t\t\tif (edPrinterService.getSelectedPrinterAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edFloorCtrl', edFloorCtrl);\n\n\tedFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$stateParams', '$scope', 'edRoomService', 'edPrinterService', 'edArtifactService', 'edSidebarService', '_'];\n\n\tfunction edFloorCtrl(edEmployeeService, edDeskService, $state, $stateParams, $scope, edRoomService, edPrinterService, edArtifactService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\t\tvm.desks = null;\n\t\tvm.rooms = null;\n\t\tvm.printers = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks and rooms on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t\tedRoomService.getAllRooms().$promise.then(roomFilter);\n\t\t\tedPrinterService.getAllPrinters().$promise.then(printerFilter);\n\t\t\tedArtifactService.getAllArtifacts().$promise.then(artifactFilter);\n\n\t\t\tmapEmployee();\n\t\t\tmapRoom();\n\t\t\tmapPrinter();\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tif (mappedEmployee) {\n\t\t\t\tif (mappedEmployee.floor && (mappedEmployee.location !== vm.location || mappedEmployee.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('employees.map.' + mappedEmployee.location + '-' + mappedEmployee.floor, {'seat': mappedEmployee.seat});\n\t\t\t\t} else if (!mappedEmployee.floor) {\n\t\t\t\t\t$state.go('employees.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tvar deregisterPrinter = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tif (mappedPrinter) {\n\t\t\t\tif (mappedPrinter.floor && (mappedPrinter.location !== vm.location || mappedPrinter.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('printers.map.' + mappedPrinter.location + '-' + mappedPrinter.floor, {'name': mappedPrinter.name});\n\t\t\t\t} else if (!mappedPrinter.floor) {\n\t\t\t\t\t$state.go('printers.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterPrinter);\n\n\t\tvar deregisterRoom = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tif (mappedRoom) {\n\t\t\t\tif (mappedRoom.floor && (mappedRoom.location !== vm.location || mappedRoom.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('rooms.map.' + mappedRoom.location + '-' + mappedRoom.floor, {'name': mappedRoom.name});\n\t\t\t\t} else if (!mappedRoom.floor) {\n\t\t\t\t\t$state.go('rooms.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterRoom);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction roomFilter(rooms) {\n\t\t\tvm.rooms = _.filter(rooms, function (room) {\n\t\t\t\treturn room.floor === vm.floor && room.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction printerFilter(printers) {\n\t\t\tvm.printers = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.floor === vm.floor && printer.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction artifactFilter(artifacts) {\n\t\t\tvm.artifacts = _.filter(artifacts, function (artifact) {\n\t\t\t\treturn artifact.floor === vm.floor && artifact.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction mapEmployee() {\n\t\t\t// If there is a mapped employee and we know their floor\n\t\t\tif (vm.mappedEmployee && vm.mappedEmployee.floor) {\n\t\t\t\t// If the mapped employee is on a different floor, un-map them\n\t\t\t\tif (vm.floor !== vm.mappedEmployee.floor) {\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(null);\n\t\t\t\t}\n\t\t\t\t// Map an employee based on a seat number\n\t\t\t} else if ($stateParams.seat) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(mapEmployeeBySeat);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapEmployeeBySeat(employees) {\n\t\t\tvar mappedEmployeeArray = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.seat === $stateParams.seat;\n\t\t\t});\n\n\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\tvm.location = vm.mappedEmployee.location;\n\t\t\t\tvm.floor = vm.mappedEmployee.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoom() {\n\t\t\t// If there is a mapped printer and we know its floor\n\t\t\tif (vm.mappedPrinter && vm.mappedPrinter.floor) {\n\t\t\t\t// If the mapped printer is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedPrinter.floor) {\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(null);\n\t\t\t\t}\n\t\t\t\t// Map an printer based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedPrinterService.getAllPrinters().$promise.then(mapPrinterByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoomByName(rooms) {\n\t\t\tvar mappedRoomArray = _.filter(rooms, function (room) {\n\t\t\t\treturn room.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t\tvm.floor = vm.mappedRoom.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinter() {\n\t\t\t// If there is a mapped room and we know its floor\n\t\t\tif (vm.mappedRoom && vm.mappedRoom.floor) {\n\t\t\t\t// If the mapped room is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedRoom.floor) {\n\t\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(null);\n\t\t\t\t}\n\t\t\t\t// Map an room based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedRoomService.getAllRooms().$promise.then(mapRoomByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinterByName(printers) {\n\t\t\tvar mappedPrinterArray = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\tvm.floor = vm.mappedPrinter.floor;\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexCtrl', edIndexCtrl);\n\n\tedIndexCtrl.$inject = ['edSidebarService'];\n\n\tfunction edIndexCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterMapCtrl', edPrinterMapCtrl);\n\n\tedPrinterMapCtrl.$inject = ['$state', '$scope', 'edPrinterService', 'edSidebarService'];\n\n\tfunction edPrinterMapCtrl($state, $scope, edPrinterService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tlocatePrinter(vm.mappedPrinter);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tlocatePrinter(mappedPrinter);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locatePrinter(printer) {\n\t\t\tif (printer) {\n\t\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeMapCtrl', edEmployeeMapCtrl);\n\n\tedEmployeeMapCtrl.$inject = ['$state', '$stateParams', '$scope', 'edEmployeeService', 'edSidebarService'];\n\n\tfunction edEmployeeMapCtrl($state, $stateParams, $scope, edEmployeeService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.unknownLocationEmployee = false;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.updateMappedEmployeeById($stateParams.employee);\n\t\t\t} else if (vm.mappedEmployee) {\n\t\t\t\tlocateEmployee(vm.mappedEmployee);\n\t\t\t}\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tlocateEmployee(mappedEmployee);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateEmployee(employee) {\n\t\t\tif (employee) {\n\t\t\t\tif (employee.seat) {\n\t\t\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t\t\t} else {\n\t\t\t\t\tvm.unknownLocationEmployee = true;\n\t\t\t\t\tvm.mappedEmployee = employee;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvm.unknownLocationEmployee = false;\n\t\t\t\tvm.mappedEmployee = null;\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edOrgChartCtrl', edOrgChartCtrl);\n\n\tedOrgChartCtrl.$inject = ['$scope', '$state', '$stateParams', 'edEmployeeService', 'edSidebarService', '_'];\n\n\tfunction edOrgChartCtrl($scope, $state, $stateParams, edEmployeeService, edSidebarService, _) {\n\t\tvar employees = edEmployeeService.getAllEmployees();\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\tvm.manager = null;\n\t\tvm.directReports = [];\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(getEmployeeById);\n\t\t\t} else if (vm.selectedEmployee) {\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getEmployeeById(employees) {\n\t\t\tvar employee = _.findWhere(employees, {'eid': parseInt($stateParams.employee)});\n\t\t\tif (employee) {\n\t\t\t\tif (employee !== vm.selectedEmployee) {\n\t\t\t\t\tselectEmployee(employee);\n\t\t\t\t}\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getManager() {\n\t\t\tvm.manager = _.findWhere(employees, {'eid': vm.selectedEmployee.mid});\n\t\t}\n\n\t\tfunction getDirectReports() {\n\t\t\tvm.directReports = _.sortBy(_.filter(employees, {'mid': vm.selectedEmployee.eid}), 'lastName');\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(employee)[0];\n\t\t}\n\n\t\tfunction profileEmployee() {\n\t\t\t$state.go('employees.profile.employee', {'employee': vm.selectedEmployee.eid});\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\n\t\t\tif (vm.selectedEmployee) {\n\t\t\t\t$state.go('employees.org-chart', {'employee': vm.selectedEmployee.eid});\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeProfileCtrl', edEmployeeProfileCtrl);\n\n\tedEmployeeProfileCtrl.$inject = ['$scope', '$document', 'edEmployeeService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edEmployeeProfileCtrl($scope, $document, edEmployeeService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edEmployeeService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(true);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\n\t\t\tif ($stateParams.employee || $stateParams.team || $stateParams.department || $stateParams.title || $stateParams.firstname || $stateParams.lastname) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(function (employees) {\n\t\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t\tselectEmployeeById(employees);\n\t\t\t\t\t} else if ($stateParams.team) {\n\t\t\t\t\t\tselectEmployeeByTeam(employees);\n\t\t\t\t\t} else if ($stateParams.department) {\n\t\t\t\t\t\tselectEmployeeByDepartment(employees);\n\t\t\t\t\t} else if ($stateParams.title) {\n\t\t\t\t\t\tselectEmployeeByTitle(employees);\n\t\t\t\t\t} else if ($stateParams.firstname || $stateParams.lastname) {\n\t\t\t\t\t\tselectEmployeeByName(employees);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployeeById(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t// Split eid query on comma\n\t\t\t\t\tvar employeeids = $stateParams.employee.split(',');\n\t\t\t\t\tangular.forEach(employeeids, function (eid) {\n\t\t\t\t\t\t// If the employee's id is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('eid') && employee.eid === parseInt(eid)) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTeam(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.team) {\n\t\t\t\t\t// Split teams query on comma\n\t\t\t\t\tvar teams = $stateParams.team.split(',');\n\t\t\t\t\tangular.forEach(teams, function (team) {\n\t\t\t\t\t\t// If the employee's team is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('team') && employee.team.toLowerCase() === team.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByDepartment(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.department) {\n\t\t\t\t\t// Split departments query on comma\n\t\t\t\t\tvar departments = $stateParams.department.split(',');\n\t\t\t\t\tangular.forEach(departments, function (department) {\n\t\t\t\t\t\t// If the employee's department is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('department') && employee.department.toLowerCase() === department.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTitle(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.title) {\n\t\t\t\t\t// Split titles query on pipe\n\t\t\t\t\tvar titles = $stateParams.title.split('|');\n\t\t\t\t\tangular.forEach(titles, function (title) {\n\t\t\t\t\t\t// If the employee's title is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('title') && employee.title.toLowerCase() === title.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByName(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.firstname) {\n\t\t\t\t\t// Split first name query on comma\n\t\t\t\t\tvar firstnames = $stateParams.firstname.split(',');\n\t\t\t\t\t// Loop over each first name\n\t\t\t\t\tangular.forEach(firstnames, function (firstname) {\n\t\t\t\t\t\t// If the employee's first name (or nickname) is part of the query check the last names\n\t\t\t\t\t\tif (employee.firstName.toLowerCase() === firstname.toLowerCase() ||\n\t\t\t\t\t\t\t(employee.hasOwnProperty('nickname') && employee.nickname.toLowerCase() === firstname.toLowerCase())) {\n\t\t\t\t\t\t\t// If last names are on the query string\n\t\t\t\t\t\t\tif ($stateParams.lastname) {\n\t\t\t\t\t\t\t\t// Split last name query on comma\n\t\t\t\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// No last name query so only worry about the first name\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// This employee's first name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// No first name query so only worry about the last name\n\t\t\t\t} else if ($stateParams.lastname) {\n\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t// This employee's last name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedEmployeeService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t\t// If we added to selected employees, go to first page and scroll to the top\n\t\t\tif (edEmployeeService.getSelectedEmployeeAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();"],"sourceRoot":"/source/"}