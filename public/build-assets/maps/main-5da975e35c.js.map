{"version":3,"sources":["public/app/app.module.js","public/app/app.routes.js","public/app/app.run.js","public/app/committees/components/committees-topbar.controller.js","public/app/employees/components/desk.directive.js","public/app/employees/components/employee-card.directive.js","public/app/employees/components/employee-selector.controller.js","public/app/employees/components/employee-topbar.controller.js","public/app/employees/services/cached-desk-resource.service.js","public/app/employees/services/cached-employee-resource.service.js","public/app/employees/services/desk-resource.service.js","public/app/employees/services/desk.service.js","public/app/employees/services/employee-resource.service.js","public/app/employees/services/employee.service.js","public/app/employees/views/employee.controller.js","public/app/guilds/components/guilds-topbar.controller.js","public/app/committees/views/committees.controller.js","public/app/help/views/help.controller.js","public/app/printers/components/printer-card.directive.js","public/app/printers/components/printer-selector.controller.js","public/app/printers/components/printer-topbar.controller.js","public/app/printers/components/printer.directive.js","public/app/printers/services/cached-printer-resource.service.js","public/app/printers/services/printer-resource.service.js","public/app/printers/services/printer.service.js","public/app/printers/views/printer.controller.js","public/app/guilds/views/guilds.controller.js","public/app/help/components/help-topbar.controller.js","public/app/rooms/views/room.controller.js","public/app/rooms/components/room-card.directive.js","public/app/rooms/components/room-selector.controller.js","public/app/rooms/components/room-topbar.controller.js","public/app/rooms/components/room.directive.js","public/app/rooms/services/cached-room-resource.service.js","public/app/rooms/services/room-resource.service.js","public/app/rooms/services/room.service.js","public/app/employees/views/map/employee-map.controller.js","public/app/admin/components/admin-topbar.controller.js","public/app/admin/components/seat-picker-desk.directive.js","public/app/admin/components/seat-picker-topbar.controller.js","public/app/admin/components/user-selector.controller.js","public/app/admin/services/auth.service.js","public/app/admin/services/cached-user-resource.service.js","public/app/admin/services/employee-admin.service.js","public/app/admin/services/user-resource.service.js","public/app/admin/services/user.service.js","public/app/employees/views/org-chart/org-chart.controller.js","public/app/admin/views/create-employee.controller.js","public/app/admin/views/create-user.controller.js","public/app/admin/views/login.controller.js","public/app/admin/views/seat-picker-floor.controller.js","public/app/admin/views/seat-picker.controller.js","public/app/admin/views/update-employee.controller.js","public/app/admin/views/update-user.controller.js","public/app/admin/views/user-list.controller.js","public/app/admin/views/user-profile.controller.js","public/app/employees/views/profile/employee-profile.controller.js","public/app/help/views/org-chart/help-org-chart.controller.js","public/app/help/views/profile/help-profile.controller.js","public/app/help/views/location/help-location.controller.js","public/app/printers/views/profile/printer-profile.controller.js","public/app/rooms/views/map/room-map.controller.js","public/app/rooms/views/profile/room-profile.controller.js","public/app/common/components/artifact.directive.js","public/app/common/components/footer.directive.js","public/app/common/components/header.directive.js","public/app/common/components/index-topbar.controller.js","public/app/common/components/sidebar-left.directive.js","public/app/help/views/navigation/help-navigation.controller.js","public/app/printers/views/map/printer-map.controller.js","public/app/common/utilities/nanoscroller.directive.js","public/app/common/utilities/svg.directive.js","public/app/common/filters/custom-filters.js","public/app/common/services/artifact-resource.service.js","public/app/common/services/artifact.service.js","public/app/common/services/cached-artifact-resource.service.js","public/app/common/services/identity.service.js","public/app/common/services/notifier.service.js","public/app/common/services/sidebar.service.js","public/app/common/views/floor.controller.js","public/app/common/views/index.controller.js"],"names":["angular","module","constant","window","_","configure","$stateProvider","$urlRouterProvider","$locationProvider","$compileProvider","routeRoleChecks","superAdmin","requireSuperAdmin","admin","requireAdmin","user","requireAuth","aHrefSanitizationWhitelist","html5Mode","otherwise","when","state","url","views","main","templateUrl","controller","controllerAs","topbar","sidebar","main@","sidebar@","topbar@","resolve","auth","edAuthService","authorizeCurrentUserForRoute","authorizeAuthenticatedUserForRoute","config","$inject","appRun","$rootScope","$state","$stateParams","$document","$on","event","toState","toParams","fromState","fromParams","error","go","body","scrollTop","documentElement","firstname","lastname","printer","printerbrand","room","roomtype","employee","team","department","run","edCommitteesTopbarCtrl","edIdentityService","vm","this","identity","edDesk","$timeout","$compile","edEmployeeService","linkFunc","scope","el","attrs","mappedEmployee","getMappedEmployee","seat","scrollToElement","then","addClass","append","displayName","markerLabel","$","leftPos","outerWidth","css","removeClass","find","remove","deregister","directive","restrict","replace","location","orientation","classification","xpos","ypos","link","ctrlFunc","edNotifierService","edPrinterService","edRoomService","mapEmployee","viewingProfile","mappedEmployeeArray","filter","employees","length","updateMappedPrinter","updateMappedRoom","updateMappedEmployee","viewProfile","removeAllSelectedEmployees","selectedEmployee","updateSelectedEmployees","eid","getAllEmployees","edEmployeeCard","twEmail","email","split","deselectEmployee","parent","child","children","first","floor","editEmployee","edEmployeeSelectorCtrl","$scope","selectEmployee","displayEmployeeInfoType","selectedEmployees","filterLocations","locations","push","splice","indexOf","locationFilter","nycOnly","filterFloors","floors","floorFilter","selectAll","addAllFilteredEmployees","filteredEmployees","scrollTopAnimated","info","selectNone","clearFilter","employeeName","6","7","8","buf","nyc","getSelectedEmployees","getDisplayEmployeeInfoType","allowSelectAll","getSelectMultipleEmployees","deregisterEmployeesUpdated","deregisterSelectMultipleEmployeesChange","allowSelectMultipleEmployees","deregisterDisplayEmployeeInfoTypeChange","edEmployeeTopbarCtrl","edCachedDeskResourceService","edDeskResourceService","query","desks","service","factory","edCachedEmployeeResourceService","edEmployeeResourceService","cacheBust","cacheKill","Date","getTime","ees","forEach","manager","mid","nickname","lastName","firstName","$resource","deskResource","_id","update","method","isArray","edDeskService","getAllDesks","employeeResource","prevSelected","selected","selectedEmployeeAdded","$broadcast","mapped","updateMappedEmployeeById","id","$promise","parseInt","setDisplayEmployeeInfoType","infoType","selectMultipleEmployees","unshift","getSelectedEmployeeAdded","setProfilePageNumber","pageNumber","profilePageNumber","getProfilePageNumber","setSelectMultipleEmployees","selectMultiple","lastSelectedEmployee","shift","edEmployeeCtrl","edSidebarService","activate","setLockSidebar","edGuildsTopbarCtrl","edCommitteesCtrl","currentState","current","name","committee","text","filterEmployeesByCommittee","committeeMembers","sortBy","committees","profileEmployee","edHelpCtrl","edPrinterCard","deselectPrinter","updateSelectedPrinters","mapPrinter","edPrinterSelectorCtrl","selectPrinter","displayPrinterInfoType","selectedPrinters","addAllFilteredPrinters","filteredPrinters","removeAllSelectedPrinters","printerName","brand","color","printers","getAllPrinters","getSelectedPrinters","getDisplayPrinterInfoType","getSelectMultiplePrinters","deregisterSelectMultiplePrintersChange","allowSelectMultiplePrinters","deregisterDisplayPrinterInfoTypeChange","edPrinterTopbarCtrl","edPrinter","mappedPrinter","getMappedPrinter","mappedPrinterArray","selectedPrinter","edCachedPrinterResourceService","edPrinterResourceService","printerResource","selectedPrinterAdded","setDisplayPrinterInfoType","selectMultiplePrinters","getSelectedPrinterAdded","setSelectMultiplePrinters","lastSelectedPrinter","edPrinterCtrl","edGuildsCtrl","guild","filterEmployeesByGuild","guildMembers","guilds","edHelpTopbarCtrl","edRoomCtrl","edRoomCard","deselectRoom","updateSelectedRooms","mapRoom","edRoomSelectorCtrl","selectRoom","displayRoomInfoType","selectedRooms","addAllFilteredRooms","filteredRooms","removeAllSelectedRooms","roomName","type","rooms","getAllRooms","getSelectedRooms","getDisplayRoomInfoType","getSelectMultipleRooms","deregisterSelectMultipleRoomsChange","allowSelectMultipleRooms","deregisterDisplayRoomInfoTypeChange","edRoomTopbarCtrl","edRoom","mappedRoom","getMappedRoom","number","mappedRoomArray","selectedRoom","edCachedRoomResourceService","edRoomResourceService","roomResource","selectedRoomAdded","setDisplayRoomInfoType","selectMultipleRooms","getSelectedRoomAdded","setSelectMultipleRooms","lastSelectedRoom","edEmployeeMapCtrl","locateEmployee","unknownLocationEmployee","edAdminTopbarCtrl","edSeatPickerDesk","edEmployeeAdminService","assignSeat","newEmployeeData","updateEmployee","notify","edSeatPickerTopbarCtrl","edUserSelectorCtrl","edUserService","selectUser","setSelectedUser","users","getAllUsers","selectedUser","getSelectedUser","deregisterUserUpdated","$http","$q","edUserResourceService","authenticateUser","username","password","dfd","defer","post","response","data","success","extend","currentUser","promise","createUser","newUserData","newUser","$save","reject","reason","updateCurrentUser","clone","copy","$update","updateUser","currentUserClone","logoutUser","logout","undefined","role","isAuthorized","isAuthenticated","edCachedUserResourceService","Upload","createEmployee","newEmployee","uploadEmployeePhoto","employeePhoto","employeeData","upload","file","fileName","pop","resp","console","log","status","evt","progressPercentage","loaded","total","userResource","prototype","isAdmin","roles","edOrgChartCtrl","getEmployeeById","getManager","getDirectReports","findWhere","directReports","edCreateEmployeeCtrl","resetForm","createManagerList","phone","ext","title","hasReports","managers","include","image","toLowerCase","createEmployeeForm","$setPristine","locationOptions","value","departments","employeesUpdatedEvent","edCreateUserCtrl","edLoginCtrl","signin","edSeatPickerFloorCtrl","checkForSelectedEmployee","locationAndFloor","locationName","deskFilter","desk","deregisterEmployee","edSeatPickerCtrl","setRemoteEmployee","edUpdateEmployeeCtrl","populateEmployee","filterManagers","filteredManagers","imageFile","deleteEmployee","deletedEmployee","directReport","deleted","cancelUpdateEmployee","selectedEmployeeChangeEvent","edUpdateUserCtrl","populateUserInfo","selectedUserChangeEvent","edUserListCtrl","edUserProfileCtrl","fname","lname","edEmployeeProfileCtrl","selectEmployeeById","selectEmployeeByTeam","selectEmployeeByDepartment","selectEmployeeByTitle","selectEmployeeByName","match","employeeids","hasOwnProperty","teams","reverse","titles","firstnames","lastnames","changePage","newPageNumber","currentPage","edHelpOrgChartCtrl","edHelpProfileCtrl","edHelpLocationCtrl","edPrinterProfileCtrl","selectPrinterByName","selectPrinterByBrand","toLocaleLowerCase","printerbrands","edRoomMapCtrl","locateRoom","edRoomProfileCtrl","selectRoomByName","selectRoomByType","roomtypes","edArtifact","edFooter","signout","edHeader","edIndexTopbarCtrl","edSidebarLeft","sidebarLocked","sidebarOpen","toggleSidebar","closeSidebar","scrollSidebarTop","nanoScroller","scroll","getLockSidebar","edHelpNavigationCtrl","edPrinterMapCtrl","locatePrinter","edNanoscroller","element","preventPageScrolling","template","svg","imgId","imgClass","imgUrl","path","filename","get","i","constructor","attr","removeAttr","replaceWith","edPhoneNumberFilter","tel","country","city","toString","trim","slice","edArtifactResourceService","artifactResource","edArtifactService","edCachedArtifactResourceService","getAllArtifacts","artifacts","$window","bootstrappedUserObject","edToastr","msg","options","showDuration","hideDuration","toastr","lock","edFloorCtrl","roomFilter","printerFilter","artifactFilter","artifact","mapEmployeeBySeat","mapPrinterByName","mapRoomByName","deregisterPrinter","deregisterRoom","edIndexCtrl"],"mappings":"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","file":"main-5da975e35c.js","sourcesContent":["(function () {\n\t'use strict';\n\tangular.module('app', ['ngResource', 'ui.router', 'ngFileUpload', 'angular.filter', 'ngAnimate', 'duScroll', 'angular.vertilize', 'angularUtils.directives.dirPagination', 'focus-if']);\n\n\tangular.module('app').constant('_', window._);\n})();","(function () {\n\t'use strict';\n\tangular.module('app').config(configure);\n\n\tconfigure.$inject = ['$stateProvider', '$urlRouterProvider', '$locationProvider', '$compileProvider'];\n\n\tfunction configure($stateProvider, $urlRouterProvider, $locationProvider, $compileProvider) {\n\t\tvar routeRoleChecks = {\n\t\t\tsuperAdmin: requireSuperAdmin,\n\t\t\tadmin: requireAdmin,\n\t\t\tuser: requireAuth\n\t\t};\n\n\t\t// Allow some extra protocols\n\t\t$compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|chrome-extension|im|sip):/);\n\n\t\t$locationProvider.html5Mode(true);\n\n\t\t// for any unmatched url\n\t\t$urlRouterProvider.otherwise('/');\n\n\t\t$urlRouterProvider.when('/employees/', '/employees');\n\t\t$urlRouterProvider.when('/printers/', '/printers');\n\t\t$urlRouterProvider.when('/rooms/', '/rooms');\n\t\t$urlRouterProvider.when('/guilds/', '/guilds');\n\t\t$urlRouterProvider.when('/committees/', '/committees');\n\n\t\t$stateProvider\n\t\t\t.state('home', {\n\t\t\t\turl: '/',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/index',\n\t\t\t\t\t\tcontroller: 'edIndexCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/components/index-topbar',\n\t\t\t\t\t\tcontroller: 'edIndexTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees', {\n\t\t\t\turl: '/employees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/employee',\n\t\t\t\t\t\tcontroller: 'edEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-topbar',\n\t\t\t\t\t\tcontroller: 'edEmployeeTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile', {\n\t\t\t\turl: '/profile/?firstname&lastname',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.department', {\n\t\t\t\turl: 'department/:department',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.title', {\n\t\t\t\turl: 'title/:title',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.team', {\n\t\t\t\turl: 'team/:team',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.employee', {\n\t\t\t\turl: 'employee/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.org-chart', {\n\t\t\t\turl: '/org-chart/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/org-chart/org-chart',\n\t\t\t\t\t\tcontroller: 'edOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map', {\n\t\t\t\turl: '/map/?employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/map/employee-map',\n\t\t\t\t\t\tcontroller: 'edEmployeeMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-6', {\n\t\t\t\turl: 'buf-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-7', {\n\t\t\t\turl: 'buf-7/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-8', {\n\t\t\t\turl: 'buf-8/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.nyc-6', {\n\t\t\t\turl: 'nyc-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers', {\n\t\t\t\turl: '/printers',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/printer',\n\t\t\t\t\t\tcontroller: 'edPrinterCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-selector',\n\t\t\t\t\t\tcontroller: 'edPrinterSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-topbar',\n\t\t\t\t\t\tcontroller: 'edPrinterTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.name', {\n\t\t\t\turl: '/name/:printer',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.brand', {\n\t\t\t\turl: '/brand/:printerbrand',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/map/printer-map',\n\t\t\t\t\t\tcontroller: 'edPrinterMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms', {\n\t\t\t\turl: '/rooms',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/room',\n\t\t\t\t\t\tcontroller: 'edRoomCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-selector',\n\t\t\t\t\t\tcontroller: 'edRoomSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-topbar',\n\t\t\t\t\t\tcontroller: 'edRoomTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.name', {\n\t\t\t\turl: '/name/:room',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.type', {\n\t\t\t\turl: '/type/:roomtype',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/map/room-map',\n\t\t\t\t\t\tcontroller: 'edRoomMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin', {\n\t\t\t\turl: '/admin',\n\t\t\t\t'views': {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/login',\n\t\t\t\t\t\tcontroller: 'edLoginCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/admin-topbar',\n\t\t\t\t\t\tcontroller: 'edAdminTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.users', {\n\t\t\t\turl: '/users',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-list',\n\t\t\t\t\t\tcontroller: 'edUserListCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.user-profile', {\n\t\t\t\turl: '/user-profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-profile',\n\t\t\t\t\t\tcontroller: 'edUserProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.user\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-user', {\n\t\t\t\turl: '/create-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-user',\n\t\t\t\t\t\tcontroller: 'edCreateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-user', {\n\t\t\t\turl: '/update-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-user',\n\t\t\t\t\t\tcontroller: 'edUpdateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/user-selector',\n\t\t\t\t\t\tcontroller: 'edUserSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-employee', {\n\t\t\t\turl: '/create-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-employee',\n\t\t\t\t\t\tcontroller: 'edCreateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-employee', {\n\t\t\t\turl: '/update-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-employee',\n\t\t\t\t\t\tcontroller: 'edUpdateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker', {\n\t\t\t\turl: '/seat-picker',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker',\n\t\t\t\t\t\tcontroller: 'edSeatPickerCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-topbar',\n\t\t\t\t\t\tcontroller: 'edSeatPickerTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-6', {\n\t\t\t\turl: '/buf-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-7', {\n\t\t\t\turl: '/buf-7',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-8', {\n\t\t\t\turl: '/buf-8',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.nyc-6', {\n\t\t\t\turl: '/nyc-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds', {\n\t\t\t\turl: '/guilds',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/components/guilds-topbar',\n\t\t\t\t\t\tcontroller: 'edGuildsTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds.front-end', {\n\t\t\t\turl: '/front-end',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees', {\n\t\t\t\turl: '/committees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/components/committees-topbar',\n\t\t\t\t\t\tcontroller: 'edCommitteesTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.fun-games', {\n\t\t\t\turl: '/fun-games',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.diversity', {\n\t\t\t\turl: '/diversity',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.wellness', {\n\t\t\t\turl: '/wellness',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.beautification', {\n\t\t\t\turl: '/beautification',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help', {\n\t\t\t\turl: '/help',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/help',\n\t\t\t\t\t\tcontroller: 'edHelpCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/components/help-topbar',\n\t\t\t\t\t\tcontroller: 'edHelpTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.navigation', {\n\t\t\t\turl: '/navigation',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/navigation/help-navigation',\n\t\t\t\t\t\tcontroller: 'edHelpNavigationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/profile/help-profile',\n\t\t\t\t\t\tcontroller: 'edHelpProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.location', {\n\t\t\t\turl: '/location',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/location/help-location',\n\t\t\t\t\t\tcontroller: 'edHelpLocationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.org-chart', {\n\t\t\t\turl: '/org-chart',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/org-chart/help-org-chart',\n\t\t\t\t\t\tcontroller: 'edHelpOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trequireAdmin.$inject = ['edAuthService'];\n\n\tfunction requireAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('admin');\n\t}\n\n\trequireSuperAdmin.$inject = ['edAuthService'];\n\n\tfunction requireSuperAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('super-admin');\n\t}\n\n\trequireAuth.$inject = ['edAuthService'];\n\n\tfunction requireAuth(edAuthService) {\n\t\treturn edAuthService.authorizeAuthenticatedUserForRoute();\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').run(appRun);\n\n\tappRun.$inject = ['$rootScope', '$state', '$stateParams', '$document'];\n\n\tfunction appRun($rootScope, $state, $stateParams, $document) {\n\t\t$rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\n\t\t\tif (error === 'not authorized') {\n\t\t\t\t$state.go('admin');\n\t\t\t}\n\t\t});\n\n\t\t// Clear state params and scroll to the top on route changes\n\t\t$rootScope.$on('$stateChangeSuccess', function () {\n\t\t\t$document[0].body.scrollTop = $document[0].documentElement.scrollTop = 0;\n\t\t\t$stateParams.firstname = null;\n\t\t\t$stateParams.lastname = null;\n\t\t\t$stateParams.printer = null;\n\t\t\t$stateParams.printerbrand = null;\n\t\t\t$stateParams.room = null;\n\t\t\t$stateParams.roomtype = null;\n\t\t\t$stateParams.employee = null;\n\t\t\t$stateParams.team = null;\n\t\t\t$stateParams.department = null;\n\t\t});\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesTopbarCtrl', edCommitteesTopbarCtrl);\n\n\tedCommitteesTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edCommitteesTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edDesk', edDesk);\n\n\tedDesk.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edEmployeeService', '_'];\n\n\tfunction edDesk($stateParams, $document, $timeout, $compile, edEmployeeService, _) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedEmployee = edEmployeeService.getMappedEmployee();\n\n\t\t\t// If coming from the profile page via a link in the employee card\n\t\t\tif ($stateParams.seat === attrs.seat && scope.mappedEmployee) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\t\tif (mappedEmployee && mappedEmployee.seat === attrs.seat) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edNotifierService', 'edIdentityService', 'edPrinterService', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edNotifierService, edIdentityService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.mappedEmployee = null;\n\t\tvm.identity = edIdentityService;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapEmployee(seat, location) {\n\t\t\t// Don't map employee if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedEmployeeArray = _.filter(vm.employees, function (employee) {\n\t\t\t\t\treturn employee.seat === seat && employee.location === location;\n\t\t\t\t});\n\n\t\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know who sits there.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tvar selectedEmployee = edEmployeeService.updateSelectedEmployees(edEmployeeService.getMappedEmployee())[0];\n\t\t\t$state.go('employees.profile.employee', {'employee': selectedEmployee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edEmployeeCard', edEmployeeCard);\n\n\tedEmployeeCard.$inject = ['$timeout', 'edEmployeeService'];\n\n\tfunction edEmployeeCard($timeout, edEmployeeService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/employee-card',\n\t\t\tscope: {\n\t\t\t\temployee: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.twEmail = scope.employee.email.split('@')[0] + '@towerswatson.com';\n\n\t\t\tscope.deselectEmployee = function (employee) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edIdentityService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.editEmployee = editEmployee;\n\n\t\tfunction mapEmployee(employee) {\n\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t}\n\n\t\tfunction editEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t$state.go('admin.update-employee');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeSelectorCtrl', edEmployeeSelectorCtrl);\n\n\tedEmployeeSelectorCtrl.$inject = ['$scope', '$document', 'edEmployeeService', 'edNotifierService', 'edPrinterService', 'edRoomService'];\n\n\tfunction edEmployeeSelectorCtrl($scope, $document, edEmployeeService, edNotifierService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.displayEmployeeInfoType = edEmployeeService.getDisplayEmployeeInfoType();\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edEmployeeService.getSelectMultipleEmployees();\n\t\tvm.filteredEmployees = edEmployeeService.getAllEmployees();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tif (vm.displayEmployeeInfoType === 'profile') {\n\t\t\t\tvm.selectedEmployees = edEmployeeService.updateSelectedEmployees(employee);\n\t\t\t}\n\t\t\telse if (vm.displayEmployeeInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(employee) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (employee.location) {\n\t\t\t\t\treturn vm.locations.indexOf(employee.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(employee) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the employee is on a floor in BUF\n\t\t\t\t\tif (employee.floor && employee.location === 'buf') {\n\t\t\t\t\t\t// Include this employee if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(employee.floor) > -1;\n\t\t\t\t\t// Include this employee if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t// Include all filtered employees if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t// Include all filtered employees if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedEmployees = edEmployeeService.addAllFilteredEmployees(vm.filteredEmployees);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif (vm.team === 'Prestige Worldwide') {\n\t\t\t\tedNotifierService.info('Investors?  Possibly you!');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedEmployees = edEmployeeService.removeAllSelectedEmployees();\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.employeeName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.department = '';\n\t\t\tvm.team = '';\n\t\t}\n\n\t\tvar deregisterEmployeesUpdated = $scope.$on('employeesUpdated', function (event, employees) {\n\t\t\tvm.employees = employees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployeesUpdated);\n\n\t\tvar deregisterSelectMultipleEmployeesChange = $scope.$on('selectMultipleEmployeesChange', function (event, allowSelectMultipleEmployees) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleEmployeesChange);\n\n\t\tvar deregisterDisplayEmployeeInfoTypeChange = $scope.$on('displayEmployeeInfoTypeChange', function (event, displayEmployeeInfoType) {\n\t\t\tvm.displayEmployeeInfoType = displayEmployeeInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayEmployeeInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeTopbarCtrl', edEmployeeTopbarCtrl);\n\n\tfunction edEmployeeTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedDeskResourceService', edCachedDeskResourceService);\n\n\tedCachedDeskResourceService.$inject = ['edDeskResourceService'];\n\n\tfunction edCachedDeskResourceService(edDeskResourceService) {\n\t\tvar desks;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!desks) {\n\t\t\t\tdesks = edDeskResourceService.query();\n\t\t\t}\n\n\t\t\treturn desks;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedEmployeeResourceService', edCachedEmployeeResourceService);\n\n\tedCachedEmployeeResourceService.$inject = ['edEmployeeResourceService', '_'];\n\n\tfunction edCachedEmployeeResourceService(edEmployeeResourceService, _) {\n\t\tvar employees;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!employees || cacheBust) {\n\t\t\t\temployees = edEmployeeResourceService.query({cacheKill: new Date().getTime()}, function(ees) {\n\t\t\t\t\tangular.forEach(ees, function (employee) {\n\t\t\t\t\t\t// Create a manager property for each employee\n\t\t\t\t\t\tvar manager = _.find(ees, {'eid': employee.mid});\n\t\t\t\t\t\tif (manager) {\n\t\t\t\t\t\t\tif (manager.nickname) {\n\t\t\t\t\t\t\t\temployee.manager = manager.nickname + ' ' + manager.lastName;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\temployee.manager = manager.firstName + ' ' + manager.lastName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Create a displayName property for each employee\n\t\t\t\t\t\tif (employee.nickname) {\n\t\t\t\t\t\t\temployee.displayName = employee.nickname + ' ' + employee.lastName;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temployee.displayName = employee.firstName + ' ' + employee.lastName;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn employees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskResourceService', edDeskResourceService);\n\n\tedDeskResourceService.$inject = ['$resource'];\n\n\tfunction edDeskResourceService($resource) {\n\t\tvar deskResource = $resource('/api/desks/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn deskResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskService', edDeskService);\n\n\tedDeskService.$inject = ['edCachedDeskResourceService'];\n\n\tfunction edDeskService(edCachedDeskResourceService) {\n\t\tvar service = {\n\t\t\tgetAllDesks: getAllDesks\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction getAllDesks() {\n\t\t\treturn edCachedDeskResourceService.query();\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeResourceService', edEmployeeResourceService);\n\n\tedEmployeeResourceService.$inject = ['$resource'];\n\n\tfunction edEmployeeResourceService($resource) {\n\t\tvar employeeResource = $resource('/api/employees/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn employeeResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeService', edEmployeeService);\n\n\tedEmployeeService.$inject = ['$rootScope', 'edCachedEmployeeResourceService', 'edNotifierService', '_'];\n\n\tfunction edEmployeeService($rootScope, edCachedEmployeeResourceService, edNotifierService, _) {\n\t\tvar selectedEmployees = [];\n\t\tvar selectedEmployeeAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedEmployee = null;\n\t\tvar selectMultipleEmployees = false;\n\t\tvar displayEmployeeInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllEmployees: getAllEmployees,\n\t\t\tgetSelectedEmployees: getSelectedEmployees,\n\t\t\taddAllFilteredEmployees: addAllFilteredEmployees,\n\t\t\tupdateSelectedEmployees: updateSelectedEmployees,\n\t\t\tremoveAllSelectedEmployees: removeAllSelectedEmployees,\n\t\t\tsetSelectMultipleEmployees: setSelectMultipleEmployees,\n\t\t\tgetSelectMultipleEmployees: getSelectMultipleEmployees,\n\t\t\tupdateMappedEmployee: updateMappedEmployee,\n\t\t\tupdateMappedEmployeeById: updateMappedEmployeeById,\n\t\t\tgetMappedEmployee: getMappedEmployee,\n\t\t\tsetDisplayEmployeeInfoType: setDisplayEmployeeInfoType,\n\t\t\tgetDisplayEmployeeInfoType: getDisplayEmployeeInfoType,\n\t\t\tgetSelectedEmployeeAdded: getSelectedEmployeeAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all employees from the database (or memory)\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} employees\n\t\t */\n\t\tfunction getAllEmployees(cacheBust) {\n\t\t\treturn edCachedEmployeeResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected employees\n\t\t *\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction getSelectedEmployees() {\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered employees to the selected employees\n\t\t * Removes any unfiltered employees from selected employees\n\t\t *\n\t\t * @param {Array} employees to add to selected\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction addAllFilteredEmployees(employees) {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(employees, function (employee) {\n\t\t\t\temployee.selected = true;\n\t\t\t});\n\t\t\tselectedEmployees = employees;\n\t\t\tselectedEmployeeAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeeChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee\n\t\t *\n\t\t * @param {Object} employee to map / un-map\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction updateMappedEmployee(employee) {\n\t\t\t// Un-map the currently mapped employee\n\t\t\tif (!employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\tmappedEmployee = null;\n\t\t\t\t// Un-map the currently mapped employee and (possibly) map the new one\n\t\t\t} else if (employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\t// Map the new employee\n\t\t\t\tif (mappedEmployee._id !== employee._id) {\n\t\t\t\t\temployee.mapped = true;\n\t\t\t\t\tmappedEmployee = employee;\n\t\t\t\t\t// Just remove the currently mapped employee\n\t\t\t\t} else {\n\t\t\t\t\tmappedEmployee = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested employee (none currently mapped)\n\t\t\t} else if (employee && !mappedEmployee) {\n\t\t\t\temployee.mapped = true;\n\t\t\t\tmappedEmployee = employee;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedEmployeeChange', mappedEmployee);\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee using an employee ID\n\t\t */\n\t\tfunction updateMappedEmployeeById(id) {\n\t\t\tgetAllEmployees().$promise.then(function (employees) {\n\t\t\t\tvar employee = _.filter(employees, function (employee) {\n\t\t\t\t\treturn employee.eid === parseInt(id);\n\t\t\t\t});\n\t\t\t\tif (employee.length > 0) {\n\t\t\t\t\tupdateMappedEmployee(employee[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('I\\'m not sure who you\\'re looking for.');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped employee\n\t\t *\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction getMappedEmployee() {\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayEmployeeInfoType(infoType) {\n\t\t\tdisplayEmployeeInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayEmployeeInfoTypeChange', displayEmployeeInfoType);\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayEmployeeInfoType() {\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected employees\n\t\t *\n\t\t * @param {Object} employee the employee to add / remove from selected employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction updateSelectedEmployees(employee) {\n\t\t\t// Allowed to have multiple employees selected\n\t\t\tif (selectMultipleEmployees) {\n\t\t\t\t// This employee is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\tselectedEmployees.unshift(employee);\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees.splice(selectedEmployees.indexOf(employee), 1);\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple employees selected\n\t\t\t} else {\n\t\t\t\t// This employee is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\t// set all selected employee's selected property to false\n\t\t\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this employee's selected property to true\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\t// replace the array of selected employees with just this one employee\n\t\t\t\t\tselectedEmployees = [employee];\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees = [];\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeeChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected employees\n\t\t */\n\t\tfunction removeAllSelectedEmployees() {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedEmployees = [];\n\t\t\tselectedEmployeeAdded = false;\n\t\t\t$rootScope.$broadcast('selectedEmployeeChange', selectedEmployees);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected employee was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected employees added\n\t\t */\n\t\tfunction getSelectedEmployeeAdded() {\n\t\t\treturn selectedEmployeeAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the employee profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on employee profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the employee profile page number\n\t\t *\n\t\t * @return {Number} employee profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one employee at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction setSelectMultipleEmployees(selectMultiple) {\n\t\t\tselectMultipleEmployees = selectMultiple;\n\t\t\t// If there are multiple selected employees, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedEmployees.length > 1) {\n\t\t\t\tvar lastSelectedEmployee = selectedEmployees.shift();\n\t\t\t\t// This employee will be reselected in updateSelectedEmployees\n\t\t\t\tlastSelectedEmployee.selected = false;\n\t\t\t\tselectedEmployees = updateSelectedEmployees(lastSelectedEmployee);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleEmployeesChange', selectMultipleEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple employees to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple employee\n\t\t */\n\t\tfunction getSelectMultipleEmployees() {\n\t\t\treturn selectMultipleEmployees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeCtrl', edEmployeeCtrl);\n\n\tedEmployeeCtrl.$inject = ['edSidebarService'];\n\n\tfunction edEmployeeCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsTopbarCtrl', edGuildsTopbarCtrl);\n\n\tedGuildsTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edGuildsTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesCtrl', edCommitteesCtrl);\n\n\tedCommitteesCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edCommitteesCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.committee = null;\n\t\tvm.committeeMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the committee based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.committee = {\n\t\t\t\tname: currentState.split('.')[1]\n\t\t\t};\n\n\t\t\tif (vm.committee.name) {\n\t\t\t\tvm.committee.text = vm.committee.name;\n\n\t\t\t\tif (vm.committee.name === 'fun-games') {\n\t\t\t\t\tvm.committee.text = 'Fun & Games';\n\t\t\t\t}\n\n\t\t\t\tif (vm.committee.name === 'diversity') {\n\t\t\t\t\tvm.committee.text = 'Cultural Diversity & Community Outreach';\n\t\t\t\t}\n\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByCommittee);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByCommittee(employees) {\n\t\t\tvm.committeeMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.committees && _.indexOf(employee.committees, vm.committee.name) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpCtrl', edHelpCtrl);\n\n\tedHelpCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinterCard', edPrinterCard);\n\n\tedPrinterCard.$inject = ['$timeout', 'edPrinterService'];\n\n\tfunction edPrinterCard($timeout, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer-card',\n\t\t\tscope: {\n\t\t\t\tprinter: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.deselectPrinter = function (printer) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService'];\n\n\tfunction ctrlFunc($state, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\n\t\tfunction mapPrinter(printer) {\n\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterSelectorCtrl', edPrinterSelectorCtrl);\n\n\tedPrinterSelectorCtrl.$inject = ['$scope', '$document', 'edPrinterService', 'edEmployeeService', 'edRoomService'];\n\n\tfunction edPrinterSelectorCtrl($scope, $document, edPrinterService, edEmployeeService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.displayPrinterInfoType = edPrinterService.getDisplayPrinterInfoType();\n\t\tvm.selectPrinter = selectPrinter;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edPrinterService.getSelectMultiplePrinters();\n\t\tvm.filteredEmployees = edPrinterService.getAllPrinters();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction selectPrinter(printer) {\n\t\t\tif (vm.displayPrinterInfoType === 'profile') {\n\t\t\t\tvm.selectedPrinters = edPrinterService.updateSelectedPrinters(printer);\n\t\t\t}\n\t\t\telse if (vm.displayPrinterInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(printer) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (printer.location) {\n\t\t\t\t\treturn vm.locations.indexOf(printer.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(printer) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the printer is on a floor in BUF\n\t\t\t\t\tif (printer.floor && printer.location === 'buf') {\n\t\t\t\t\t\t// Include this printer if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(printer.floor) > -1;\n\t\t\t\t\t\t// Include this printer if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered printer if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered printer if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedPrinters = edPrinterService.addAllFilteredPrinters(vm.filteredPrinters);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedPrinters = edPrinterService.removeAllSelectedPrinters();\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.printerName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.brand = '';\n\t\t\tvm.color = '';\n\t\t}\n\n\t\tvar deregisterSelectMultiplePrintersChange = $scope.$on('selectMultiplePrintersChange', function (event, allowSelectMultiplePrinters) {\n\t\t\tvm.allowSelectAll = allowSelectMultiplePrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultiplePrintersChange);\n\n\t\tvar deregisterDisplayPrinterInfoTypeChange = $scope.$on('displayPrinterInfoTypeChange', function (event, displayPrinterInfoType) {\n\t\t\tvm.displayPrinterInfoType = displayPrinterInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayPrinterInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterTopbarCtrl', edPrinterTopbarCtrl);\n\n\tfunction edPrinterTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinter', edPrinter);\n\n\tedPrinter.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edPrinterService'];\n\n\tfunction edPrinter($stateParams, $document, $timeout, $compile, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\torientation: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\t\t// If coming from the profile page via a link in the printer card\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedPrinter) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\t\tif (mappedPrinter && mappedPrinter.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService', 'edNotifierService', 'edEmployeeService', 'edRoomService', '_'];\n\n\tfunction ctrlFunc($state, edPrinterService, edNotifierService, edEmployeeService, edRoomService, _) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.mappedPrinter = null;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapPrinter(name) {\n\t\t\t// Don't map printer if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedPrinterArray = _.filter(vm.printers, function (printer) {\n\t\t\t\t\treturn printer.name === name;\n\t\t\t\t});\n\n\t\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this printer.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\tvar selectedPrinter = edPrinterService.updateSelectedPrinters(edPrinterService.getMappedPrinter())[0];\n\t\t\t$state.go('printers.profile.name', {'printer': selectedPrinter.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedPrinterResourceService', edCachedPrinterResourceService);\n\n\tedCachedPrinterResourceService.$inject = ['edPrinterResourceService'];\n\n\tfunction edCachedPrinterResourceService(edPrinterResourceService) {\n\t\tvar printers;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!printers) {\n\t\t\t\tprinters = edPrinterResourceService.query();\n\t\t\t}\n\n\t\t\treturn printers;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterResourceService', edPrinterResourceService);\n\n\tedPrinterResourceService.$inject = ['$resource'];\n\n\tfunction edPrinterResourceService($resource) {\n\t\tvar printerResource = $resource('/api/printers/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn printerResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterService', edPrinterService);\n\n\tedPrinterService.$inject = ['$rootScope', 'edCachedPrinterResourceService'];\n\n\tfunction edPrinterService($rootScope, edCachedPrinterResourceService) {\n\t\tvar selectedPrinters = [];\n\t\tvar selectedPrinterAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedPrinter = null;\n\t\tvar selectMultiplePrinters = false;\n\t\tvar displayPrinterInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllPrinters: getAllPrinters,\n\t\t\tgetSelectedPrinters: getSelectedPrinters,\n\t\t\taddAllFilteredPrinters: addAllFilteredPrinters,\n\t\t\tupdateSelectedPrinters: updateSelectedPrinters,\n\t\t\tremoveAllSelectedPrinters: removeAllSelectedPrinters,\n\t\t\tsetSelectMultiplePrinters: setSelectMultiplePrinters,\n\t\t\tgetSelectMultiplePrinters: getSelectMultiplePrinters,\n\t\t\tupdateMappedPrinter: updateMappedPrinter,\n\t\t\tgetMappedPrinter: getMappedPrinter,\n\t\t\tsetDisplayPrinterInfoType: setDisplayPrinterInfoType,\n\t\t\tgetDisplayPrinterInfoType: getDisplayPrinterInfoType,\n\t\t\tgetSelectedPrinterAdded: getSelectedPrinterAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all printers from the database (or memory)\n\t\t *\n\t\t * @return {Array} printers\n\t\t */\n\t\tfunction getAllPrinters() {\n\t\t\treturn edCachedPrinterResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected printers\n\t\t *\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction getSelectedPrinters() {\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered printers to the selected printers\n\t\t * Removes any unfiltered printers from selected printers\n\t\t *\n\t\t * @param {Array} printers to add to selected\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction addAllFilteredPrinters(printers) {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(printers, function (printer) {\n\t\t\t\tprinter.selected = true;\n\t\t\t});\n\t\t\tselectedPrinters = printers;\n\t\t\tselectedPrinterAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrinterChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped printer\n\t\t *\n\t\t * @param {Object} printer to map / un-map\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction updateMappedPrinter(printer) {\n\t\t\t// Un-map the currently mapped printer\n\t\t\tif (!printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\tmappedPrinter = null;\n\t\t\t\t// Un-map the currently mapped printer and (possibly) map the new one\n\t\t\t} else if (printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\t// Map the new printer\n\t\t\t\tif (mappedPrinter._id !== printer._id) {\n\t\t\t\t\tprinter.mapped = true;\n\t\t\t\t\tmappedPrinter = printer;\n\t\t\t\t\t// Just remove the currently mapped printer\n\t\t\t\t} else {\n\t\t\t\t\tmappedPrinter = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested printer (none currently mapped)\n\t\t\t} else if (printer && !mappedPrinter) {\n\t\t\t\tprinter.mapped = true;\n\t\t\t\tmappedPrinter = printer;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedPrinterChange', mappedPrinter);\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped printer\n\t\t *\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction getMappedPrinter() {\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayPrinterInfoType(infoType) {\n\t\t\tdisplayPrinterInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayPrinterInfoTypeChange', displayPrinterInfoType);\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayPrinterInfoType() {\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected printers\n\t\t *\n\t\t * @param {Object} printer the printer to add / remove from selected printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction updateSelectedPrinters(printer) {\n\t\t\t// Allowed to have multiple printers selected\n\t\t\tif (selectMultiplePrinters) {\n\t\t\t\t// This printer is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\tselectedPrinters.unshift(printer);\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters.splice(selectedPrinters.indexOf(printer), 1);\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple printers selected\n\t\t\t} else {\n\t\t\t\t// This printer is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\t// set all selected printer's selected property to false\n\t\t\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this printer's selected property to true\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\t// replace the array of selected printers with just this one printer\n\t\t\t\t\tselectedPrinters = [printer];\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters = [];\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrinterChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected printers\n\t\t */\n\t\tfunction removeAllSelectedPrinters() {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedPrinters = [];\n\t\t\tselectedPrinterAdded = false;\n\t\t\t$rootScope.$broadcast('selectedPrinterChange', selectedPrinters);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected printer was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected printers added\n\t\t */\n\t\tfunction getSelectedPrinterAdded() {\n\t\t\treturn selectedPrinterAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the printer profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on printer profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the printer profile page number\n\t\t *\n\t\t * @return {Number} printer profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one printer at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction setSelectMultiplePrinters(selectMultiple) {\n\t\t\tselectMultiplePrinters = selectMultiple;\n\t\t\t// If there are multiple selected printers, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedPrinters.length > 1) {\n\t\t\t\tvar lastSelectedPrinter = selectedPrinters.shift();\n\t\t\t\t// This printer will be reselected in updateSelectedPrinters\n\t\t\t\tlastSelectedPrinter.selected = false;\n\t\t\t\tselectedPrinters = updateSelectedPrinters(lastSelectedPrinter);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultiplePrintersChange', selectMultiplePrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Gets wether or not we should allow multiple printers to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple printer\n\t\t */\n\t\tfunction getSelectMultiplePrinters() {\n\t\t\treturn selectMultiplePrinters;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterCtrl', edPrinterCtrl);\n\n\tedPrinterCtrl.$inject = ['edSidebarService'];\n\n\tfunction edPrinterCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsCtrl', edGuildsCtrl);\n\n\tedGuildsCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edGuildsCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.guild = null;\n\t\tvm.guildMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the guild based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.guild = currentState.split('.')[1];\n\n\t\t\tif (vm.guild) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByGuild);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByGuild(employees) {\n\t\t\tvm.guildMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.guilds && _.indexOf(employee.guilds, vm.guild) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpTopbarCtrl', edHelpTopbarCtrl);\n\n\tedHelpTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edHelpTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomCtrl', edRoomCtrl);\n\n\tedRoomCtrl.$inject = ['edSidebarService'];\n\n\tfunction edRoomCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoomCard', edRoomCard);\n\n\tedRoomCard.$inject = ['$timeout', 'edRoomService'];\n\n\tfunction edRoomCard($timeout, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room-card',\n\t\t\tscope: {\n\t\t\t\troom: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.deselectRoom = function (room) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\n\t\tfunction mapRoom(room) {\n\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomSelectorCtrl', edRoomSelectorCtrl);\n\n\tedRoomSelectorCtrl.$inject = ['$scope', '$document', 'edRoomService', 'edEmployeeService', 'edPrinterService'];\n\n\tfunction edRoomSelectorCtrl($scope, $document, edRoomService, edEmployeeService, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.displayRoomInfoType = edRoomService.getDisplayRoomInfoType();\n\t\tvm.selectRoom = selectRoom;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edRoomService.getSelectMultipleRooms();\n\t\tvm.filteredEmployees = edRoomService.getAllRooms();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction selectRoom(room) {\n\t\t\tif (vm.displayRoomInfoType === 'profile') {\n\t\t\t\tvm.selectedRooms = edRoomService.updateSelectedRooms(room);\n\t\t\t}\n\t\t\telse if (vm.displayRoomInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(room) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (room.location) {\n\t\t\t\t\treturn vm.locations.indexOf(room.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(room) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the room is on a floor in BUF\n\t\t\t\t\tif (room.floor && room.location === 'buf') {\n\t\t\t\t\t\t// Include this room if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(room.floor) > -1;\n\t\t\t\t\t\t// Include this room if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered room if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered room if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedRooms = edRoomService.addAllFilteredRooms(vm.filteredRooms);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedRooms = edRoomService.removeAllSelectedRooms();\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.roomName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.type = '';\n\t\t}\n\n\t\tvar deregisterSelectMultipleRoomsChange = $scope.$on('selectMultipleRoomsChange', function (event, allowSelectMultipleRooms) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleRoomsChange);\n\n\t\tvar deregisterDisplayRoomInfoTypeChange = $scope.$on('displayRoomInfoTypeChange', function (event, displayRoomInfoType) {\n\t\t\tvm.displayRoomInfoType = displayRoomInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayRoomInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomTopbarCtrl', edRoomTopbarCtrl);\n\n\tfunction edRoomTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoom', edRoom);\n\n\tedRoom.$inject = ['$stateParams', '$document', '$timeout', 'edRoomService'];\n\n\tfunction edRoom($stateParams, $document, $timeout, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tseat: '@',\n\t\t\t\tnumber: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedRoom = edRoomService.getMappedRoom();\n\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedRoom) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\t\tif (mappedRoom && mappedRoom.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService', 'edNotifierService', 'edEmployeeService', 'edPrinterService', '_'];\n\n\tfunction ctrlFunc($state, edRoomService, edNotifierService, edEmployeeService, edPrinterService, _) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.mappedRoom = null;\n\n\t\tfunction mapRoom(name) {\n\t\t\tvar mappedRoomArray = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.name === name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t} else {\n\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this room.');\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile(seat) {\n\t\t\tvar selectedRoom = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.seat === seat;\n\t\t\t});\n\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\tedRoomService.updateSelectedRooms(selectedRoom[0]);\n\t\t\t$state.go('rooms.profile.name', {'room': selectedRoom[0].name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedRoomResourceService', edCachedRoomResourceService);\n\n\tedCachedRoomResourceService.$inject = ['edRoomResourceService'];\n\n\tfunction edCachedRoomResourceService(edRoomResourceService) {\n\t\tvar rooms;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!rooms) {\n\t\t\t\trooms = edRoomResourceService.query();\n\t\t\t}\n\n\t\t\treturn rooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomResourceService', edRoomResourceService);\n\n\tedRoomResourceService.$inject = ['$resource'];\n\n\tfunction edRoomResourceService($resource) {\n\t\tvar roomResource = $resource('/api/rooms/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn roomResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomService', edRoomService);\n\n\tedRoomService.$inject = ['$rootScope', 'edCachedRoomResourceService'];\n\n\tfunction edRoomService($rootScope, edCachedRoomResourceService) {\n\t\tvar selectedRooms = [];\n\t\tvar selectedRoomAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedRoom = null;\n\t\tvar selectMultipleRooms = false;\n\t\tvar displayRoomInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllRooms: getAllRooms,\n\t\t\tgetSelectedRooms: getSelectedRooms,\n\t\t\taddAllFilteredRooms: addAllFilteredRooms,\n\t\t\tupdateSelectedRooms: updateSelectedRooms,\n\t\t\tremoveAllSelectedRooms: removeAllSelectedRooms,\n\t\t\tsetSelectMultipleRooms: setSelectMultipleRooms,\n\t\t\tgetSelectMultipleRooms: getSelectMultipleRooms,\n\t\t\tupdateMappedRoom: updateMappedRoom,\n\t\t\tgetMappedRoom: getMappedRoom,\n\t\t\tsetDisplayRoomInfoType: setDisplayRoomInfoType,\n\t\t\tgetDisplayRoomInfoType: getDisplayRoomInfoType,\n\t\t\tgetSelectedRoomAdded: getSelectedRoomAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all pooms from the database (or memory)\n\t\t *\n\t\t * @return {Array} rooms\n\t\t */\n\t\tfunction getAllRooms() {\n\t\t\treturn edCachedRoomResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected rooms\n\t\t *\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction getSelectedRooms() {\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered rooms to the selected rooms\n\t\t * Removes any unfiltered rooms from selected rooms\n\t\t *\n\t\t * @param {Array} rooms to add to selected\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction addAllFilteredRooms(rooms) {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(rooms, function (room) {\n\t\t\t\troom.selected = true;\n\t\t\t});\n\t\t\tselectedRooms = rooms;\n\t\t\tselectedRoomAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped room\n\t\t *\n\t\t * @param {Object} room to map / un-map\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction updateMappedRoom(room) {\n\t\t\t// Un-map the currently mapped room\n\t\t\tif (!room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\tmappedRoom = null;\n\t\t\t\t// Un-map the currently mapped room and (possibly) map the new one\n\t\t\t} else if (room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\t// Map the new room\n\t\t\t\tif (mappedRoom._id !== room._id) {\n\t\t\t\t\troom.mapped = true;\n\t\t\t\t\tmappedRoom = room;\n\t\t\t\t\t// Just remove the currently mapped room\n\t\t\t\t} else {\n\t\t\t\t\tmappedRoom = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested room (none currently mapped)\n\t\t\t} else if (room && !mappedRoom) {\n\t\t\t\troom.mapped = true;\n\t\t\t\tmappedRoom = room;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedRoomChange', mappedRoom);\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped room\n\t\t *\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction getMappedRoom() {\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayRoomInfoType(infoType) {\n\t\t\tdisplayRoomInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayRoomInfoTypeChange', displayRoomInfoType);\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayRoomInfoType() {\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected rooms\n\t\t *\n\t\t * @param {Object} room the room to add / remove from selected rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction updateSelectedRooms(room) {\n\t\t\t// Allowed to have multiple rooms selected\n\t\t\tif (selectMultipleRooms) {\n\t\t\t\t// This room is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\tselectedRooms.unshift(room);\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms.splice(selectedRooms.indexOf(room), 1);\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple rooms selected\n\t\t\t} else {\n\t\t\t\t// This room is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\t// set all selected room's selected property to false\n\t\t\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this room's selected property to true\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\t// replace the array of selected rooms with just this one room\n\t\t\t\t\tselectedRooms = [room];\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms = [];\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected rooms\n\t\t */\n\t\tfunction removeAllSelectedRooms() {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedRooms = [];\n\t\t\tselectedRoomAdded = false;\n\t\t\t$rootScope.$broadcast('selectedRoomChange', selectedRooms);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected room was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected rooms added\n\t\t */\n\t\tfunction getSelectedRoomAdded() {\n\t\t\treturn selectedRoomAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the room profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on room profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the room profile page number\n\t\t *\n\t\t * @return {Number} room profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one room at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction setSelectMultipleRooms(selectMultiple) {\n\t\t\tselectMultipleRooms = selectMultiple;\n\t\t\t// If there are multiple selected rooms, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedRooms.length > 1) {\n\t\t\t\tvar lastSelectedRoom = selectedRooms.shift();\n\t\t\t\t// This room will be reselected in updateSelectedRooms\n\t\t\t\tlastSelectedRoom.selected = false;\n\t\t\t\tselectedRooms = updateSelectedRooms(lastSelectedRoom);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleRoomsChange', selectMultipleRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Gets wether or not we should allow multiple rooms to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple room\n\t\t */\n\t\tfunction getSelectMultipleRooms() {\n\t\t\treturn selectMultipleRooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeMapCtrl', edEmployeeMapCtrl);\n\n\tedEmployeeMapCtrl.$inject = ['$state', '$stateParams', '$scope', 'edEmployeeService', 'edSidebarService'];\n\n\tfunction edEmployeeMapCtrl($state, $stateParams, $scope, edEmployeeService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.unknownLocationEmployee = false;\n\n\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\tedEmployeeService.setSelectMultipleEmployees(false);\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.updateMappedEmployeeById($stateParams.employee);\n\t\t\t} else if (vm.mappedEmployee) {\n\t\t\t\tlocateEmployee(vm.mappedEmployee);\n\t\t\t}\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tlocateEmployee(mappedEmployee);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateEmployee(employee) {\n\t\t\tif (employee) {\n\t\t\t\tif (employee.seat) {\n\t\t\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t\t\t} else {\n\t\t\t\t\tvm.unknownLocationEmployee = true;\n\t\t\t\t\tvm.mappedEmployee = employee;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvm.unknownLocationEmployee = false;\n\t\t\t\tvm.mappedEmployee = null;\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edAdminTopbarCtrl', edAdminTopbarCtrl);\n\n\tedAdminTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edAdminTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSeatPickerDesk', edSeatPickerDesk);\n\n\tfunction edSeatPickerDesk() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tfloor: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edEmployeeAdminService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edEmployeeAdminService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.assignSeat = assignSeat;\n\n\t\tfunction assignSeat(location, floor, seat) {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: location,\n\t\t\t\tfloor: floor,\n\t\t\t\tseat: seat\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee seat updated!');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerTopbarCtrl', edSeatPickerTopbarCtrl);\n\n\tfunction edSeatPickerTopbarCtrl() {\n\t\t// Put awesome here\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserSelectorCtrl', edUserSelectorCtrl);\n\n\tedUserSelectorCtrl.$inject = ['$scope', 'edUserService'];\n\n\tfunction edUserSelectorCtrl($scope, edUserService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserService.getAllUsers(false);\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\t\tvm.selectUser = selectUser;\n\n\t\tfunction selectUser(user) {\n\t\t\tedUserService.setSelectedUser(user);\n\t\t}\n\n\t\tvar deregisterUserUpdated = $scope.$on('userUpdated', function (event, users) {\n\t\t\tvm.users = users;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterUserUpdated);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edAuthService', edAuthService);\n\n\tedAuthService.$inject = ['$http', '$rootScope', '$q', 'edIdentityService', 'edUserResourceService', 'edUserService'];\n\n\tfunction edAuthService($http, $rootScope, $q, edIdentityService, edUserResourceService, edUserService) {\n\t\tvar service = {\n\t\t\tauthenticateUser: authenticateUser,\n\t\t\tcreateUser: createUser,\n\t\t\tupdateUser: updateUser,\n\t\t\tupdateCurrentUser: updateCurrentUser,\n\t\t\tlogoutUser: logoutUser,\n\t\t\tauthorizeCurrentUserForRoute: authorizeCurrentUserForRoute,\n\t\t\tauthorizeAuthenticatedUserForRoute: authorizeAuthenticatedUserForRoute\n\t\t};\n\t\treturn service;\n\n\t\tfunction authenticateUser(username, password) {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/login', {\n\t\t\t\tusername: username,\n\t\t\t\tpassword: password\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\tvar user = new edUserResourceService();\n\t\t\t\t\tangular.extend(user, response.data.user);\n\t\t\t\t\tedIdentityService.currentUser = user;\n\t\t\t\t\tdfd.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.resolve(false);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction createUser(newUserData) {\n\t\t\tvar newUser = new edUserResourceService(newUserData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewUser.$save().then(function () {\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction updateCurrentUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar clone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tclone.$update().then(function () {\n\t\t\t\tedIdentityService.currentUser = clone;\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Updates user record in database\n\t\t * Uses the selected user for updating\n\t\t *\n\t\t * @param {Object} newUserData user data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedUser = edUserService.getSelectedUser();\n\t\t\tvar clone = angular.copy(selectedUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tvar currentUserClone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(currentUserClone, newUserData);\n\t\t\tif (edIdentityService.currentUser._id === clone._id) {\n\t\t\t\tedIdentityService.currentUser = currentUserClone;\n\t\t\t}\n\t\t\tclone.$update().then(function (user) {\n\t\t\t\tedUserService.setSelectedUser(null);\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve(user);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction logoutUser() {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/logout', {\n\t\t\t\tlogout: true\n\t\t\t}).then(function () {\n\t\t\t\tedIdentityService.currentUser = undefined;\n\t\t\t\tdfd.resolve();\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction authorizeCurrentUserForRoute(role) {\n\t\t\tif (edIdentityService.isAuthorized(role)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\n\t\tfunction authorizeAuthenticatedUserForRoute() {\n\t\t\tif (edIdentityService.isAuthenticated()) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedUserResourceService', edCachedUserResourceService);\n\n\tedCachedUserResourceService.$inject = ['edUserResourceService', '_'];\n\n\tfunction edCachedUserResourceService(edUserResourceService, _) {\n\t\tvar users;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!users || cacheBust) {\n\t\t\t\tusers = edUserResourceService.query({cacheKill: new Date().getTime()});\n\t\t\t}\n\n\t\t\treturn users;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeAdminService', edEmployeeAdminService);\n\n\tedEmployeeAdminService.$inject = ['$rootScope', '$q', 'edEmployeeService', 'edEmployeeResourceService', 'Upload'];\n\n\tfunction edEmployeeAdminService($rootScope, $q, edEmployeeService, edEmployeeResourceService, Upload) {\n\t\tvar service = {\n\t\t\tupdateEmployee: updateEmployee,\n\t\t\tcreateEmployee: createEmployee,\n\t\t\tuploadEmployeePhoto: uploadEmployeePhoto\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Updates employee record in database\n\t\t * Uses the selected employee for updating\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateEmployee(newEmployeeData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\t\tvar clone = angular.copy(selectedEmployees[0]);\n\t\t\tangular.extend(clone, newEmployeeData);\n\t\t\tclone.$update().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Create employee record in database\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to insert\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction createEmployee(newEmployeeData) {\n\t\t\tvar newEmployee = new edEmployeeResourceService(newEmployeeData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewEmployee.$save().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Upload employee photo to disk\n\t\t *\n\t\t * @param {Object} employeePhoto employee photo data\n\t\t * @param {Object} employeeData employee data\n\t\t */\n\t\tfunction uploadEmployeePhoto(employeePhoto, employeeData) {\n\t\t\tUpload.upload({\n\t\t\t\turl: 'api/employees/uploadphoto',\n\t\t\t\tdata: {\n\t\t\t\t\tfile: employeePhoto,\n\t\t\t\t\tfileName: employeeData.eid + '.' + employeePhoto.name.split('.').pop()\n\t\t\t\t}\n\t\t\t}).then(function (resp) {\n\t\t\t\tconsole.log('Success ' + resp.config.data.file.name + 'uploaded. Response: ' + resp.data);\n\t\t\t}, function (resp) {\n\t\t\t\tconsole.log('Error status: ' + resp.status);\n\t\t\t}, function (evt) {\n\t\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n\t\t\t\tconsole.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserResourceService', edUserResourceService);\n\n\tedUserResourceService.$inject = ['$resource'];\n\n\tfunction edUserResourceService($resource) {\n\t\tvar userResource = $resource('/api/users/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\tuserResource.prototype.isAdmin = function () {\n\t\t\treturn this.roles && this.roles.indexOf('admin') > -1;\n\t\t};\n\n\t\treturn userResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserService', edUserService);\n\n\tedUserService.$inject = ['$rootScope', 'edCachedUserResourceService'];\n\n\tfunction edUserService($rootScope, edUserResourceService) {\n\t\tvar selectedUser = null;\n\t\tvar service = {\n\t\t\tgetAllUsers: getAllUsers,\n\t\t\tgetSelectedUser: getSelectedUser,\n\t\t\tsetSelectedUser: setSelectedUser\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all user from the database\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} users\n\t\t */\n\t\tfunction getAllUsers(cacheBust) {\n\t\t\treturn edUserResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected user\n\t\t *\n\t\t * @return {object} selected user\n\t\t */\n\t\tfunction getSelectedUser() {\n\t\t\treturn selectedUser;\n\t\t}\n\n\t\t/**\n\t\t * Updates the selected user\n\t\t *\n\t\t * @param {Object} user the user select / deselect\n\t\t * @return {Array} selected user\n\t\t */\n\t\tfunction setSelectedUser(user) {\n\t\t\t// Deselect the currently selected user\n\t\t\tif (!user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\tselectedUser = null;\n\t\t\t\t// Deselect the currently selected user and (possibly) select the new one\n\t\t\t} else if (user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\t// Select the new user\n\t\t\t\tif (selectedUser._id !== user._id) {\n\t\t\t\t\tuser.selected = true;\n\t\t\t\t\tselectedUser = user;\n\t\t\t\t\t// Just remove the currently selected user\n\t\t\t\t} else {\n\t\t\t\t\tselectedUser = null;\n\t\t\t\t}\n\t\t\t\t// Select the requested user (none currently selected)\n\t\t\t} else if (user && !selectedUser) {\n\t\t\t\tuser.selected = true;\n\t\t\t\tselectedUser = user;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectedUserChange', selectedUser);\n\t\t\treturn selectedUser;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edOrgChartCtrl', edOrgChartCtrl);\n\n\tedOrgChartCtrl.$inject = ['$scope', '$state', '$stateParams', 'edEmployeeService', 'edSidebarService', '_'];\n\n\tfunction edOrgChartCtrl($scope, $state, $stateParams, edEmployeeService, edSidebarService, _) {\n\t\tvar employees = edEmployeeService.getAllEmployees();\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\tvm.manager = null;\n\t\tvm.directReports = [];\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(getEmployeeById);\n\t\t\t} else if (vm.selectedEmployee) {\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getEmployeeById(employees) {\n\t\t\tvar employee = _.findWhere(employees, {'eid': parseInt($stateParams.employee)});\n\t\t\tif (employee) {\n\t\t\t\tif (employee !== vm.selectedEmployee) {\n\t\t\t\t\tselectEmployee(employee);\n\t\t\t\t}\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getManager() {\n\t\t\tvm.manager = _.findWhere(employees, {'eid': vm.selectedEmployee.mid});\n\t\t}\n\n\t\tfunction getDirectReports() {\n\t\t\tvm.directReports = _.sortBy(_.filter(employees, {'mid': vm.selectedEmployee.eid}), 'lastName');\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(employee)[0];\n\t\t}\n\n\t\tfunction profileEmployee() {\n\t\t\t$state.go('employees.profile.employee', {'employee': vm.selectedEmployee.eid});\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeeChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\n\t\t\tif (vm.selectedEmployee) {\n\t\t\t\t$state.go('employees.org-chart', {'employee': vm.selectedEmployee.eid});\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateEmployeeCtrl', edCreateEmployeeCtrl);\n\n\tedCreateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edSidebarService', 'edEmployeeAdminService', 'edIdentityService', '_'];\n\n\tfunction edCreateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edSidebarService, edEmployeeAdminService, edIdentityService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.createEmployee = createEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.managers = null;\n\t\tvm.newEmployee = {};\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tresetForm();\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t}\n\n\t\tfunction resetForm() {\n\t\t\tvm.newEmployee = {\n\t\t\t\teid: '',\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\tnickname: '',\n\t\t\t\temail: '',\n\t\t\t\tphone: '',\n\t\t\t\text: '',\n\t\t\t\tdepartment: '',\n\t\t\t\ttitle: '',\n\t\t\t\tteam: '',\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: '',\n\t\t\t\tfloor: '',\n\t\t\t\tseat: '',\n\t\t\t\thasReports: '',\n\t\t\t\tmid: ''\n\t\t\t};\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t}\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction createEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.newEmployee.eid,\n\t\t\t\tfirstName: vm.newEmployee.firstName,\n\t\t\t\tlastName: vm.newEmployee.lastName,\n\t\t\t\tnickname: vm.newEmployee.nickname,\n\t\t\t\temail: vm.newEmployee.email,\n\t\t\t\tphone: vm.newEmployee.phone,\n\t\t\t\text: vm.newEmployee.ext,\n\t\t\t\tdepartment: vm.newEmployee.department,\n\t\t\t\ttitle: vm.newEmployee.title,\n\t\t\t\tteam: vm.newEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.newEmployee.location,\n\t\t\t\tfloor: vm.newEmployee.floor,\n\t\t\t\tseat: vm.newEmployee.seat,\n\t\t\t\thasReports: vm.newEmployee.hasReports,\n\t\t\t\tmid: vm.newEmployee.mid\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.newEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.newEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedEmployeeAdminService.createEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('New Employee Added!');\n\t\t\t\t// upload the employee photo if there is one\n\t\t\t\tif (vm.newEmployee.image) {\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(vm.newEmployee.image, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\t// update the selected employee to add so we can update them\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + vm.newEmployee.image.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresetForm();\n\t\t\t\t$scope.createEmployeeForm.$setPristine();\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateUserCtrl', edCreateUserCtrl);\n\n\tedCreateUserCtrl.$inject = ['$state', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edCreateUserCtrl($state, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.createUser = createUser;\n\t\tvm.newUser = {};\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction createUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.newUser.username,\n\t\t\t\tpassword: vm.newUser.password,\n\t\t\t\tfirstName: vm.newUser.firstName,\n\t\t\t\tlastName: vm.newUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.newUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedAuthService.createUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account created!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edLoginCtrl', edLoginCtrl);\n\n\tedLoginCtrl.$inject = ['edIdentityService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edLoginCtrl(edIdentityService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signin = signin;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction signin(username, password) {\n\t\t\tedAuthService.authenticateUser(username, password).then(function (success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tedNotifierService.notify('You have successfully signed in!');\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Username / Password combination incorrect');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerFloorCtrl', edSeatPickerFloorCtrl);\n\n\tedSeatPickerFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$scope', 'edSidebarService', '_'];\n\n\tfunction edSeatPickerFloorCtrl(edEmployeeService, edDeskService, $state, $scope, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\tvm.desks = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tcheckForSelectedEmployee(vm.selectedEmployees);\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeeChange', function (event, selectedEmployees) {\n\t\t\tcheckForSelectedEmployee(selectedEmployees);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction checkForSelectedEmployee(selectedEmployees) {\n\t\t\tif (selectedEmployees.length !== 1) {\n\t\t\t\t$state.go('admin.seat-picker');\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerCtrl', edSeatPickerCtrl);\n\n\tedSeatPickerCtrl.$inject = ['$scope', 'edEmployeeService', 'edEmployeeAdminService', 'edNotifierService', 'edSidebarService'];\n\n\tfunction edSeatPickerCtrl($scope, edEmployeeService, edEmployeeAdminService, edNotifierService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.setSelectMultipleEmployees(false)[0];\n\t\tvm.setRemoteEmployee = setRemoteEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeeChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction setRemoteEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: 'oth',\n\t\t\t\tfloor: null,\n\t\t\t\tseat: ''\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee location set to remote');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateEmployeeCtrl', edUpdateEmployeeCtrl);\n\n\tedUpdateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edEmployeeAdminService', 'edIdentityService', 'edSidebarService', '_'];\n\n\tfunction edUpdateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edEmployeeAdminService, edIdentityService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.updateEmployee = updateEmployee;\n\t\tvm.deleteEmployee = deleteEmployee;\n\t\tvm.cancelUpdateEmployee = cancelUpdateEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.selectedEmployee = null;\n\t\tvm.managers = null;\n\t\tvm.filteredManagers = [];\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t\tvar selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateEmployee(selectedEmployees) {\n\t\t\tvm.selectedEmployee = {\n\t\t\t\teid: selectedEmployees[0].eid,\n\t\t\t\tfirstName: selectedEmployees[0].firstName,\n\t\t\t\tlastName: selectedEmployees[0].lastName,\n\t\t\t\tnickname: selectedEmployees[0].nickname,\n\t\t\t\temail: selectedEmployees[0].email,\n\t\t\t\tphone: selectedEmployees[0].phone,\n\t\t\t\text: selectedEmployees[0].ext,\n\t\t\t\ttitle: selectedEmployees[0].title,\n\t\t\t\tdepartment: selectedEmployees[0].department,\n\t\t\t\tteam: selectedEmployees[0].team,\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: selectedEmployees[0].location,\n\t\t\t\tfloor: selectedEmployees[0].floor,\n\t\t\t\tseat: selectedEmployees[0].seat,\n\t\t\t\thasReports: selectedEmployees[0].hasReports,\n\t\t\t\tmid: selectedEmployees[0].mid\n\t\t\t};\n\n\t\t\t_.forEach(selectedEmployees[0].guilds, function (guild) {\n\t\t\t\tvm.selectedEmployee.guilds[guild] = true;\n\t\t\t});\n\n\t\t\t_.forEach(selectedEmployees[0].committees, function (committee) {\n\t\t\t\tvm.selectedEmployee.committees[committee] = true;\n\t\t\t});\n\n\t\t\tfilterManagers(selectedEmployees[0]);\n\t\t}\n\n\t\t/**\n\t\t * Filter out the selected employee and their direct reports from the managers list\n\t\t *\n\t\t * @param {Object} selectedEmployee employee data for selected employee\n\t\t * @return {Boolean} to include this manager in the list\n\t\t */\n\t\tfunction filterManagers(selectedEmployee) {\n\t\t\tif (vm.managers && selectedEmployee) {\n\t\t\t\tvm.filteredManagers = _.filter(vm.managers, function (manager) {\n\t\t\t\t\t// TODO: Recursively filter out direct reports of direct reports\n\t\t\t\t\treturn (selectedEmployee.eid !== manager.eid) && (selectedEmployee.eid !== manager.mid);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t\tfilterManagers(vm.selectedEmployee);\n\t\t}\n\n\t\tvar selectedEmployeeChangeEvent = $scope.$on('selectedEmployeeChange', function (event, selectedEmployees) {\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t} else {\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedEmployeeChangeEvent);\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction updateEmployee() {\n\t\t\t// Get the employee data from the form\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.selectedEmployee.eid,\n\t\t\t\tfirstName: vm.selectedEmployee.firstName,\n\t\t\t\tlastName: vm.selectedEmployee.lastName,\n\t\t\t\tnickname: vm.selectedEmployee.nickname,\n\t\t\t\temail: vm.selectedEmployee.email,\n\t\t\t\tphone: vm.selectedEmployee.phone,\n\t\t\t\text: vm.selectedEmployee.ext,\n\t\t\t\ttitle: vm.selectedEmployee.title,\n\t\t\t\tdepartment: vm.selectedEmployee.department,\n\t\t\t\tteam: vm.selectedEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.selectedEmployee.location,\n\t\t\t\tfloor: vm.selectedEmployee.floor,\n\t\t\t\tseat: vm.selectedEmployee.seat,\n\t\t\t\thasReports: vm.selectedEmployee.hasReports,\n\t\t\t\tmid: vm.selectedEmployee.mid\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.selectedEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.selectedEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Save the image file for uploading\n\t\t\tvar imageFile = vm.selectedEmployee.imageFile;\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('Employee information updated!');\n\t\t\t\tif (imageFile) {\n\t\t\t\t\t// upload the file to the file system\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(imageFile, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + imageFile.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t\timageFile = null;\n\t\t\t\t}\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Marks employee as deleted\n\t\t * Makes all direct reports of the deleted employee direct reports of the employee's manager\n\t\t */\n\t\tfunction deleteEmployee() {\n\t\t\t// Save employee to delete for later\n\t\t\tvar deletedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\t\t// Find all employees that report to this employee and make them report to the next level up\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(\n\t\t\t\tfunction (employees) {\n\t\t\t\t\tvar eid = deletedEmployee.eid;\n\t\t\t\t\tvar mid = deletedEmployee.mid;\n\t\t\t\t\tvar directReports = _.filter(employees, {'mid': eid});\n\t\t\t\t\t_.forEach(directReports, function (directReport) {\n\t\t\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(directReport);\n\t\t\t\t\t\tedEmployeeAdminService.updateEmployee({mid: mid});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Now delete the employee that was requested to be deleted\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(deletedEmployee);\n\n\t\t\tedEmployeeAdminService.updateEmployee({deleted: true}).then(function (employee) {\n\t\t\t\tedNotifierService.notify(employee.firstName + ' ' + employee.lastName + ' deleted!');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\tfunction cancelUpdateEmployee() {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateUserCtrl', edUpdateUserCtrl);\n\n\tedUpdateUserCtrl.$inject = ['$scope', 'edUserService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edUpdateUserCtrl($scope, edUserService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tif (vm.selectedUser) {\n\t\t\t\tpopulateUserInfo(vm.selectedUser);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateUserInfo(user) {\n\t\t\tvm.selectedUser = {\n\t\t\t\tfirstName: user.firstName,\n\t\t\t\tlastName: user.lastName,\n\t\t\t\tusername: user.username,\n\t\t\t\troles: {}\n\t\t\t};\n\n\t\t\t_.forEach(user.roles, function (role) {\n\t\t\t\tvm.selectedUser.roles[role] = true;\n\t\t\t});\n\t\t}\n\n\t\tvar selectedUserChangeEvent = $scope.$on('selectedUserChange', function (event, selectedUser) {\n\t\t\tif (selectedUser) {\n\t\t\t\tpopulateUserInfo(selectedUser);\n\t\t\t} else {\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedUserChangeEvent);\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tpassword: vm.selectedUser.password,\n\t\t\t\tfirstName: vm.selectedUser.firstName,\n\t\t\t\tlastName: vm.selectedUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.selectedUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (vm.selectedUser.password && vm.selectedUser.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.selectedUser.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserListCtrl', edUserListCtrl);\n\n\tedUserListCtrl.$inject = ['edUserResourceService', 'edSidebarService'];\n\n\tfunction edUserListCtrl(edUserResourceService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserResourceService.query();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserProfileCtrl', edUserProfileCtrl);\n\n\tedUserProfileCtrl.$inject = ['$state', 'edIdentityService', 'edNotifierService', 'edAuthService', 'edUserService', 'edSidebarService'];\n\n\tfunction edUserProfileCtrl($state, edIdentityService, edNotifierService, edAuthService, edUserService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.username = edIdentityService.currentUser.username;\n\t\tvm.fname = edIdentityService.currentUser.firstName;\n\t\tvm.lname = edIdentityService.currentUser.lastName;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedUserService.setSelectedUser(edIdentityService.currentUser);\n\t\t}\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.username,\n\t\t\t\tpassword: vm.password,\n\t\t\t\tfirstName: vm.fname,\n\t\t\t\tlastName: vm.lname\n\t\t\t};\n\n\t\t\tif (vm.password && vm.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeProfileCtrl', edEmployeeProfileCtrl);\n\n\tedEmployeeProfileCtrl.$inject = ['$scope', '$document', 'edEmployeeService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edEmployeeProfileCtrl($scope, $document, edEmployeeService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edEmployeeService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(true);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\n\t\t\tif ($stateParams.employee || $stateParams.team || $stateParams.department || $stateParams.title || $stateParams.firstname || $stateParams.lastname) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(function (employees) {\n\t\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t\tselectEmployeeById(employees);\n\t\t\t\t\t} else if ($stateParams.team) {\n\t\t\t\t\t\tselectEmployeeByTeam(employees);\n\t\t\t\t\t} else if ($stateParams.department) {\n\t\t\t\t\t\tselectEmployeeByDepartment(employees);\n\t\t\t\t\t} else if ($stateParams.title) {\n\t\t\t\t\t\tselectEmployeeByTitle(employees);\n\t\t\t\t\t} else if ($stateParams.firstname || $stateParams.lastname) {\n\t\t\t\t\t\tselectEmployeeByName(employees);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployeeById(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t// Split eid query on comma\n\t\t\t\t\tvar employeeids = $stateParams.employee.split(',');\n\t\t\t\t\tangular.forEach(employeeids, function (eid) {\n\t\t\t\t\t\t// If the employee's id is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('eid') && employee.eid === parseInt(eid)) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTeam(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.team) {\n\t\t\t\t\t// Split teams query on comma\n\t\t\t\t\tvar teams = $stateParams.team.split(',');\n\t\t\t\t\tangular.forEach(teams, function (team) {\n\t\t\t\t\t\t// If the employee's team is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('team') && employee.team.toLowerCase() === team.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByDepartment(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.department) {\n\t\t\t\t\t// Split departments query on comma\n\t\t\t\t\tvar departments = $stateParams.department.split(',');\n\t\t\t\t\tangular.forEach(departments, function (department) {\n\t\t\t\t\t\t// If the employee's department is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('department') && employee.department.toLowerCase() === department.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTitle(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.title) {\n\t\t\t\t\t// Split titles query on pipe\n\t\t\t\t\tvar titles = $stateParams.title.split('|');\n\t\t\t\t\tangular.forEach(titles, function (title) {\n\t\t\t\t\t\t// If the employee's title is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('title') && employee.title.toLowerCase() === title.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByName(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.firstname) {\n\t\t\t\t\t// Split first name query on comma\n\t\t\t\t\tvar firstnames = $stateParams.firstname.split(',');\n\t\t\t\t\t// Loop over each first name\n\t\t\t\t\tangular.forEach(firstnames, function (firstname) {\n\t\t\t\t\t\t// If the employee's first name (or nickname) is part of the query check the last names\n\t\t\t\t\t\tif (employee.firstName.toLowerCase() === firstname.toLowerCase() ||\n\t\t\t\t\t\t\t(employee.hasOwnProperty('nickname') && employee.nickname.toLowerCase() === firstname.toLowerCase())) {\n\t\t\t\t\t\t\t// If last names are on the query string\n\t\t\t\t\t\t\tif ($stateParams.lastname) {\n\t\t\t\t\t\t\t\t// Split last name query on comma\n\t\t\t\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// No last name query so only worry about the first name\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// This employee's first name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// No first name query so only worry about the last name\n\t\t\t\t} else if ($stateParams.lastname) {\n\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t// This employee's last name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedEmployeeService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeeChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t\t// If we added to selected employees, go to first page and scroll to the top\n\t\t\tif (edEmployeeService.getSelectedEmployeeAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpOrgChartCtrl', edHelpOrgChartCtrl);\n\n\tedHelpOrgChartCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpOrgChartCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpProfileCtrl', edHelpProfileCtrl);\n\n\tedHelpProfileCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpProfileCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpLocationCtrl', edHelpLocationCtrl);\n\n\tedHelpLocationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpLocationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterProfileCtrl', edPrinterProfileCtrl);\n\n\tedPrinterProfileCtrl.$inject = ['$scope', '$document', 'edPrinterService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edPrinterProfileCtrl($scope, $document, edPrinterService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edPrinterService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('profile');\n\t\t\tedPrinterService.setSelectMultiplePrinters(true);\n\t\t\tedPrinterService.updateMappedPrinter(null);\n\n\t\t\tif ($stateParams.printer || $stateParams.printerbrand) {\n\t\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByName);\n\t\t\t\t} else if ($stateParams.printerbrand) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByBrand);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinterByName(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar printers = $stateParams.printer.split(',');\n\t\t\t\t\t// Loop over each printer name\n\t\t\t\t\tangular.forEach(printers, function (name) {\n\t\t\t\t\t\t// If the printer's name is part of the query select it\n\t\t\t\t\t\tif (printer.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectPrinterByBrand(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printerbrand) {\n\t\t\t\t\t// Split printerbrand query on comma\n\t\t\t\t\tvar printerbrands = $stateParams.printerbrand.split(',');\n\t\t\t\t\t// Loop over each printerbrand\n\t\t\t\t\tangular.forEach(printerbrands, function (brand) {\n\t\t\t\t\t\t// If the printer's branc is part of the query select it\n\t\t\t\t\t\tif (printer.brand.toLocaleLowerCase() === brand.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedPrinterService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedPrinterChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t\t// If we added to selected printers, go to first page and scroll to the top\n\t\t\tif (edPrinterService.getSelectedPrinterAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomMapCtrl', edRoomMapCtrl);\n\n\tedRoomMapCtrl.$inject = ['$state', '$scope', 'edRoomService', 'edSidebarService'];\n\n\tfunction edRoomMapCtrl($state, $scope, edRoomService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\n\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\tedRoomService.setSelectMultipleRooms(false);\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tlocateRoom(vm.mappedRoom);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tlocateRoom(mappedRoom);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateRoom(room) {\n\t\t\tif (room) {\n\t\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomProfileCtrl', edRoomProfileCtrl);\n\n\tedRoomProfileCtrl.$inject = ['$scope', '$document', 'edRoomService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edRoomProfileCtrl($scope, $document, edRoomService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edRoomService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('profile');\n\t\t\tedRoomService.setSelectMultipleRooms(true);\n\t\t\tedRoomService.updateMappedRoom(null);\n\n\t\t\tif ($stateParams.room || $stateParams.roomtype) {\n\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByName);\n\t\t\t\t} else if ($stateParams.roomtype) {\n\t\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoomByName(rooms) {\n\t\t\tvar selectedRooms = _.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar rooms = $stateParams.room.split(',');\n\t\t\t\t\t// Loop over each room name\n\t\t\t\t\tangular.forEach(rooms, function (name) {\n\t\t\t\t\t\t// If the room's name is part of the query select it\n\t\t\t\t\t\tif (room.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectRoomByType(rooms) {\n\t\t\tvar selectedRooms = _.sortBy(_.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.roomtype) {\n\t\t\t\t\t// Split roomtype query on comma\n\t\t\t\t\tvar roomtypes = $stateParams.roomtype.split(',');\n\t\t\t\t\t// Loop over each roomtype\n\t\t\t\t\tangular.forEach(roomtypes, function (type) {\n\t\t\t\t\t\t// If the room's type is part of the query select it\n\t\t\t\t\t\tif (room.type.toLocaleLowerCase() === type.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t}), 'name').reverse();\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedRoomService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedRoomChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t\t// If we added to selected rooms, go to first page and scroll to the top\n\t\t\tif (edRoomService.getSelectedRoomAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edArtifact', edArtifact);\n\n\tfunction edArtifact() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/artifact',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tfunction ctrlFunc() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edFooter', edFooter);\n\n\tfunction edFooter() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/footer',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService', 'edAuthService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edIdentityService, edAuthService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signout = signout;\n\n\t\tfunction signout() {\n\t\t\tedAuthService.logoutUser().then(function () {\n\t\t\t\tvm.username = '';\n\t\t\t\tvm.password = '';\n\t\t\t\tedNotifierService.notify('You have successfully signed out');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edHeader', edHeader);\n\n\tfunction edHeader() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/header',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService'];\n\n\tfunction ctrlFunc(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexTopbarCtrl', edIndexTopbarCtrl);\n\n\tfunction edIndexTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSidebarLeft', edSidebarLeft);\n\n\tfunction edSidebarLeft() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/sidebar-left',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['$scope', 'edSidebarService', 'edIdentityService'];\n\n\tfunction ctrlFunc($scope, edSidebarService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.sidebarOpen = false;\n\t\tvm.sidebarLocked = edSidebarService.getLockSidebar();\n\t\tvm.toggleSidebar = toggleSidebar;\n\t\tvm.closeSidebar = closeSidebar;\n\t\tvm.scrollSidebarTop = scrollSidebarTop;\n\n\t\tactivate();\n\n\t\t// If the sidebar is locked open, make sure it is open\n\t\tfunction activate() {\n\t\t\tif (vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = true;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, toggle it\n\t\tfunction toggleSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = !vm.sidebarOpen;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, close it\n\t\tfunction closeSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// Watch for the sidebar locked change event\n\t\tvar deregister = $scope.$on('sidebarLockedChange', function (event, sidebarLocked) {\n\t\t\tvm.sidebarLocked = sidebarLocked;\n\t\t\tvm.sidebarOpen = vm.sidebarLocked ? true : false;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction scrollSidebarTop() {\n\t\t\t$('.nano').nanoScroller({scroll: 'top'});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpNavigationCtrl', edHelpNavigationCtrl);\n\n\tedHelpNavigationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpNavigationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterMapCtrl', edPrinterMapCtrl);\n\n\tedPrinterMapCtrl.$inject = ['$state', '$scope', 'edPrinterService', 'edSidebarService'];\n\n\tfunction edPrinterMapCtrl($state, $scope, edPrinterService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\tedPrinterService.setSelectMultiplePrinters(false);\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tlocatePrinter(vm.mappedPrinter);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tlocatePrinter(mappedPrinter);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locatePrinter(printer) {\n\t\t\tif (printer) {\n\t\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edNanoscroller', edNanoscroller);\n\n\tedNanoscroller.$inject = ['$timeout'];\n\n\tfunction edNanoscroller($timeout) {\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\ttemplate: '',\n\t\t\treplace: false,\n\t\t\tscope: {},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\t// Do this right away so scrollbars don't display in IE and Firefox\n\t\t\tangular.element('.nano').nanoScroller({preventPageScrolling: true});\n\t\t\t// Do this again after a few seconds to wait for the model to populate\n\t\t\t$timeout(function () {\n\t\t\t\tangular.element('.nano').nanoScroller();\n\t\t\t}, 3000);\n\t\t}\n\t}\n})();","/**\n * svg directive\n * replace img tag with its svg content\n * adaptation from https://stackoverflow.com/questions/11978995/how-to-change-color-of-svg-image-using-css-jquery-svg-image-replacement\n */\n(function () {\n\t'use strict';\n\tangular.module('app').directive('svg', svg);\n\n\tsvg.$inject = ['$http'];\n\n\tfunction svg($http) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\tscope: {\n\t\t\t\tpath: '@',\n\t\t\t\tfilename: '@'\n\t\t\t},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, element, attrs) {\n\t\t\tvar imgId = attrs.id;\n\t\t\tvar imgClass = attrs.class;\n\t\t\tvar imgUrl = scope.path + scope.filename + '.svg';\n\n\t\t\t// Load svg content\n\t\t\t$http.get(imgUrl).success(function (data, status) {\n\t\t\t\tvar svg = angular.element(data);\n\t\t\t\tfor (var i = svg.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (svg[i].constructor.name === 'SVGSVGElement') {\n\t\t\t\t\t\tsvg = angular.element(svg[i]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgId !== 'undefined') {\n\t\t\t\t\tsvg.attr('id', imgId);\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgClass !== 'undefined') {\n\t\t\t\t\tsvg.attr('class', imgClass);\n\t\t\t\t}\n\t\t\t\t// Remove invalid attributes\n\t\t\t\tsvg = svg.removeAttr('xmlns:a');\n\t\t\t\telement.replaceWith(svg);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').filter('edPhoneNumberFilter', edPhoneNumberFilter);\n\n\tfunction edPhoneNumberFilter() {\n\t\treturn function (tel) {\n\t\t\tif (!tel) { return ''; }\n\n\t\t\t// strip all non-digits\n\t\t\tvar value = tel.toString().trim().replace(/\\D/g, '');\n\n\t\t\tvar country, city, number;\n\n\t\t\tswitch (value.length) {\n\t\t\t\tcase 10: // +1PPP####### -> C (PPP) ###-####\n\t\t\t\t\tcountry = 1;\n\t\t\t\t\tcity = value.slice(0, 3);\n\t\t\t\t\tnumber = value.slice(3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 11: // +CPPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value[0];\n\t\t\t\t\tcity = value.slice(1, 4);\n\t\t\t\t\tnumber = value.slice(4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 12: // +CCCPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value.slice(0, 3);\n\t\t\t\t\tcity = value.slice(3, 5);\n\t\t\t\t\tnumber = value.slice(5);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn tel;\n\t\t\t}\n\n\t\t\tif (country === 1) {\n\t\t\t\tcountry = '';\n\t\t\t}\n\n\t\t\tnumber = number.slice(0, 3) + '-' + number.slice(3);\n\n\t\t\treturn (country + ' (' + city + ') ' + number).trim();\n\t\t};\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactResourceService', edArtifactResourceService);\n\n\tedArtifactResourceService.$inject = ['$resource'];\n\n\tfunction edArtifactResourceService($resource) {\n\t\tvar artifactResource = $resource('/api/artifacts/:id', {\n\t\t\t_id: '@id'\n\t\t});\n\n\t\treturn artifactResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactService', edArtifactService);\n\n\tedArtifactService.$inject = ['edCachedArtifactResourceService'];\n\n\tfunction edArtifactService(edCachedArtifactResourceService) {\n\t\tvar service = {\n\t\t\tgetAllArtifacts: getAllArtifacts\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all artifacts from the database (or memory)\n\t\t *\n\t\t * @return {Array} artifacts\n\t\t */\n\t\tfunction getAllArtifacts() {\n\t\t\treturn edCachedArtifactResourceService.query();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedArtifactResourceService', edCachedArtifactResourceService);\n\n\tedCachedArtifactResourceService.$inject = ['edArtifactResourceService'];\n\n\tfunction edCachedArtifactResourceService(edArtifactResourceService) {\n\t\tvar artifacts;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!artifacts) {\n\t\t\t\tartifacts = edArtifactResourceService.query();\n\t\t\t}\n\n\t\t\treturn artifacts;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edIdentityService', edIdentityService);\n\n\tedIdentityService.$inject = ['$window', 'edUserResourceService'];\n\n\tfunction edIdentityService($window, edUserResourceService) {\n\t\tvar currentUser;\n\t\tif (!!$window.bootstrappedUserObject) {\n\t\t\tcurrentUser = new edUserResourceService();\n\t\t\tangular.extend(currentUser, $window.bootstrappedUserObject);\n\t\t}\n\t\tvar service = {\n\t\t\tcurrentUser: currentUser,\n\t\t\tisAuthenticated: isAuthenticated,\n\t\t\tisAuthorized: isAuthorized\n\t\t};\n\t\treturn service;\n\n\t\tfunction isAuthenticated() {\n\t\t\treturn !!this.currentUser;\n\t\t}\n\n\t\tfunction isAuthorized(role) {\n\t\t\treturn !!this.currentUser && this.currentUser.roles.indexOf(role) > -1;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').value('edToastr', toastr);\n\n\tangular.module('app').factory('edNotifierService', edNotifierService);\n\n\tedNotifierService.$inject = ['edToastr'];\n\n\tfunction edNotifierService(edToastr) {\n\t\tvar service = {\n\t\t\tnotify: notify,\n\t\t\tinfo: info,\n\t\t\terror: error\n\t\t};\n\n\t\tedToastr.options = {\n\t\t\t'showDuration': '300',\n\t\t\t'hideDuration': '300'\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction notify(msg) {\n\t\t\tedToastr.success(msg);\n\t\t}\n\n\t\tfunction info(msg) {\n\t\t\tedToastr.info(msg);\n\t\t}\n\n\t\tfunction error(msg) {\n\t\t\tedToastr.error(msg);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edSidebarService', edSidebarService);\n\n\tedSidebarService.$inject = ['$rootScope'];\n\n\tfunction edSidebarService($rootScope) {\n\t\tvar sidebarLocked = false;\n\t\tvar service = {\n\t\t\tsetLockSidebar: setLockSidebar,\n\t\t\tgetLockSidebar: getLockSidebar\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction setLockSidebar(lock) {\n\t\t\tsidebarLocked = lock;\n\t\t\t$rootScope.$broadcast('sidebarLockedChange', sidebarLocked);\n\t\t\treturn sidebarLocked;\n\t\t}\n\n\t\tfunction getLockSidebar() {\n\t\t\treturn sidebarLocked;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edFloorCtrl', edFloorCtrl);\n\n\tedFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$stateParams', '$scope', 'edRoomService', 'edPrinterService', 'edArtifactService', 'edSidebarService', '_'];\n\n\tfunction edFloorCtrl(edEmployeeService, edDeskService, $state, $stateParams, $scope, edRoomService, edPrinterService, edArtifactService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\t\tvm.desks = null;\n\t\tvm.rooms = null;\n\t\tvm.printers = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\tedEmployeeService.setSelectMultipleEmployees(false);\n\t\tedRoomService.setSelectMultipleRooms(false);\n\t\tedPrinterService.setSelectMultiplePrinters(false);\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks and rooms on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t\tedRoomService.getAllRooms().$promise.then(roomFilter);\n\t\t\tedPrinterService.getAllPrinters().$promise.then(printerFilter);\n\t\t\tedArtifactService.getAllArtifacts().$promise.then(artifactFilter);\n\n\t\t\tmapEmployee();\n\t\t\tmapRoom();\n\t\t\tmapPrinter();\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tif (mappedEmployee) {\n\t\t\t\tif (mappedEmployee.floor && (mappedEmployee.location !== vm.location || mappedEmployee.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('employees.map.' + mappedEmployee.location + '-' + mappedEmployee.floor, {'seat': mappedEmployee.seat});\n\t\t\t\t} else if (!mappedEmployee.floor) {\n\t\t\t\t\t$state.go('employees.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tvar deregisterPrinter = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tif (mappedPrinter) {\n\t\t\t\tif (mappedPrinter.floor && (mappedPrinter.location !== vm.location || mappedPrinter.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('printers.map.' + mappedPrinter.location + '-' + mappedPrinter.floor, {'name': mappedPrinter.name});\n\t\t\t\t} else if (!mappedPrinter.floor) {\n\t\t\t\t\t$state.go('printers.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterPrinter);\n\n\t\tvar deregisterRoom = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tif (mappedRoom) {\n\t\t\t\tif (mappedRoom.floor && (mappedRoom.location !== vm.location || mappedRoom.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('rooms.map.' + mappedRoom.location + '-' + mappedRoom.floor, {'name': mappedRoom.name});\n\t\t\t\t} else if (!mappedRoom.floor) {\n\t\t\t\t\t$state.go('rooms.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterRoom);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction roomFilter(rooms) {\n\t\t\tvm.rooms = _.filter(rooms, function (room) {\n\t\t\t\treturn room.floor === vm.floor && room.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction printerFilter(printers) {\n\t\t\tvm.printers = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.floor === vm.floor && printer.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction artifactFilter(artifacts) {\n\t\t\tvm.artifacts = _.filter(artifacts, function (artifact) {\n\t\t\t\treturn artifact.floor === vm.floor && artifact.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction mapEmployee() {\n\t\t\t// If there is a mapped employee and we know their floor\n\t\t\tif (vm.mappedEmployee && vm.mappedEmployee.floor) {\n\t\t\t\t// If the mapped employee is on a different floor, un-map them\n\t\t\t\tif (vm.floor !== vm.mappedEmployee.floor) {\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(null);\n\t\t\t\t}\n\t\t\t\t// Map an employee based on a seat number\n\t\t\t} else if ($stateParams.seat) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(mapEmployeeBySeat);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapEmployeeBySeat(employees) {\n\t\t\tvar mappedEmployeeArray = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.seat === $stateParams.seat;\n\t\t\t});\n\n\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\tvm.location = vm.mappedEmployee.location;\n\t\t\t\tvm.floor = vm.mappedEmployee.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoom() {\n\t\t\t// If there is a mapped printer and we know its floor\n\t\t\tif (vm.mappedPrinter && vm.mappedPrinter.floor) {\n\t\t\t\t// If the mapped printer is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedPrinter.floor) {\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(null);\n\t\t\t\t}\n\t\t\t\t// Map an printer based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedPrinterService.getAllPrinters().$promise.then(mapPrinterByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoomByName(rooms) {\n\t\t\tvar mappedRoomArray = _.filter(rooms, function (room) {\n\t\t\t\treturn room.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t\tvm.floor = vm.mappedRoom.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinter() {\n\t\t\t// If there is a mapped room and we know its floor\n\t\t\tif (vm.mappedRoom && vm.mappedRoom.floor) {\n\t\t\t\t// If the mapped room is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedRoom.floor) {\n\t\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(null);\n\t\t\t\t}\n\t\t\t\t// Map an room based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedRoomService.getAllRooms().$promise.then(mapRoomByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinterByName(printers) {\n\t\t\tvar mappedPrinterArray = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\tvm.floor = vm.mappedPrinter.floor;\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexCtrl', edIndexCtrl);\n\n\tedIndexCtrl.$inject = ['edSidebarService'];\n\n\tfunction edIndexCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();"],"sourceRoot":"/source/"}