{"version":3,"sources":["public/app/app.module.js","public/app/app.routes.js","public/app/app.run.js","public/app/admin/components/admin-topbar.controller.js","public/app/admin/components/seat-picker-desk.directive.js","public/app/admin/components/seat-picker-topbar.controller.js","public/app/admin/components/user-selector.controller.js","public/app/admin/services/auth.service.js","public/app/admin/services/cached-user-resource.service.js","public/app/admin/services/employee-admin.service.js","public/app/admin/services/user-resource.service.js","public/app/admin/services/user.service.js","public/app/admin/views/create-employee.controller.js","public/app/admin/views/create-user.controller.js","public/app/admin/views/login.controller.js","public/app/admin/views/seat-picker-floor.controller.js","public/app/admin/views/seat-picker.controller.js","public/app/admin/views/update-employee.controller.js","public/app/admin/views/update-user.controller.js","public/app/admin/views/user-list.controller.js","public/app/admin/views/user-profile.controller.js","public/app/birthdays/components/birthdays-topbar.controller.js","public/app/birthdays/views/birthdays.controller.js","public/app/committees/components/committees-topbar.controller.js","public/app/committees/views/committees.controller.js","public/app/common/components/artifact.directive.js","public/app/common/components/footer.directive.js","public/app/common/components/header.directive.js","public/app/common/components/index-topbar.controller.js","public/app/common/components/sidebar-left.directive.js","public/app/common/filters/custom-filters.js","public/app/common/services/artifact-resource.service.js","public/app/common/services/artifact.service.js","public/app/common/services/cached-artifact-resource.service.js","public/app/common/services/identity.service.js","public/app/common/services/notifier.service.js","public/app/common/services/sidebar.service.js","public/app/common/utilities/nanoscroller.directive.js","public/app/common/utilities/svg.directive.js","public/app/common/views/floor.controller.js","public/app/common/views/index.controller.js","public/app/employees/components/desk.directive.js","public/app/employees/components/employee-card.directive.js","public/app/employees/components/employee-selector.controller.js","public/app/employees/components/employee-topbar.controller.js","public/app/employees/services/cached-desk-resource.service.js","public/app/employees/services/cached-employee-resource.service.js","public/app/employees/services/desk-resource.service.js","public/app/employees/services/desk.service.js","public/app/employees/services/employee-resource.service.js","public/app/employees/services/employee.service.js","public/app/employees/views/employee.controller.js","public/app/guilds/components/guilds-topbar.controller.js","public/app/guilds/views/guilds.controller.js","public/app/help/components/help-topbar.controller.js","public/app/help/views/help.controller.js","public/app/printers/components/printer-card.directive.js","public/app/printers/components/printer-selector.controller.js","public/app/printers/components/printer-topbar.controller.js","public/app/printers/components/printer.directive.js","public/app/printers/services/cached-printer-resource.service.js","public/app/printers/services/printer-resource.service.js","public/app/printers/services/printer.service.js","public/app/printers/views/printer.controller.js","public/app/rooms/components/room-card.directive.js","public/app/rooms/components/room-selector.controller.js","public/app/rooms/components/room-topbar.controller.js","public/app/rooms/components/room.directive.js","public/app/rooms/services/cached-room-resource.service.js","public/app/rooms/services/room-resource.service.js","public/app/rooms/services/room.service.js","public/app/rooms/views/room.controller.js","public/app/employees/views/map/employee-map.controller.js","public/app/employees/views/org-chart/org-chart.controller.js","public/app/employees/views/profile/employee-profile.controller.js","public/app/help/views/location/help-location.controller.js","public/app/help/views/navigation/help-navigation.controller.js","public/app/help/views/org-chart/help-org-chart.controller.js","public/app/help/views/profile/help-profile.controller.js","public/app/printers/views/map/printer-map.controller.js","public/app/printers/views/profile/printer-profile.controller.js","public/app/rooms/views/map/room-map.controller.js","public/app/rooms/views/profile/room-profile.controller.js"],"names":["angular","module","constant","window","_","moment","configure","$stateProvider","$urlRouterProvider","$locationProvider","$compileProvider","routeRoleChecks","superAdmin","requireSuperAdmin","admin","requireAdmin","user","requireAuth","aHrefSanitizationWhitelist","html5Mode","otherwise","when","state","url","views","main","templateUrl","controller","controllerAs","topbar","sidebar","main@","sidebar@","topbar@","resolve","auth","edAuthService","authorizeCurrentUserForRoute","authorizeAuthenticatedUserForRoute","config","$inject","appRun","$rootScope","$state","$stateParams","$document","$on","event","toState","toParams","fromState","fromParams","error","go","body","scrollTop","documentElement","firstname","lastname","printer","printerbrand","room","roomtype","employee","team","department","run","edAdminTopbarCtrl","edIdentityService","vm","this","identity","edSeatPickerDesk","directive","restrict","replace","scope","location","floor","seat","orientation","classification","xpos","ypos","ctrlFunc","edEmployeeAdminService","edNotifierService","assignSeat","newEmployeeData","updateEmployee","then","notify","edSeatPickerTopbarCtrl","edUserSelectorCtrl","$scope","edUserService","selectUser","setSelectedUser","users","getAllUsers","selectedUser","getSelectedUser","deregisterUserUpdated","$http","$q","edUserResourceService","authenticateUser","username","password","dfd","defer","post","response","data","success","extend","currentUser","promise","createUser","newUserData","newUser","$save","$broadcast","reject","reason","updateCurrentUser","clone","copy","$update","updateUser","currentUserClone","_id","logoutUser","logout","undefined","role","isAuthorized","isAuthenticated","service","factory","edCachedUserResourceService","query","cacheBust","cacheKill","Date","getTime","edEmployeeService","edEmployeeResourceService","Upload","selectedEmployees","getSelectedEmployees","removeAllSelectedEmployees","getAllEmployees","createEmployee","newEmployee","uploadEmployeePhoto","employeePhoto","employeeData","upload","file","fileName","eid","name","split","pop","resp","console","log","status","evt","progressPercentage","parseInt","loaded","total","$resource","userResource","update","method","isArray","prototype","isAdmin","roles","indexOf","selected","edCreateEmployeeCtrl","edDeskService","edSidebarService","activate","resetForm","setLockSidebar","$promise","createManagerList","firstName","lastName","nickname","email","phone","ext","title","guilds","committees","hasReports","mid","birthdate","employees","managers","filter","forEach","include","guild","push","committee","image","updateSelectedEmployees","toLowerCase","createEmployeeForm","$setPristine","desks","getAllDesks","locationOptions","value","text","departments","employeesUpdatedEvent","edCreateUserCtrl","edLoginCtrl","signin","edSeatPickerFloorCtrl","checkForSelectedEmployee","currentState","current","locationAndFloor","locationName","deskFilter","desk","length","setSelectMultipleEmployees","setDisplayEmployeeInfoType","deregisterEmployee","edSeatPickerCtrl","updateMappedEmployee","setRemoteEmployee","selectedEmployee","edUpdateEmployeeCtrl","populateEmployee","filterManagers","filteredManagers","manager","imageFile","deleteEmployee","deletedEmployee","directReports","directReport","deleted","cancelUpdateEmployee","selectedEmployeesChangeEvent","edUpdateUserCtrl","populateUserInfo","selectedUserChangeEvent","edUserListCtrl","edUserProfileCtrl","fname","lname","edBirthdaysTopbarCtrl","edBirthdaysCtrl","filterEmployeesByBirthday","currentDay","date","birthMonthEmployees","sortBy","requestedMonth","months","getMonth","birthday","getDate","currentMonth","birthdayToday","profileEmployee","month","edCommitteesTopbarCtrl","edCommitteesCtrl","filterEmployeesByCommittee","committeeMembers","edArtifact","edFooter","signout","edHeader","edIndexTopbarCtrl","edSidebarLeft","sidebarLocked","sidebarOpen","toggleSidebar","closeSidebar","scrollSidebarTop","$","nanoScroller","scroll","getLockSidebar","deregister","edPhoneNumberFilter","tel","country","city","number","toString","trim","slice","edArtifactResourceService","artifactResource","edArtifactService","edCachedArtifactResourceService","getAllArtifacts","artifacts","$window","bootstrappedUserObject","edToastr","msg","info","options","showDuration","hideDuration","toastr","lock","edNanoscroller","$timeout","linkFunc","el","attrs","element","preventPageScrolling","template","link","svg","imgId","id","imgClass","imgUrl","path","filename","get","i","constructor","attr","removeAttr","replaceWith","edFloorCtrl","edRoomService","edPrinterService","setDisplayPrinterInfoType","setDisplayRoomInfoType","getAllRooms","roomFilter","getAllPrinters","printerFilter","artifactFilter","mapEmployee","mapRoom","mapPrinter","rooms","printers","artifact","mappedEmployee","mapEmployeeBySeat","mappedEmployeeArray","mappedPrinter","updateMappedPrinter","mapPrinterByName","mapRoomByName","mappedRoomArray","mappedRoom","updateMappedRoom","mappedPrinterArray","getMappedEmployee","selectedPrinters","setSelectMultiplePrinters","getMappedPrinter","selectedRooms","setSelectMultipleRooms","getMappedRoom","deregisterPrinter","deregisterRoom","edIndexCtrl","edDesk","$compile","scrollToElement","addClass","append","displayName","markerLabel","leftPos","outerWidth","css","removeClass","find","remove","viewingProfile","viewProfile","edEmployeeCard","twEmail","lync","deselectEmployee","parent","child","children","first","editEmployee","edEmployeeSelectorCtrl","filterLocations","locations","splice","locationFilter","nycOnly","filterFloors","floors","floorFilter","selectEmployee","displayEmployeeInfoType","selectAll","addAllFilteredEmployees","filteredEmployees","scrollTopAnimated","selectNone","clearFilter","employeeName","6","7","8","buf","nyc","getDisplayEmployeeInfoType","allowSelectAll","getSelectMultipleEmployees","deregisterEmployeesUpdated","deregisterSelectMultipleEmployeesChange","allowSelectMultipleEmployees","deregisterDisplayEmployeeInfoTypeChange","edEmployeeTopbarCtrl","deregisterSelectedEmployeesChanged","edCachedDeskResourceService","edDeskResourceService","edCachedEmployeeResourceService","ees","deskResource","employeeResource","prevSelected","selectedEmployeeAdded","mapped","updateMappedEmployeeById","infoType","selectMultipleEmployees","unshift","getSelectedEmployeeAdded","setProfilePageNumber","pageNumber","profilePageNumber","getProfilePageNumber","selectMultiple","lastSelectedEmployee","shift","edEmployeeCtrl","edGuildsTopbarCtrl","edGuildsCtrl","filterEmployeesByGuild","guildMembers","edHelpTopbarCtrl","edHelpCtrl","edPrinterCard","deselectPrinter","updateSelectedPrinters","edPrinterSelectorCtrl","selectPrinter","displayPrinterInfoType","addAllFilteredPrinters","filteredPrinters","removeAllSelectedPrinters","printerName","brand","color","getSelectedPrinters","getDisplayPrinterInfoType","getSelectMultiplePrinters","deregisterSelectMultiplePrintersChange","allowSelectMultiplePrinters","deregisterDisplayPrinterInfoTypeChange","edPrinterTopbarCtrl","deregisterSelectedPrintersChanged","edPrinter","selectedPrinter","edCachedPrinterResourceService","edPrinterResourceService","printerResource","selectedPrinterAdded","selectMultiplePrinters","getSelectedPrinterAdded","lastSelectedPrinter","edPrinterCtrl","edRoomCard","deselectRoom","updateSelectedRooms","edRoomSelectorCtrl","selectRoom","displayRoomInfoType","addAllFilteredRooms","filteredRooms","removeAllSelectedRooms","roomName","type","getSelectedRooms","getDisplayRoomInfoType","getSelectMultipleRooms","deregisterSelectMultipleRoomsChange","allowSelectMultipleRooms","deregisterDisplayRoomInfoTypeChange","edRoomTopbarCtrl","deregisterSelectedRoomsChanged","edRoom","selectedRoom","edCachedRoomResourceService","edRoomResourceService","roomResource","selectedRoomAdded","selectMultipleRooms","getSelectedRoomAdded","lastSelectedRoom","edRoomCtrl","edEmployeeMapCtrl","locateEmployee","unknownLocationEmployee","edOrgChartCtrl","getEmployeeById","getManager","getDirectReports","findWhere","edEmployeeProfileCtrl","selectEmployeeById","selectEmployeeByTeam","selectEmployeeByDepartment","selectEmployeeByTitle","selectEmployeeByName","match","employeeids","hasOwnProperty","teams","reverse","titles","firstnames","lastnames","changePage","newPageNumber","currentPage","edHelpLocationCtrl","edHelpNavigationCtrl","edHelpOrgChartCtrl","edHelpProfileCtrl","edPrinterMapCtrl","locatePrinter","edPrinterProfileCtrl","selectPrinterByName","selectPrinterByBrand","toLocaleLowerCase","printerbrands","edRoomMapCtrl","locateRoom","edRoomProfileCtrl","selectRoomByName","selectRoomByType","roomtypes"],"mappings":"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","file":"main-ffdb5aa568.js","sourcesContent":["(function () {\n\t'use strict';\n\tangular.module('app', ['ngResource', 'ui.router', 'ngFileUpload', 'angular.filter', 'ngAnimate', 'duScroll', 'angular.vertilize', 'angularUtils.directives.dirPagination', 'focus-if', 'ngMaterial']);\n\n\tangular.module('app').constant('_', window._).constant('moment', window.moment);\n})();","(function () {\n\t'use strict';\n\tangular.module('app').config(configure);\n\n\tconfigure.$inject = ['$stateProvider', '$urlRouterProvider', '$locationProvider', '$compileProvider'];\n\n\tfunction configure($stateProvider, $urlRouterProvider, $locationProvider, $compileProvider) {\n\t\tvar routeRoleChecks = {\n\t\t\tsuperAdmin: requireSuperAdmin,\n\t\t\tadmin: requireAdmin,\n\t\t\tuser: requireAuth\n\t\t};\n\n\t\t// Allow some extra protocols\n\t\t$compileProvider.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|chrome-extension|im|sip):/);\n\n\t\t$locationProvider.html5Mode(true);\n\n\t\t// for any unmatched url\n\t\t$urlRouterProvider.otherwise('/');\n\n\t\t$urlRouterProvider.when('/employees/', '/employees');\n\t\t$urlRouterProvider.when('/printers/', '/printers');\n\t\t$urlRouterProvider.when('/rooms/', '/rooms');\n\t\t$urlRouterProvider.when('/guilds/', '/guilds');\n\t\t$urlRouterProvider.when('/committees/', '/committees');\n\n\t\t$stateProvider\n\t\t\t.state('home', {\n\t\t\t\turl: '/',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/index',\n\t\t\t\t\t\tcontroller: 'edIndexCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/components/index-topbar',\n\t\t\t\t\t\tcontroller: 'edIndexTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees', {\n\t\t\t\turl: '/employees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/employee',\n\t\t\t\t\t\tcontroller: 'edEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-topbar',\n\t\t\t\t\t\tcontroller: 'edEmployeeTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile', {\n\t\t\t\turl: '/profile/?firstname&lastname',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.department', {\n\t\t\t\turl: 'department/:department',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.title', {\n\t\t\t\turl: 'title/:title',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.team', {\n\t\t\t\turl: 'team/:team',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.profile.employee', {\n\t\t\t\turl: 'employee/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/profile/employee-profile',\n\t\t\t\t\t\tcontroller: 'edEmployeeProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.org-chart', {\n\t\t\t\turl: '/org-chart/:employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/org-chart/org-chart',\n\t\t\t\t\t\tcontroller: 'edOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map', {\n\t\t\t\turl: '/map/?employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/views/map/employee-map',\n\t\t\t\t\t\tcontroller: 'edEmployeeMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-6', {\n\t\t\t\turl: 'buf-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-7', {\n\t\t\t\turl: 'buf-7/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.buf-8', {\n\t\t\t\turl: 'buf-8/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('employees.map.nyc-6', {\n\t\t\t\turl: 'nyc-6/:seat',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers', {\n\t\t\t\turl: '/printers',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/printer',\n\t\t\t\t\t\tcontroller: 'edPrinterCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-selector',\n\t\t\t\t\t\tcontroller: 'edPrinterSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/components/printer-topbar',\n\t\t\t\t\t\tcontroller: 'edPrinterTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.name', {\n\t\t\t\turl: '/name/:printer',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.profile.brand', {\n\t\t\t\turl: '/brand/:printerbrand',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/profile/printer-profile',\n\t\t\t\t\t\tcontroller: 'edPrinterProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/printers/views/map/printer-map',\n\t\t\t\t\t\tcontroller: 'edPrinterMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('printers.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms', {\n\t\t\t\turl: '/rooms',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/room',\n\t\t\t\t\t\tcontroller: 'edRoomCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-selector',\n\t\t\t\t\t\tcontroller: 'edRoomSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/components/room-topbar',\n\t\t\t\t\t\tcontroller: 'edRoomTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.name', {\n\t\t\t\turl: '/name/:room',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.profile.type', {\n\t\t\t\turl: '/type/:roomtype',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/profile/room-profile',\n\t\t\t\t\t\tcontroller: 'edRoomProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map', {\n\t\t\t\turl: '/map',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/rooms/views/map/room-map',\n\t\t\t\t\t\tcontroller: 'edRoomMapCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-6', {\n\t\t\t\turl: '/buf-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-7', {\n\t\t\t\turl: '/buf-7/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.buf-8', {\n\t\t\t\turl: '/buf-8/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('rooms.map.nyc-6', {\n\t\t\t\turl: '/nyc-6/:name',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/common/views/floor',\n\t\t\t\t\t\tcontroller: 'edFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin', {\n\t\t\t\turl: '/admin',\n\t\t\t\t'views': {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/login',\n\t\t\t\t\t\tcontroller: 'edLoginCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/admin-topbar',\n\t\t\t\t\t\tcontroller: 'edAdminTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.users', {\n\t\t\t\turl: '/users',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-list',\n\t\t\t\t\t\tcontroller: 'edUserListCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.user-profile', {\n\t\t\t\turl: '/user-profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/user-profile',\n\t\t\t\t\t\tcontroller: 'edUserProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.user\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-user', {\n\t\t\t\turl: '/create-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-user',\n\t\t\t\t\t\tcontroller: 'edCreateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-user', {\n\t\t\t\turl: '/update-user',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-user',\n\t\t\t\t\t\tcontroller: 'edUpdateUserCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/user-selector',\n\t\t\t\t\t\tcontroller: 'edUserSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.superAdmin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.create-employee', {\n\t\t\t\turl: '/create-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/create-employee',\n\t\t\t\t\t\tcontroller: 'edCreateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tresolve: {\n\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.update-employee', {\n\t\t\t\turl: '/update-employee',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/update-employee',\n\t\t\t\t\t\tcontroller: 'edUpdateEmployeeCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker', {\n\t\t\t\turl: '/seat-picker',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker',\n\t\t\t\t\t\tcontroller: 'edSeatPickerCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'sidebar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/employees/components/employee-selector',\n\t\t\t\t\t\tcontroller: 'edEmployeeSelectorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-topbar',\n\t\t\t\t\t\tcontroller: 'edSeatPickerTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-6', {\n\t\t\t\turl: '/buf-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-7', {\n\t\t\t\turl: '/buf-7',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.buf-8', {\n\t\t\t\turl: '/buf-8',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('admin.seat-picker.nyc-6', {\n\t\t\t\turl: '/nyc-6',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/admin/views/seat-picker-floor',\n\t\t\t\t\t\tcontroller: 'edSeatPickerFloorCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\tauth: routeRoleChecks.admin\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds', {\n\t\t\t\turl: '/guilds',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/components/guilds-topbar',\n\t\t\t\t\t\tcontroller: 'edGuildsTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('guilds.front-end', {\n\t\t\t\turl: '/front-end',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/guilds/views/guilds',\n\t\t\t\t\t\tcontroller: 'edGuildsCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees', {\n\t\t\t\turl: '/committees',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/components/committees-topbar',\n\t\t\t\t\t\tcontroller: 'edCommitteesTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.fun-games', {\n\t\t\t\turl: '/fun-games',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.diversity', {\n\t\t\t\turl: '/diversity',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.wellness', {\n\t\t\t\turl: '/wellness',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('committees.beautification', {\n\t\t\t\turl: '/beautification',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/committees/views/committees',\n\t\t\t\t\t\tcontroller: 'edCommitteesCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('birthdays', {\n\t\t\t\turl: '/birthdays',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/views/birthdays',\n\t\t\t\t\t\tcontroller: 'edBirthdaysCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/components/birthdays-topbar',\n\t\t\t\t\t\tcontroller: 'edBirthdaysTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('birthdays.month', {\n\t\t\t\turl: '/:month',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/birthdays/views/birthdays',\n\t\t\t\t\t\tcontroller: 'edBirthdaysCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help', {\n\t\t\t\turl: '/help',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/help',\n\t\t\t\t\t\tcontroller: 'edHelpCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t},\n\t\t\t\t\t'topbar@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/components/help-topbar',\n\t\t\t\t\t\tcontroller: 'edHelpTopbarCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.navigation', {\n\t\t\t\turl: '/navigation',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/navigation/help-navigation',\n\t\t\t\t\t\tcontroller: 'edHelpNavigationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.profile', {\n\t\t\t\turl: '/profile',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/profile/help-profile',\n\t\t\t\t\t\tcontroller: 'edHelpProfileCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.location', {\n\t\t\t\turl: '/location',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/location/help-location',\n\t\t\t\t\t\tcontroller: 'edHelpLocationCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.state('help.org-chart', {\n\t\t\t\turl: '/org-chart',\n\t\t\t\tviews: {\n\t\t\t\t\t'main@': {\n\t\t\t\t\t\ttemplateUrl: '/partials/help/views/org-chart/help-org-chart',\n\t\t\t\t\t\tcontroller: 'edHelpOrgChartCtrl',\n\t\t\t\t\t\tcontrollerAs: 'vm'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trequireAdmin.$inject = ['edAuthService'];\n\n\tfunction requireAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('admin');\n\t}\n\n\trequireSuperAdmin.$inject = ['edAuthService'];\n\n\tfunction requireSuperAdmin(edAuthService) {\n\t\treturn edAuthService.authorizeCurrentUserForRoute('super-admin');\n\t}\n\n\trequireAuth.$inject = ['edAuthService'];\n\n\tfunction requireAuth(edAuthService) {\n\t\treturn edAuthService.authorizeAuthenticatedUserForRoute();\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').run(appRun);\n\n\tappRun.$inject = ['$rootScope', '$state', '$stateParams', '$document'];\n\n\tfunction appRun($rootScope, $state, $stateParams, $document) {\n\t\t$rootScope.$on('$stateChangeError', function (event, toState, toParams, fromState, fromParams, error) {\n\t\t\tif (error === 'not authorized') {\n\t\t\t\t$state.go('admin');\n\t\t\t}\n\t\t});\n\n\t\t// Clear state params and scroll to the top on route changes\n\t\t$rootScope.$on('$stateChangeSuccess', function () {\n\t\t\t$document[0].body.scrollTop = $document[0].documentElement.scrollTop = 0;\n\t\t\t$stateParams.firstname = null;\n\t\t\t$stateParams.lastname = null;\n\t\t\t$stateParams.printer = null;\n\t\t\t$stateParams.printerbrand = null;\n\t\t\t$stateParams.room = null;\n\t\t\t$stateParams.roomtype = null;\n\t\t\t$stateParams.employee = null;\n\t\t\t$stateParams.team = null;\n\t\t\t$stateParams.department = null;\n\t\t});\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edAdminTopbarCtrl', edAdminTopbarCtrl);\n\n\tedAdminTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edAdminTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSeatPickerDesk', edSeatPickerDesk);\n\n\tfunction edSeatPickerDesk() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/admin/components/seat-picker-desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tfloor: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edEmployeeAdminService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edEmployeeAdminService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.assignSeat = assignSeat;\n\n\t\tfunction assignSeat(location, floor, seat) {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: location,\n\t\t\t\tfloor: floor,\n\t\t\t\tseat: seat\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee seat updated!');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerTopbarCtrl', edSeatPickerTopbarCtrl);\n\n\tfunction edSeatPickerTopbarCtrl() {\n\t\t// Put awesome here\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserSelectorCtrl', edUserSelectorCtrl);\n\n\tedUserSelectorCtrl.$inject = ['$scope', 'edUserService'];\n\n\tfunction edUserSelectorCtrl($scope, edUserService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserService.getAllUsers(false);\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\t\tvm.selectUser = selectUser;\n\n\t\tfunction selectUser(user) {\n\t\t\tedUserService.setSelectedUser(user);\n\t\t}\n\n\t\tvar deregisterUserUpdated = $scope.$on('userUpdated', function (event, users) {\n\t\t\tvm.users = users;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterUserUpdated);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edAuthService', edAuthService);\n\n\tedAuthService.$inject = ['$http', '$rootScope', '$q', 'edIdentityService', 'edUserResourceService', 'edUserService'];\n\n\tfunction edAuthService($http, $rootScope, $q, edIdentityService, edUserResourceService, edUserService) {\n\t\tvar service = {\n\t\t\tauthenticateUser: authenticateUser,\n\t\t\tcreateUser: createUser,\n\t\t\tupdateUser: updateUser,\n\t\t\tupdateCurrentUser: updateCurrentUser,\n\t\t\tlogoutUser: logoutUser,\n\t\t\tauthorizeCurrentUserForRoute: authorizeCurrentUserForRoute,\n\t\t\tauthorizeAuthenticatedUserForRoute: authorizeAuthenticatedUserForRoute\n\t\t};\n\t\treturn service;\n\n\t\tfunction authenticateUser(username, password) {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/login', {\n\t\t\t\tusername: username,\n\t\t\t\tpassword: password\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\tvar user = new edUserResourceService();\n\t\t\t\t\tangular.extend(user, response.data.user);\n\t\t\t\t\tedIdentityService.currentUser = user;\n\t\t\t\t\tdfd.resolve(true);\n\t\t\t\t} else {\n\t\t\t\t\tdfd.resolve(false);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction createUser(newUserData) {\n\t\t\tvar newUser = new edUserResourceService(newUserData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewUser.$save().then(function () {\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction updateCurrentUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar clone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tclone.$update().then(function () {\n\t\t\t\tedIdentityService.currentUser = clone;\n\t\t\t\tdfd.resolve();\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Updates user record in database\n\t\t * Uses the selected user for updating\n\t\t *\n\t\t * @param {Object} newUserData user data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateUser(newUserData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedUser = edUserService.getSelectedUser();\n\t\t\tvar clone = angular.copy(selectedUser);\n\t\t\tangular.extend(clone, newUserData);\n\t\t\tvar currentUserClone = angular.copy(edIdentityService.currentUser);\n\t\t\tangular.extend(currentUserClone, newUserData);\n\t\t\tif (edIdentityService.currentUser._id === clone._id) {\n\t\t\t\tedIdentityService.currentUser = currentUserClone;\n\t\t\t}\n\t\t\tclone.$update().then(function (user) {\n\t\t\t\tedUserService.setSelectedUser(null);\n\t\t\t\t$rootScope.$broadcast('userUpdated', edUserService.getAllUsers(true));\n\t\t\t\tdfd.resolve(user);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction logoutUser() {\n\t\t\tvar dfd = $q.defer();\n\t\t\t$http.post('/logout', {\n\t\t\t\tlogout: true\n\t\t\t}).then(function () {\n\t\t\t\tedIdentityService.currentUser = undefined;\n\t\t\t\tdfd.resolve();\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\tfunction authorizeCurrentUserForRoute(role) {\n\t\t\tif (edIdentityService.isAuthorized(role)) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\n\t\tfunction authorizeAuthenticatedUserForRoute() {\n\t\t\tif (edIdentityService.isAuthenticated()) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn $q.reject('not authorized');\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedUserResourceService', edCachedUserResourceService);\n\n\tedCachedUserResourceService.$inject = ['edUserResourceService', '_'];\n\n\tfunction edCachedUserResourceService(edUserResourceService, _) {\n\t\tvar users;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!users || cacheBust) {\n\t\t\t\tusers = edUserResourceService.query({cacheKill: new Date().getTime()});\n\t\t\t}\n\n\t\t\treturn users;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeAdminService', edEmployeeAdminService);\n\n\tedEmployeeAdminService.$inject = ['$rootScope', '$q', 'edEmployeeService', 'edEmployeeResourceService', 'Upload'];\n\n\tfunction edEmployeeAdminService($rootScope, $q, edEmployeeService, edEmployeeResourceService, Upload) {\n\t\tvar service = {\n\t\t\tupdateEmployee: updateEmployee,\n\t\t\tcreateEmployee: createEmployee,\n\t\t\tuploadEmployeePhoto: uploadEmployeePhoto\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Updates employee record in database\n\t\t * Uses the selected employee for updating\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to update\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction updateEmployee(newEmployeeData) {\n\t\t\tvar dfd = $q.defer();\n\t\t\tvar selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\t\tvar clone = angular.copy(selectedEmployees[0]);\n\t\t\tangular.extend(clone, newEmployeeData);\n\t\t\tclone.$update().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Create employee record in database\n\t\t *\n\t\t * @param {Object} newEmployeeData employee data to insert\n\t\t * @return {Object} promise\n\t\t */\n\t\tfunction createEmployee(newEmployeeData) {\n\t\t\tvar newEmployee = new edEmployeeResourceService(newEmployeeData);\n\t\t\tvar dfd = $q.defer();\n\n\t\t\tnewEmployee.$save().then(function (employee) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t$rootScope.$broadcast('employeesUpdated', edEmployeeService.getAllEmployees(true));\n\t\t\t\tdfd.resolve(employee);\n\t\t\t}, function (response) {\n\t\t\t\tdfd.reject(response.data.reason);\n\t\t\t});\n\t\t\treturn dfd.promise;\n\t\t}\n\n\t\t/**\n\t\t * Upload employee photo to disk\n\t\t *\n\t\t * @param {Object} employeePhoto employee photo data\n\t\t * @param {Object} employeeData employee data\n\t\t */\n\t\tfunction uploadEmployeePhoto(employeePhoto, employeeData) {\n\t\t\tUpload.upload({\n\t\t\t\turl: 'api/employees/uploadphoto',\n\t\t\t\tdata: {\n\t\t\t\t\tfile: employeePhoto,\n\t\t\t\t\tfileName: employeeData.eid + '.' + employeePhoto.name.split('.').pop()\n\t\t\t\t}\n\t\t\t}).then(function (resp) {\n\t\t\t\tconsole.log('Success ' + resp.config.data.file.name + 'uploaded. Response: ' + resp.data);\n\t\t\t}, function (resp) {\n\t\t\t\tconsole.log('Error status: ' + resp.status);\n\t\t\t}, function (evt) {\n\t\t\t\tvar progressPercentage = parseInt(100.0 * evt.loaded / evt.total);\n\t\t\t\tconsole.log('progress: ' + progressPercentage + '% ' + evt.config.data.file.name);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserResourceService', edUserResourceService);\n\n\tedUserResourceService.$inject = ['$resource'];\n\n\tfunction edUserResourceService($resource) {\n\t\tvar userResource = $resource('/api/users/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\tuserResource.prototype.isAdmin = function () {\n\t\t\treturn this.roles && this.roles.indexOf('admin') > -1;\n\t\t};\n\n\t\treturn userResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edUserService', edUserService);\n\n\tedUserService.$inject = ['$rootScope', 'edCachedUserResourceService'];\n\n\tfunction edUserService($rootScope, edUserResourceService) {\n\t\tvar selectedUser = null;\n\t\tvar service = {\n\t\t\tgetAllUsers: getAllUsers,\n\t\t\tgetSelectedUser: getSelectedUser,\n\t\t\tsetSelectedUser: setSelectedUser\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all user from the database\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} users\n\t\t */\n\t\tfunction getAllUsers(cacheBust) {\n\t\t\treturn edUserResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected user\n\t\t *\n\t\t * @return {object} selected user\n\t\t */\n\t\tfunction getSelectedUser() {\n\t\t\treturn selectedUser;\n\t\t}\n\n\t\t/**\n\t\t * Updates the selected user\n\t\t *\n\t\t * @param {Object} user the user select / deselect\n\t\t * @return {Array} selected user\n\t\t */\n\t\tfunction setSelectedUser(user) {\n\t\t\t// Deselect the currently selected user\n\t\t\tif (!user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\tselectedUser = null;\n\t\t\t\t// Deselect the currently selected user and (possibly) select the new one\n\t\t\t} else if (user && selectedUser) {\n\t\t\t\tselectedUser.selected = false;\n\t\t\t\t// Select the new user\n\t\t\t\tif (selectedUser._id !== user._id) {\n\t\t\t\t\tuser.selected = true;\n\t\t\t\t\tselectedUser = user;\n\t\t\t\t\t// Just remove the currently selected user\n\t\t\t\t} else {\n\t\t\t\t\tselectedUser = null;\n\t\t\t\t}\n\t\t\t\t// Select the requested user (none currently selected)\n\t\t\t} else if (user && !selectedUser) {\n\t\t\t\tuser.selected = true;\n\t\t\t\tselectedUser = user;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectedUserChange', selectedUser);\n\t\t\treturn selectedUser;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateEmployeeCtrl', edCreateEmployeeCtrl);\n\n\tedCreateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edSidebarService', 'edEmployeeAdminService', 'edIdentityService', '_'];\n\n\tfunction edCreateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edSidebarService, edEmployeeAdminService, edIdentityService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.createEmployee = createEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.managers = null;\n\t\tvm.newEmployee = {};\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tresetForm();\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t}\n\n\t\tfunction resetForm() {\n\t\t\tvm.newEmployee = {\n\t\t\t\teid: '',\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\tnickname: '',\n\t\t\t\temail: '',\n\t\t\t\tphone: '',\n\t\t\t\text: '',\n\t\t\t\tdepartment: '',\n\t\t\t\ttitle: '',\n\t\t\t\tteam: '',\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: '',\n\t\t\t\tfloor: '',\n\t\t\t\tseat: '',\n\t\t\t\thasReports: '',\n\t\t\t\tmid: '',\n\t\t\t\tbirthdate: ''\n\t\t\t};\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t}\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction createEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.newEmployee.eid,\n\t\t\t\tfirstName: vm.newEmployee.firstName,\n\t\t\t\tlastName: vm.newEmployee.lastName,\n\t\t\t\tnickname: vm.newEmployee.nickname,\n\t\t\t\temail: vm.newEmployee.email,\n\t\t\t\tphone: vm.newEmployee.phone,\n\t\t\t\text: vm.newEmployee.ext,\n\t\t\t\tdepartment: vm.newEmployee.department,\n\t\t\t\ttitle: vm.newEmployee.title,\n\t\t\t\tteam: vm.newEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.newEmployee.location,\n\t\t\t\tfloor: vm.newEmployee.floor,\n\t\t\t\tseat: vm.newEmployee.seat,\n\t\t\t\thasReports: vm.newEmployee.hasReports,\n\t\t\t\tmid: vm.newEmployee.mid,\n\t\t\t\tbirthdate: vm.newEmployee.birthdate\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.newEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.newEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedEmployeeAdminService.createEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('New Employee Added!');\n\t\t\t\t// upload the employee photo if there is one\n\t\t\t\tif (vm.newEmployee.image) {\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(vm.newEmployee.image, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\t// update the selected employee to add so we can update them\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + vm.newEmployee.image.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tresetForm();\n\t\t\t\t$scope.createEmployeeForm.$setPristine();\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCreateUserCtrl', edCreateUserCtrl);\n\n\tedCreateUserCtrl.$inject = ['$state', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edCreateUserCtrl($state, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.createUser = createUser;\n\t\tvm.newUser = {};\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction createUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.newUser.username,\n\t\t\t\tpassword: vm.newUser.password,\n\t\t\t\tfirstName: vm.newUser.firstName,\n\t\t\t\tlastName: vm.newUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.newUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tedAuthService.createUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account created!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edLoginCtrl', edLoginCtrl);\n\n\tedLoginCtrl.$inject = ['edIdentityService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edLoginCtrl(edIdentityService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signin = signin;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\n\t\tfunction signin(username, password) {\n\t\t\tedAuthService.authenticateUser(username, password).then(function (success) {\n\t\t\t\tif (success) {\n\t\t\t\t\tedNotifierService.notify('You have successfully signed in!');\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Username / Password combination incorrect');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerFloorCtrl', edSeatPickerFloorCtrl);\n\n\tedSeatPickerFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$scope', 'edSidebarService', '_'];\n\n\tfunction edSeatPickerFloorCtrl(edEmployeeService, edDeskService, $state, $scope, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\tvm.desks = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tcheckForSelectedEmployee(vm.selectedEmployees);\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tcheckForSelectedEmployee(selectedEmployees);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction checkForSelectedEmployee(selectedEmployees) {\n\t\t\tif (selectedEmployees.length !== 1) {\n\t\t\t\t$state.go('admin.seat-picker');\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edSeatPickerCtrl', edSeatPickerCtrl);\n\n\tedSeatPickerCtrl.$inject = ['$scope', 'edEmployeeService', 'edEmployeeAdminService', 'edNotifierService', 'edSidebarService'];\n\n\tfunction edSeatPickerCtrl($scope, edEmployeeService, edEmployeeAdminService, edNotifierService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.setSelectMultipleEmployees(false)[0];\n\t\tvm.setRemoteEmployee = setRemoteEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tfunction setRemoteEmployee() {\n\t\t\tvar newEmployeeData = {\n\t\t\t\tlocation: 'oth',\n\t\t\t\tfloor: null,\n\t\t\t\tseat: ''\n\t\t\t};\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function () {\n\t\t\t\tedNotifierService.notify('Employee location set to remote');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateEmployeeCtrl', edUpdateEmployeeCtrl);\n\n\tedUpdateEmployeeCtrl.$inject = ['$scope', 'edNotifierService', 'edEmployeeService', 'edDeskService', 'edEmployeeAdminService', 'edIdentityService', 'edSidebarService', '_'];\n\n\tfunction edUpdateEmployeeCtrl($scope, edNotifierService, edEmployeeService, edDeskService, edEmployeeAdminService, edIdentityService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.updateEmployee = updateEmployee;\n\t\tvm.deleteEmployee = deleteEmployee;\n\t\tvm.cancelUpdateEmployee = cancelUpdateEmployee;\n\t\tvm.desks = edDeskService.getAllDesks();\n\t\tvm.selectedEmployee = null;\n\t\tvm.managers = null;\n\t\tvm.filteredManagers = [];\n\t\tvm.locationOptions = [\n\t\t\t{\n\t\t\t\tvalue: 'buf',\n\t\t\t\ttext: 'Buffalo'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'nyc',\n\t\t\t\ttext: 'NYC'\n\t\t\t},\n\t\t\t{\n\t\t\t\tvalue: 'oth',\n\t\t\t\ttext: 'Remote'\n\t\t\t}\n\t\t];\n\t\tvm.departments = [\n\t\t\t'Carrier Relations',\n\t\t\t'Client Service',\n\t\t\t'Client Service Management',\n\t\t\t'Configuration',\n\t\t\t'Corporate',\n\t\t\t'Development',\n\t\t\t'Employee Services',\n\t\t\t'Field Sales',\n\t\t\t'Finance',\n\t\t\t'HR',\n\t\t\t'Implementation',\n\t\t\t'Infrastructure / Tech Ops',\n\t\t\t'Marketing',\n\t\t\t'Product Strategy',\n\t\t\t'Strategic Operational Support',\n\t\t\t'QA / Reporting / Billing'\n\t\t];\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t\tvar selectedEmployees = edEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateEmployee(selectedEmployees) {\n\t\t\tvm.selectedEmployee = {\n\t\t\t\teid: selectedEmployees[0].eid,\n\t\t\t\tfirstName: selectedEmployees[0].firstName,\n\t\t\t\tlastName: selectedEmployees[0].lastName,\n\t\t\t\tnickname: selectedEmployees[0].nickname,\n\t\t\t\temail: selectedEmployees[0].email,\n\t\t\t\tphone: selectedEmployees[0].phone,\n\t\t\t\text: selectedEmployees[0].ext,\n\t\t\t\ttitle: selectedEmployees[0].title,\n\t\t\t\tdepartment: selectedEmployees[0].department,\n\t\t\t\tteam: selectedEmployees[0].team,\n\t\t\t\tguilds: {},\n\t\t\t\tcommittees: {},\n\t\t\t\tlocation: selectedEmployees[0].location,\n\t\t\t\tfloor: selectedEmployees[0].floor,\n\t\t\t\tseat: selectedEmployees[0].seat,\n\t\t\t\thasReports: selectedEmployees[0].hasReports,\n\t\t\t\tmid: selectedEmployees[0].mid,\n\t\t\t\tbirthdate: selectedEmployees[0].birthdate\n\t\t\t};\n\n\t\t\t_.forEach(selectedEmployees[0].guilds, function (guild) {\n\t\t\t\tvm.selectedEmployee.guilds[guild] = true;\n\t\t\t});\n\n\t\t\t_.forEach(selectedEmployees[0].committees, function (committee) {\n\t\t\t\tvm.selectedEmployee.committees[committee] = true;\n\t\t\t});\n\n\t\t\tfilterManagers(selectedEmployees[0]);\n\t\t}\n\n\t\t/**\n\t\t * Filter out the selected employee and their direct reports from the managers list\n\t\t *\n\t\t * @param {Object} selectedEmployee employee data for selected employee\n\t\t * @return {Boolean} to include this manager in the list\n\t\t */\n\t\tfunction filterManagers(selectedEmployee) {\n\t\t\tif (vm.managers && selectedEmployee) {\n\t\t\t\tvm.filteredManagers = _.filter(vm.managers, function (manager) {\n\t\t\t\t\t// TODO: Recursively filter out direct reports of direct reports\n\t\t\t\t\treturn (selectedEmployee.eid !== manager.eid) && (selectedEmployee.eid !== manager.mid);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction createManagerList(employees) {\n\t\t\tvm.managers = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.hasReports === true;\n\t\t\t});\n\t\t\tfilterManagers(vm.selectedEmployee);\n\t\t}\n\n\t\tvar selectedEmployeesChangeEvent = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tif (selectedEmployees.length === 1) {\n\t\t\t\tpopulateEmployee(selectedEmployees);\n\t\t\t} else {\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedEmployeesChangeEvent);\n\n\t\tvar employeesUpdatedEvent = $scope.$on('employeesUpdated', function () {\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(createManagerList);\n\t\t});\n\n\t\t$scope.$on('$destroy', employeesUpdatedEvent);\n\n\t\tfunction updateEmployee() {\n\t\t\t// Get the employee data from the form\n\t\t\tvar newEmployeeData = {\n\t\t\t\teid: vm.selectedEmployee.eid,\n\t\t\t\tfirstName: vm.selectedEmployee.firstName,\n\t\t\t\tlastName: vm.selectedEmployee.lastName,\n\t\t\t\tnickname: vm.selectedEmployee.nickname,\n\t\t\t\temail: vm.selectedEmployee.email,\n\t\t\t\tphone: vm.selectedEmployee.phone,\n\t\t\t\text: vm.selectedEmployee.ext,\n\t\t\t\ttitle: vm.selectedEmployee.title,\n\t\t\t\tdepartment: vm.selectedEmployee.department,\n\t\t\t\tteam: vm.selectedEmployee.team,\n\t\t\t\tguilds: [],\n\t\t\t\tcommittees: [],\n\t\t\t\tlocation: vm.selectedEmployee.location,\n\t\t\t\tfloor: vm.selectedEmployee.floor,\n\t\t\t\tseat: vm.selectedEmployee.seat,\n\t\t\t\thasReports: vm.selectedEmployee.hasReports,\n\t\t\t\tmid: vm.selectedEmployee.mid,\n\t\t\t\tbirthdate: vm.selectedEmployee.birthdate\n\t\t\t};\n\n\t\t\t// Add all the selected guilds\n\t\t\t_.forEach(vm.selectedEmployee.guilds, function (include, guild) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.guilds.push(guild);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Add all the selected committees\n\t\t\t_.forEach(vm.selectedEmployee.committees, function (include, committee) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewEmployeeData.committees.push(committee);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Save the image file for uploading\n\t\t\tvar imageFile = vm.selectedEmployee.imageFile;\n\n\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\tedNotifierService.notify('Employee information updated!');\n\t\t\t\tif (imageFile) {\n\t\t\t\t\t// upload the file to the file system\n\t\t\t\t\tedEmployeeAdminService.uploadEmployeePhoto(imageFile, employee);\n\t\t\t\t\t// Now update the employee record in the DB with the correct filename\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tnewEmployeeData.image = employee.eid + '.' + imageFile.name.split('.').pop().toLowerCase();\n\t\t\t\t\tedEmployeeAdminService.updateEmployee(newEmployeeData).then(function (employee) {\n\t\t\t\t\t\t//photo upload successful\n\t\t\t\t\t}, function () {\n\t\t\t\t\t\tedNotifierService.error('Employee Photo Not Added.');\n\t\t\t\t\t});\n\t\t\t\t\timageFile = null;\n\t\t\t\t}\n\t\t\t\tvm.selectedEmployee = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Marks employee as deleted\n\t\t * Makes all direct reports of the deleted employee direct reports of the employee's manager\n\t\t */\n\t\tfunction deleteEmployee() {\n\t\t\t// Save employee to delete for later\n\t\t\tvar deletedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\t\t// Find all employees that report to this employee and make them report to the next level up\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(\n\t\t\t\tfunction (employees) {\n\t\t\t\t\tvar eid = deletedEmployee.eid;\n\t\t\t\t\tvar mid = deletedEmployee.mid;\n\t\t\t\t\tvar directReports = _.filter(employees, {'mid': eid});\n\t\t\t\t\t_.forEach(directReports, function (directReport) {\n\t\t\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(directReport);\n\t\t\t\t\t\tedEmployeeAdminService.updateEmployee({mid: mid});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t// Now delete the employee that was requested to be deleted\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(deletedEmployee);\n\n\t\t\tedEmployeeAdminService.updateEmployee({deleted: true}).then(function (employee) {\n\t\t\t\tedNotifierService.notify(employee.firstName + ' ' + employee.lastName + ' deleted!');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\n\t\tfunction cancelUpdateEmployee() {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUpdateUserCtrl', edUpdateUserCtrl);\n\n\tedUpdateUserCtrl.$inject = ['$scope', 'edUserService', 'edNotifierService', 'edAuthService', 'edSidebarService'];\n\n\tfunction edUpdateUserCtrl($scope, edUserService, edNotifierService, edAuthService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.selectedUser = edUserService.getSelectedUser();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tif (vm.selectedUser) {\n\t\t\t\tpopulateUserInfo(vm.selectedUser);\n\t\t\t}\n\t\t}\n\n\t\tfunction populateUserInfo(user) {\n\t\t\tvm.selectedUser = {\n\t\t\t\tfirstName: user.firstName,\n\t\t\t\tlastName: user.lastName,\n\t\t\t\tusername: user.username,\n\t\t\t\troles: {}\n\t\t\t};\n\n\t\t\t_.forEach(user.roles, function (role) {\n\t\t\t\tvm.selectedUser.roles[role] = true;\n\t\t\t});\n\t\t}\n\n\t\tvar selectedUserChangeEvent = $scope.$on('selectedUserChange', function (event, selectedUser) {\n\t\t\tif (selectedUser) {\n\t\t\t\tpopulateUserInfo(selectedUser);\n\t\t\t} else {\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', selectedUserChangeEvent);\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tpassword: vm.selectedUser.password,\n\t\t\t\tfirstName: vm.selectedUser.firstName,\n\t\t\t\tlastName: vm.selectedUser.lastName,\n\t\t\t\troles: []\n\t\t\t};\n\n\t\t\t// Add all the selected roles\n\t\t\t_.forEach(vm.selectedUser.roles, function (include, role) {\n\t\t\t\tif (include) {\n\t\t\t\t\tnewUserData.roles.push(role);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (vm.selectedUser.password && vm.selectedUser.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.selectedUser.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\tvm.selectedUser = null;\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserListCtrl', edUserListCtrl);\n\n\tedUserListCtrl.$inject = ['edUserResourceService', 'edSidebarService'];\n\n\tfunction edUserListCtrl(edUserResourceService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.users = edUserResourceService.query();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edUserProfileCtrl', edUserProfileCtrl);\n\n\tedUserProfileCtrl.$inject = ['$state', 'edIdentityService', 'edNotifierService', 'edAuthService', 'edUserService', 'edSidebarService'];\n\n\tfunction edUserProfileCtrl($state, edIdentityService, edNotifierService, edAuthService, edUserService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.updateUser = updateUser;\n\t\tvm.username = edIdentityService.currentUser.username;\n\t\tvm.fname = edIdentityService.currentUser.firstName;\n\t\tvm.lname = edIdentityService.currentUser.lastName;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedUserService.setSelectedUser(edIdentityService.currentUser);\n\t\t}\n\n\t\tfunction updateUser() {\n\t\t\tvar newUserData = {\n\t\t\t\tusername: vm.username,\n\t\t\t\tpassword: vm.password,\n\t\t\t\tfirstName: vm.fname,\n\t\t\t\tlastName: vm.lname\n\t\t\t};\n\n\t\t\tif (vm.password && vm.password.length > 0) {\n\t\t\t\tnewUserData.password = vm.password;\n\t\t\t}\n\n\t\t\tedAuthService.updateUser(newUserData).then(function () {\n\t\t\t\tedNotifierService.notify('User account updated!');\n\t\t\t\t$state.go('admin');\n\t\t\t}, function (reason) {\n\t\t\t\tedNotifierService.error(reason);\n\t\t\t});\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edBirthdaysTopbarCtrl', edBirthdaysTopbarCtrl);\n\n\tedBirthdaysTopbarCtrl.$inject = [];\n\n\tfunction edBirthdaysTopbarCtrl() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edBirthdaysCtrl', edBirthdaysCtrl);\n\n\tedBirthdaysCtrl.$inject = ['$state', '$stateParams', 'edSidebarService', 'edEmployeeService', '_', 'moment'];\n\n\tfunction edBirthdaysCtrl($state, $stateParams, edSidebarService, edEmployeeService, _, moment) {\n\t\tvar vm = this;\n\t\tvm.month = null;\n\t\tvm.birthMonthEmployees = [];\n\t\tvm.profileEmployee = profileEmployee;\n\t\tvm.months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\t\tvm.requestedMonth = $stateParams.month;\n\t\tvm.currentMonth = moment().month();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByBirthday);\n\t\t}\n\n\t\tfunction filterEmployeesByBirthday(employees) {\n\t\t\tvar currentDay = moment().date();\n\t\t\tvm.birthMonthEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\t// If the employee has a birthday and it is in the month we are looking at, display them\n\t\t\t\tif (employee.birthdate && vm.requestedMonth === vm.months[employee.birthdate.getMonth()]) {\n\t\t\t\t\t// Get the day of the month to display\n\t\t\t\t\temployee.birthday = employee.birthdate.getDate();\n\t\t\t\t\t// If the employee's birthday is today, set a property to use\n\t\t\t\t\tif (vm.requestedMonth === vm.months[vm.currentMonth] && currentDay === employee.birthday) {\n\t\t\t\t\t\temployee.birthdayToday = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'birthday');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesTopbarCtrl', edCommitteesTopbarCtrl);\n\n\tedCommitteesTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edCommitteesTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edCommitteesCtrl', edCommitteesCtrl);\n\n\tedCommitteesCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edCommitteesCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.committee = null;\n\t\tvm.committeeMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the committee based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.committee = {\n\t\t\t\tname: currentState.split('.')[1]\n\t\t\t};\n\n\t\t\tif (vm.committee.name) {\n\t\t\t\tvm.committee.text = vm.committee.name;\n\n\t\t\t\tif (vm.committee.name === 'fun-games') {\n\t\t\t\t\tvm.committee.text = 'Fun & Games';\n\t\t\t\t}\n\n\t\t\t\tif (vm.committee.name === 'diversity') {\n\t\t\t\t\tvm.committee.text = 'Cultural Diversity & Community Outreach';\n\t\t\t\t}\n\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByCommittee);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByCommittee(employees) {\n\t\t\tvm.committeeMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.committees && _.indexOf(employee.committees, vm.committee.name) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edArtifact', edArtifact);\n\n\tfunction edArtifact() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/artifact',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tfunction ctrlFunc() {\n\t\tvar vm = this;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edFooter', edFooter);\n\n\tfunction edFooter() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/footer',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService', 'edAuthService', 'edNotifierService'];\n\n\tfunction ctrlFunc(edIdentityService, edAuthService, edNotifierService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.signout = signout;\n\n\t\tfunction signout() {\n\t\t\tedAuthService.logoutUser().then(function () {\n\t\t\t\tvm.username = '';\n\t\t\t\tvm.password = '';\n\t\t\t\tedNotifierService.notify('You have successfully signed out');\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edHeader', edHeader);\n\n\tfunction edHeader() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/header',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['edIdentityService'];\n\n\tfunction ctrlFunc(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexTopbarCtrl', edIndexTopbarCtrl);\n\n\tfunction edIndexTopbarCtrl() {\n\t\t//console.log('topbar');\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edSidebarLeft', edSidebarLeft);\n\n\tfunction edSidebarLeft() {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/common/components/sidebar-left',\n\t\t\tscope: {},\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\t}\n\n\tctrlFunc.$inject = ['$scope', 'edSidebarService', 'edIdentityService'];\n\n\tfunction ctrlFunc($scope, edSidebarService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.sidebarOpen = false;\n\t\tvm.sidebarLocked = edSidebarService.getLockSidebar();\n\t\tvm.toggleSidebar = toggleSidebar;\n\t\tvm.closeSidebar = closeSidebar;\n\t\tvm.scrollSidebarTop = scrollSidebarTop;\n\n\t\tactivate();\n\n\t\t// If the sidebar is locked open, make sure it is open\n\t\tfunction activate() {\n\t\t\tif (vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = true;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, toggle it\n\t\tfunction toggleSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = !vm.sidebarOpen;\n\t\t\t}\n\t\t}\n\n\t\t// If the sidebar is not locked open, close it\n\t\tfunction closeSidebar() {\n\t\t\tif (!vm.sidebarLocked) {\n\t\t\t\tvm.sidebarOpen = false;\n\t\t\t}\n\t\t}\n\n\t\t// Watch for the sidebar locked change event\n\t\tvar deregister = $scope.$on('sidebarLockedChange', function (event, sidebarLocked) {\n\t\t\tvm.sidebarLocked = sidebarLocked;\n\t\t\tvm.sidebarOpen = vm.sidebarLocked ? true : false;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction scrollSidebarTop() {\n\t\t\t$('.nano').nanoScroller({scroll: 'top'});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').filter('edPhoneNumberFilter', edPhoneNumberFilter);\n\n\tfunction edPhoneNumberFilter() {\n\t\treturn function (tel) {\n\t\t\tif (!tel) { return ''; }\n\n\t\t\t// strip all non-digits\n\t\t\tvar value = tel.toString().trim().replace(/\\D/g, '');\n\n\t\t\tvar country, city, number;\n\n\t\t\tswitch (value.length) {\n\t\t\t\tcase 10: // +1PPP####### -> C (PPP) ###-####\n\t\t\t\t\tcountry = 1;\n\t\t\t\t\tcity = value.slice(0, 3);\n\t\t\t\t\tnumber = value.slice(3);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 11: // +CPPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value[0];\n\t\t\t\t\tcity = value.slice(1, 4);\n\t\t\t\t\tnumber = value.slice(4);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 12: // +CCCPP####### -> CCC (PP) ###-####\n\t\t\t\t\tcountry = value.slice(0, 3);\n\t\t\t\t\tcity = value.slice(3, 5);\n\t\t\t\t\tnumber = value.slice(5);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn tel;\n\t\t\t}\n\n\t\t\tif (country === 1) {\n\t\t\t\tcountry = '';\n\t\t\t}\n\n\t\t\tnumber = number.slice(0, 3) + '-' + number.slice(3);\n\n\t\t\treturn (country + ' (' + city + ') ' + number).trim();\n\t\t};\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactResourceService', edArtifactResourceService);\n\n\tedArtifactResourceService.$inject = ['$resource'];\n\n\tfunction edArtifactResourceService($resource) {\n\t\tvar artifactResource = $resource('/api/artifacts/:id', {\n\t\t\t_id: '@id'\n\t\t});\n\n\t\treturn artifactResource;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edArtifactService', edArtifactService);\n\n\tedArtifactService.$inject = ['edCachedArtifactResourceService'];\n\n\tfunction edArtifactService(edCachedArtifactResourceService) {\n\t\tvar service = {\n\t\t\tgetAllArtifacts: getAllArtifacts\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all artifacts from the database (or memory)\n\t\t *\n\t\t * @return {Array} artifacts\n\t\t */\n\t\tfunction getAllArtifacts() {\n\t\t\treturn edCachedArtifactResourceService.query();\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedArtifactResourceService', edCachedArtifactResourceService);\n\n\tedCachedArtifactResourceService.$inject = ['edArtifactResourceService'];\n\n\tfunction edCachedArtifactResourceService(edArtifactResourceService) {\n\t\tvar artifacts;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!artifacts) {\n\t\t\t\tartifacts = edArtifactResourceService.query();\n\t\t\t}\n\n\t\t\treturn artifacts;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edIdentityService', edIdentityService);\n\n\tedIdentityService.$inject = ['$window', 'edUserResourceService'];\n\n\tfunction edIdentityService($window, edUserResourceService) {\n\t\tvar currentUser;\n\t\tif (!!$window.bootstrappedUserObject) {\n\t\t\tcurrentUser = new edUserResourceService();\n\t\t\tangular.extend(currentUser, $window.bootstrappedUserObject);\n\t\t}\n\t\tvar service = {\n\t\t\tcurrentUser: currentUser,\n\t\t\tisAuthenticated: isAuthenticated,\n\t\t\tisAuthorized: isAuthorized\n\t\t};\n\t\treturn service;\n\n\t\tfunction isAuthenticated() {\n\t\t\treturn !!this.currentUser;\n\t\t}\n\n\t\tfunction isAuthorized(role) {\n\t\t\treturn !!this.currentUser && this.currentUser.roles.indexOf(role) > -1;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').value('edToastr', toastr);\n\n\tangular.module('app').factory('edNotifierService', edNotifierService);\n\n\tedNotifierService.$inject = ['edToastr'];\n\n\tfunction edNotifierService(edToastr) {\n\t\tvar service = {\n\t\t\tnotify: notify,\n\t\t\tinfo: info,\n\t\t\terror: error\n\t\t};\n\n\t\tedToastr.options = {\n\t\t\t'showDuration': '300',\n\t\t\t'hideDuration': '300'\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction notify(msg) {\n\t\t\tedToastr.success(msg);\n\t\t}\n\n\t\tfunction info(msg) {\n\t\t\tedToastr.info(msg);\n\t\t}\n\n\t\tfunction error(msg) {\n\t\t\tedToastr.error(msg);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edSidebarService', edSidebarService);\n\n\tedSidebarService.$inject = ['$rootScope'];\n\n\tfunction edSidebarService($rootScope) {\n\t\tvar sidebarLocked = false;\n\t\tvar service = {\n\t\t\tsetLockSidebar: setLockSidebar,\n\t\t\tgetLockSidebar: getLockSidebar\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction setLockSidebar(lock) {\n\t\t\tsidebarLocked = lock;\n\t\t\t$rootScope.$broadcast('sidebarLockedChange', sidebarLocked);\n\t\t\treturn sidebarLocked;\n\t\t}\n\n\t\tfunction getLockSidebar() {\n\t\t\treturn sidebarLocked;\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edNanoscroller', edNanoscroller);\n\n\tedNanoscroller.$inject = ['$timeout'];\n\n\tfunction edNanoscroller($timeout) {\n\t\tvar directive = {\n\t\t\trestrict: 'A',\n\t\t\ttemplate: '',\n\t\t\treplace: false,\n\t\t\tscope: {},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\t// Do this right away so scrollbars don't display in IE and Firefox\n\t\t\tangular.element('.nano').nanoScroller({preventPageScrolling: true});\n\t\t\t// Do this again after a few seconds to wait for the model to populate\n\t\t\t$timeout(function () {\n\t\t\t\tangular.element('.nano').nanoScroller();\n\t\t\t}, 3000);\n\t\t}\n\t}\n})();","/**\n * svg directive\n * replace img tag with its svg content\n * adaptation from https://stackoverflow.com/questions/11978995/how-to-change-color-of-svg-image-using-css-jquery-svg-image-replacement\n */\n(function () {\n\t'use strict';\n\tangular.module('app').directive('svg', svg);\n\n\tsvg.$inject = ['$http'];\n\n\tfunction svg($http) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\tscope: {\n\t\t\t\tpath: '@',\n\t\t\t\tfilename: '@'\n\t\t\t},\n\t\t\tlink: linkFunc\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, element, attrs) {\n\t\t\tvar imgId = attrs.id;\n\t\t\tvar imgClass = attrs.class;\n\t\t\tvar imgUrl = scope.path + scope.filename + '.svg';\n\n\t\t\t// Load svg content\n\t\t\t$http.get(imgUrl).success(function (data, status) {\n\t\t\t\tvar svg = angular.element(data);\n\t\t\t\tfor (var i = svg.length - 1; i >= 0; i--) {\n\t\t\t\t\tif (svg[i].constructor.name === 'SVGSVGElement') {\n\t\t\t\t\t\tsvg = angular.element(svg[i]);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgId !== 'undefined') {\n\t\t\t\t\tsvg.attr('id', imgId);\n\t\t\t\t}\n\n\t\t\t\tif (typeof imgClass !== 'undefined') {\n\t\t\t\t\tsvg.attr('class', imgClass);\n\t\t\t\t}\n\t\t\t\t// Remove invalid attributes\n\t\t\t\tsvg = svg.removeAttr('xmlns:a');\n\t\t\t\telement.replaceWith(svg);\n\t\t\t});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edFloorCtrl', edFloorCtrl);\n\n\tedFloorCtrl.$inject = ['edEmployeeService', 'edDeskService', '$state', '$stateParams', '$scope', 'edRoomService', 'edPrinterService', 'edArtifactService', 'edSidebarService', '_'];\n\n\tfunction edFloorCtrl(edEmployeeService, edDeskService, $state, $stateParams, $scope, edRoomService, edPrinterService, edArtifactService, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\t\tvm.desks = null;\n\t\tvm.rooms = null;\n\t\tvm.printers = null;\n\t\tvm.location = null;\n\t\tvm.floor = null;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\t// Get the floor based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvar locationAndFloor = currentState.split('.')[2].split('-');\n\t\t\tvm.location = locationAndFloor[0];\n\t\t\tvm.floor = parseInt(locationAndFloor[1]);\n\n\t\t\tif (vm.location === 'buf') {\n\t\t\t\tvm.locationName = 'BUF';\n\t\t\t} else if (vm.location === 'nyc') {\n\t\t\t\tvm.locationName = 'NYC';\n\t\t\t} else {\n\t\t\t\tvm.locationName = 'Remote';\n\t\t\t}\n\n\t\t\t// Map all the desks and rooms on this floor\n\t\t\tedDeskService.getAllDesks().$promise.then(deskFilter);\n\t\t\tedRoomService.getAllRooms().$promise.then(roomFilter);\n\t\t\tedPrinterService.getAllPrinters().$promise.then(printerFilter);\n\t\t\tedArtifactService.getAllArtifacts().$promise.then(artifactFilter);\n\n\t\t\tmapEmployee();\n\t\t\tmapRoom();\n\t\t\tmapPrinter();\n\t\t}\n\n\t\tvar deregisterEmployee = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tif (mappedEmployee) {\n\t\t\t\tif (mappedEmployee.floor && (mappedEmployee.location !== vm.location || mappedEmployee.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('employees.map.' + mappedEmployee.location + '-' + mappedEmployee.floor, {'seat': mappedEmployee.seat});\n\t\t\t\t} else if (!mappedEmployee.floor) {\n\t\t\t\t\t$state.go('employees.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployee);\n\n\t\tvar deregisterPrinter = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tif (mappedPrinter) {\n\t\t\t\tif (mappedPrinter.floor && (mappedPrinter.location !== vm.location || mappedPrinter.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('printers.map.' + mappedPrinter.location + '-' + mappedPrinter.floor, {'name': mappedPrinter.name});\n\t\t\t\t} else if (!mappedPrinter.floor) {\n\t\t\t\t\t$state.go('printers.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterPrinter);\n\n\t\tvar deregisterRoom = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tif (mappedRoom) {\n\t\t\t\tif (mappedRoom.floor && (mappedRoom.location !== vm.location || mappedRoom.floor !== vm.floor)) {\n\t\t\t\t\t$state.go('rooms.map.' + mappedRoom.location + '-' + mappedRoom.floor, {'name': mappedRoom.name});\n\t\t\t\t} else if (!mappedRoom.floor) {\n\t\t\t\t\t$state.go('rooms.map');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterRoom);\n\n\t\tfunction deskFilter(desks) {\n\t\t\tvm.desks = _.filter(desks, function (desk) {\n\t\t\t\treturn desk.floor === vm.floor && desk.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction roomFilter(rooms) {\n\t\t\tvm.rooms = _.filter(rooms, function (room) {\n\t\t\t\treturn room.floor === vm.floor && room.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction printerFilter(printers) {\n\t\t\tvm.printers = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.floor === vm.floor && printer.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction artifactFilter(artifacts) {\n\t\t\tvm.artifacts = _.filter(artifacts, function (artifact) {\n\t\t\t\treturn artifact.floor === vm.floor && artifact.location === vm.location;\n\t\t\t});\n\t\t}\n\n\t\tfunction mapEmployee() {\n\t\t\t// If there is a mapped employee and we know their floor\n\t\t\tif (vm.mappedEmployee && vm.mappedEmployee.floor) {\n\t\t\t\t// If the mapped employee is on a different floor, un-map them\n\t\t\t\tif (vm.floor !== vm.mappedEmployee.floor) {\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(null);\n\t\t\t\t}\n\t\t\t\t// Map an employee based on a seat number\n\t\t\t} else if ($stateParams.seat) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(mapEmployeeBySeat);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapEmployeeBySeat(employees) {\n\t\t\tvar mappedEmployeeArray = _.filter(employees, function (employee) {\n\t\t\t\treturn employee.seat === $stateParams.seat;\n\t\t\t});\n\n\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\tvm.location = vm.mappedEmployee.location;\n\t\t\t\tvm.floor = vm.mappedEmployee.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoom() {\n\t\t\t// If there is a mapped printer and we know its floor\n\t\t\tif (vm.mappedPrinter && vm.mappedPrinter.floor) {\n\t\t\t\t// If the mapped printer is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedPrinter.floor) {\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(null);\n\t\t\t\t}\n\t\t\t\t// Map an printer based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedPrinterService.getAllPrinters().$promise.then(mapPrinterByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapRoomByName(rooms) {\n\t\t\tvar mappedRoomArray = _.filter(rooms, function (room) {\n\t\t\t\treturn room.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t\tvm.floor = vm.mappedRoom.floor;\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinter() {\n\t\t\t// If there is a mapped room and we know its floor\n\t\t\tif (vm.mappedRoom && vm.mappedRoom.floor) {\n\t\t\t\t// If the mapped room is on a different floor, un-map it\n\t\t\t\tif (vm.floor !== vm.mappedRoom.floor) {\n\t\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(null);\n\t\t\t\t}\n\t\t\t\t// Map an room based on its name\n\t\t\t} else if ($stateParams.name) {\n\t\t\t\tedRoomService.getAllRooms().$promise.then(mapRoomByName);\n\t\t\t}\n\t\t}\n\n\t\tfunction mapPrinterByName(printers) {\n\t\t\tvar mappedPrinterArray = _.filter(printers, function (printer) {\n\t\t\t\treturn printer.name === $stateParams.name;\n\t\t\t});\n\n\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\tvm.floor = vm.mappedPrinter.floor;\n\t\t\t}\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edIndexCtrl', edIndexCtrl);\n\n\tedIndexCtrl.$inject = ['edSidebarService'];\n\n\tfunction edIndexCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edDesk', edDesk);\n\n\tedDesk.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edEmployeeService', '_'];\n\n\tfunction edDesk($stateParams, $document, $timeout, $compile, edEmployeeService, _) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/desk',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tlocation: '@',\n\t\t\t\tseat: '@',\n\t\t\t\torientation: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedEmployee = edEmployeeService.getMappedEmployee();\n\n\t\t\t// If coming from the profile page via a link in the employee card\n\t\t\tif ($stateParams.seat === attrs.seat && scope.mappedEmployee) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\t\tif (mappedEmployee && mappedEmployee.seat === attrs.seat) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedEmployee.displayName + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edNotifierService', 'edIdentityService', 'edPrinterService', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edNotifierService, edIdentityService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.mappedEmployee = null;\n\t\tvm.identity = edIdentityService;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapEmployee(seat, location) {\n\t\t\t// Don't map employee if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedEmployeeArray = _.filter(vm.employees, function (employee) {\n\t\t\t\t\treturn employee.seat === seat && employee.location === location;\n\t\t\t\t});\n\n\t\t\t\tif (mappedEmployeeArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedEmployee = edEmployeeService.updateMappedEmployee(mappedEmployeeArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know who sits there.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tvar selectedEmployee = edEmployeeService.updateSelectedEmployees(edEmployeeService.getMappedEmployee())[0];\n\t\t\t$state.go('employees.profile.employee', {'employee': selectedEmployee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edEmployeeCard', edEmployeeCard);\n\n\tedEmployeeCard.$inject = ['$timeout', '$state', 'edEmployeeService'];\n\n\tfunction edEmployeeCard($timeout, $state, edEmployeeService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/employees/components/employee-card',\n\t\t\tscope: {\n\t\t\t\temployee: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\t// Some people have a different username for lync than their liazon email address\n\t\t\tif (scope.employee.lync) {\n\t\t\t\tvm.twEmail = scope.employee.lync + '@towerswatson.com';\n\t\t\t} else {\n\t\t\t\tvm.twEmail = scope.employee.email.split('@')[0] + '@towerswatson.com';\n\t\t\t}\n\n\t\t\tvm.deselectEmployee = function (employee) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edEmployeeService', 'edIdentityService'];\n\n\tfunction ctrlFunc($state, edEmployeeService, edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t\tvm.mapEmployee = mapEmployee;\n\t\tvm.editEmployee = editEmployee;\n\n\t\tfunction mapEmployee(employee) {\n\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t}\n\n\t\tfunction editEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t$state.go('admin.update-employee');\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeSelectorCtrl', edEmployeeSelectorCtrl);\n\n\tedEmployeeSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edEmployeeService', 'edNotifierService', 'edPrinterService', 'edRoomService'];\n\n\tfunction edEmployeeSelectorCtrl($scope, $state, $document, edEmployeeService, edNotifierService, edPrinterService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.employees = edEmployeeService.getAllEmployees();\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.displayEmployeeInfoType = edEmployeeService.getDisplayEmployeeInfoType();\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edEmployeeService.getSelectMultipleEmployees();\n\t\tvm.filteredEmployees = edEmployeeService.getAllEmployees();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(employee) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (employee.location) {\n\t\t\t\t\treturn vm.locations.indexOf(employee.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(employee) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the employee is on a floor in BUF\n\t\t\t\t\tif (employee.floor && employee.location === 'buf') {\n\t\t\t\t\t\t// Include this employee if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(employee.floor) > -1;\n\t\t\t\t\t// Include this employee if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t// Include all filtered employees if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t// Include all filtered employees if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tif (vm.displayEmployeeInfoType === 'profile') {\n\t\t\t\tvm.selectedEmployees = edEmployeeService.updateSelectedEmployees(employee);\n\t\t\t\t// If the user is viewing an employee profile page other than the generic employee profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tvar currentState = $state.current.name;\n\t\t\t\tif (currentState !== 'employees.profile' && currentState.indexOf('employees.profile') === 0) {\n\t\t\t\t\t$state.go('employees.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayEmployeeInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedEmployeeService.updateMappedEmployee(employee);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedEmployees = edEmployeeService.addAllFilteredEmployees(vm.filteredEmployees);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif (vm.team === 'Prestige Worldwide') {\n\t\t\t\tedNotifierService.info('Investors?  Possibly you!');\n\t\t\t}\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedEmployees = edEmployeeService.removeAllSelectedEmployees();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('employees.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.employeeName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.department = '';\n\t\t\tvm.team = '';\n\t\t}\n\n\t\tvar deregisterEmployeesUpdated = $scope.$on('employeesUpdated', function (event, employees) {\n\t\t\tvm.employees = employees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterEmployeesUpdated);\n\n\t\tvar deregisterSelectMultipleEmployeesChange = $scope.$on('selectMultipleEmployeesChange', function (event, allowSelectMultipleEmployees) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleEmployeesChange);\n\n\t\tvar deregisterDisplayEmployeeInfoTypeChange = $scope.$on('displayEmployeeInfoTypeChange', function (event, displayEmployeeInfoType) {\n\t\t\tvm.displayEmployeeInfoType = displayEmployeeInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayEmployeeInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeTopbarCtrl', edEmployeeTopbarCtrl);\n\n\tedEmployeeTopbarCtrl.$inject = ['$scope', 'edEmployeeService'];\n\n\tfunction edEmployeeTopbarCtrl($scope, edEmployeeService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\n\t\tvar deregisterSelectedEmployeesChanged = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedEmployeesChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedDeskResourceService', edCachedDeskResourceService);\n\n\tedCachedDeskResourceService.$inject = ['edDeskResourceService'];\n\n\tfunction edCachedDeskResourceService(edDeskResourceService) {\n\t\tvar desks;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!desks) {\n\t\t\t\tdesks = edDeskResourceService.query();\n\t\t\t}\n\n\t\t\treturn desks;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedEmployeeResourceService', edCachedEmployeeResourceService);\n\n\tedCachedEmployeeResourceService.$inject = ['edEmployeeResourceService', '_'];\n\n\tfunction edCachedEmployeeResourceService(edEmployeeResourceService, _) {\n\t\tvar employees;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query(cacheBust) {\n\t\t\tif (!employees || cacheBust) {\n\t\t\t\temployees = edEmployeeResourceService.query({cacheKill: new Date().getTime()}, function (ees) {\n\t\t\t\t\tangular.forEach(ees, function (employee) {\n\t\t\t\t\t\t// Create a manager property for each employee\n\t\t\t\t\t\tvar manager = _.find(ees, {'eid': employee.mid});\n\t\t\t\t\t\tif (manager) {\n\t\t\t\t\t\t\tif (manager.nickname) {\n\t\t\t\t\t\t\t\temployee.manager = manager.nickname + ' ' + manager.lastName;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\temployee.manager = manager.firstName + ' ' + manager.lastName;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Create a displayName property for each employee\n\t\t\t\t\t\tif (employee.nickname) {\n\t\t\t\t\t\t\temployee.displayName = employee.nickname + ' ' + employee.lastName;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\temployee.displayName = employee.firstName + ' ' + employee.lastName;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Convert ISO date string to date object\n\t\t\t\t\t\tif (employee.birthdate) {\n\t\t\t\t\t\t\temployee.birthdate = new Date(employee.birthdate);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn employees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskResourceService', edDeskResourceService);\n\n\tedDeskResourceService.$inject = ['$resource'];\n\n\tfunction edDeskResourceService($resource) {\n\t\tvar deskResource = $resource('/api/desks/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn deskResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edDeskService', edDeskService);\n\n\tedDeskService.$inject = ['edCachedDeskResourceService'];\n\n\tfunction edDeskService(edCachedDeskResourceService) {\n\t\tvar service = {\n\t\t\tgetAllDesks: getAllDesks\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction getAllDesks() {\n\t\t\treturn edCachedDeskResourceService.query();\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeResourceService', edEmployeeResourceService);\n\n\tedEmployeeResourceService.$inject = ['$resource'];\n\n\tfunction edEmployeeResourceService($resource) {\n\t\tvar employeeResource = $resource('/api/employees/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn employeeResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edEmployeeService', edEmployeeService);\n\n\tedEmployeeService.$inject = ['$rootScope', 'edCachedEmployeeResourceService', 'edNotifierService', '_'];\n\n\tfunction edEmployeeService($rootScope, edCachedEmployeeResourceService, edNotifierService, _) {\n\t\tvar selectedEmployees = [];\n\t\tvar selectedEmployeeAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedEmployee = null;\n\t\tvar selectMultipleEmployees = false;\n\t\tvar displayEmployeeInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllEmployees: getAllEmployees,\n\t\t\tgetSelectedEmployees: getSelectedEmployees,\n\t\t\taddAllFilteredEmployees: addAllFilteredEmployees,\n\t\t\tupdateSelectedEmployees: updateSelectedEmployees,\n\t\t\tremoveAllSelectedEmployees: removeAllSelectedEmployees,\n\t\t\tsetSelectMultipleEmployees: setSelectMultipleEmployees,\n\t\t\tgetSelectMultipleEmployees: getSelectMultipleEmployees,\n\t\t\tupdateMappedEmployee: updateMappedEmployee,\n\t\t\tupdateMappedEmployeeById: updateMappedEmployeeById,\n\t\t\tgetMappedEmployee: getMappedEmployee,\n\t\t\tsetDisplayEmployeeInfoType: setDisplayEmployeeInfoType,\n\t\t\tgetDisplayEmployeeInfoType: getDisplayEmployeeInfoType,\n\t\t\tgetSelectedEmployeeAdded: getSelectedEmployeeAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all employees from the database (or memory)\n\t\t *\n\t\t * @param {Boolean} cacheBust to get data from server or memory\n\t\t * @return {Array} employees\n\t\t */\n\t\tfunction getAllEmployees(cacheBust) {\n\t\t\treturn edCachedEmployeeResourceService.query(cacheBust);\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected employees\n\t\t *\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction getSelectedEmployees() {\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered employees to the selected employees\n\t\t * Removes any unfiltered employees from selected employees\n\t\t *\n\t\t * @param {Array} employees to add to selected\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction addAllFilteredEmployees(employees) {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(employees, function (employee) {\n\t\t\t\temployee.selected = true;\n\t\t\t});\n\t\t\tselectedEmployees = employees;\n\t\t\tselectedEmployeeAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee\n\t\t *\n\t\t * @param {Object} employee to map / un-map\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction updateMappedEmployee(employee) {\n\t\t\t// Un-map the currently mapped employee\n\t\t\tif (!employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\tmappedEmployee = null;\n\t\t\t\t// Un-map the currently mapped employee and (possibly) map the new one\n\t\t\t} else if (employee && mappedEmployee) {\n\t\t\t\tmappedEmployee.mapped = false;\n\t\t\t\t// Map the new employee\n\t\t\t\tif (mappedEmployee._id !== employee._id) {\n\t\t\t\t\temployee.mapped = true;\n\t\t\t\t\tmappedEmployee = employee;\n\t\t\t\t\t// Just remove the currently mapped employee\n\t\t\t\t} else {\n\t\t\t\t\tmappedEmployee = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested employee (none currently mapped)\n\t\t\t} else if (employee && !mappedEmployee) {\n\t\t\t\temployee.mapped = true;\n\t\t\t\tmappedEmployee = employee;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedEmployeeChange', mappedEmployee);\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped employee using an employee ID\n\t\t */\n\t\tfunction updateMappedEmployeeById(id) {\n\t\t\tgetAllEmployees().$promise.then(function (employees) {\n\t\t\t\tvar employee = _.filter(employees, function (employee) {\n\t\t\t\t\treturn employee.eid === parseInt(id);\n\t\t\t\t});\n\t\t\t\tif (employee.length > 0) {\n\t\t\t\t\tupdateMappedEmployee(employee[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('I\\'m not sure who you\\'re looking for.');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped employee\n\t\t *\n\t\t * @return {Object} mapped employee\n\t\t */\n\t\tfunction getMappedEmployee() {\n\t\t\treturn mappedEmployee;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayEmployeeInfoType(infoType) {\n\t\t\tdisplayEmployeeInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayEmployeeInfoTypeChange', displayEmployeeInfoType);\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayEmployeeInfoType() {\n\t\t\treturn displayEmployeeInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected employees\n\t\t *\n\t\t * @param {Object} employee the employee to add / remove from selected employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction updateSelectedEmployees(employee) {\n\t\t\t// Allowed to have multiple employees selected\n\t\t\tif (selectMultipleEmployees) {\n\t\t\t\t// This employee is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\tselectedEmployees.unshift(employee);\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees.splice(selectedEmployees.indexOf(employee), 1);\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple employees selected\n\t\t\t} else {\n\t\t\t\t// This employee is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!employee.selected) {\n\t\t\t\t\t// set all selected employee's selected property to false\n\t\t\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this employee's selected property to true\n\t\t\t\t\temployee.selected = true;\n\t\t\t\t\t// replace the array of selected employees with just this one employee\n\t\t\t\t\tselectedEmployees = [employee];\n\t\t\t\t\tselectedEmployeeAdded = true;\n\t\t\t\t\t// This employee was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\temployee.selected = false;\n\t\t\t\t\tselectedEmployees = [];\n\t\t\t\t\tselectedEmployeeAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected employees\n\t\t */\n\t\tfunction removeAllSelectedEmployees() {\n\t\t\tangular.forEach(selectedEmployees, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedEmployees = [];\n\t\t\tselectedEmployeeAdded = false;\n\t\t\t$rootScope.$broadcast('selectedEmployeesChange', selectedEmployees);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected employee was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected employees added\n\t\t */\n\t\tfunction getSelectedEmployeeAdded() {\n\t\t\treturn selectedEmployeeAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the employee profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on employee profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the employee profile page number\n\t\t *\n\t\t * @return {Number} employee profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one employee at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple employees\n\t\t * @return {Array} selected employees\n\t\t */\n\t\tfunction setSelectMultipleEmployees(selectMultiple) {\n\t\t\tselectMultipleEmployees = selectMultiple;\n\t\t\t// If there are multiple selected employees, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedEmployees.length > 1) {\n\t\t\t\tvar lastSelectedEmployee = selectedEmployees.shift();\n\t\t\t\t// This employee will be reselected in updateSelectedEmployees\n\t\t\t\tlastSelectedEmployee.selected = false;\n\t\t\t\tselectedEmployees = updateSelectedEmployees(lastSelectedEmployee);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleEmployeesChange', selectMultipleEmployees);\n\t\t\treturn selectedEmployees;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple employees to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple employee\n\t\t */\n\t\tfunction getSelectMultipleEmployees() {\n\t\t\treturn selectMultipleEmployees;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeCtrl', edEmployeeCtrl);\n\n\tedEmployeeCtrl.$inject = ['edSidebarService'];\n\n\tfunction edEmployeeCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsTopbarCtrl', edGuildsTopbarCtrl);\n\n\tedGuildsTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edGuildsTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edGuildsCtrl', edGuildsCtrl);\n\n\tedGuildsCtrl.$inject = ['$state', 'edSidebarService', 'edEmployeeService', '_'];\n\n\tfunction edGuildsCtrl($state, edSidebarService, edEmployeeService, _) {\n\t\tvar vm = this;\n\t\tvm.guild = null;\n\t\tvm.guildMembers = [];\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t\t// Get the guild based on the current state\n\t\t\tvar currentState = $state.current.name;\n\t\t\tvm.guild = currentState.split('.')[1];\n\n\t\t\tif (vm.guild) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(filterEmployeesByGuild);\n\t\t\t}\n\t\t}\n\n\t\tfunction filterEmployeesByGuild(employees) {\n\t\t\tvm.guildMembers = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tif (employee.guilds && _.indexOf(employee.guilds, vm.guild) > -1) {\n\t\t\t\t\treturn employee;\n\t\t\t\t}\n\t\t\t}), 'lastName');\n\t\t}\n\n\t\tfunction profileEmployee(employee) {\n\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t$state.go('employees.profile.employee', {'employee': employee.eid});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpTopbarCtrl', edHelpTopbarCtrl);\n\n\tedHelpTopbarCtrl.$inject = ['edIdentityService'];\n\n\tfunction edHelpTopbarCtrl(edIdentityService) {\n\t\tvar vm = this;\n\t\tvm.identity = edIdentityService;\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpCtrl', edHelpCtrl);\n\n\tedHelpCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinterCard', edPrinterCard);\n\n\tedPrinterCard.$inject = ['$timeout', '$state', 'edPrinterService'];\n\n\tfunction edPrinterCard($timeout, $state, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer-card',\n\t\t\tscope: {\n\t\t\t\tprinter: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectPrinter = function (printer) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService'];\n\n\tfunction ctrlFunc($state, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\n\t\tfunction mapPrinter(printer) {\n\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterSelectorCtrl', edPrinterSelectorCtrl);\n\n\tedPrinterSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edPrinterService', 'edEmployeeService', 'edRoomService'];\n\n\tfunction edPrinterSelectorCtrl($scope, $state, $document, edPrinterService, edEmployeeService, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.displayPrinterInfoType = edPrinterService.getDisplayPrinterInfoType();\n\t\tvm.selectPrinter = selectPrinter;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edPrinterService.getSelectMultiplePrinters();\n\t\tvm.filteredEmployees = edPrinterService.getAllPrinters();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(printer) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (printer.location) {\n\t\t\t\t\treturn vm.locations.indexOf(printer.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(printer) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the printer is on a floor in BUF\n\t\t\t\t\tif (printer.floor && printer.location === 'buf') {\n\t\t\t\t\t\t// Include this printer if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(printer.floor) > -1;\n\t\t\t\t\t\t// Include this printer if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered printer if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered printer if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinter(printer) {\n\t\t\tif (vm.displayPrinterInfoType === 'profile') {\n\t\t\t\tvm.selectedPrinters = edPrinterService.updateSelectedPrinters(printer);\n\t\t\t\t// If the user is viewing a printer profile page other than the generic printer profile page\n\t\t\t\t// go back to the generic profile page\n\t\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t\t$state.go('printers.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayPrinterInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(printer);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedPrinters = edPrinterService.addAllFilteredPrinters(vm.filteredPrinters);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedPrinters = edPrinterService.removeAllSelectedPrinters();\n\t\t\tif ($state.current.name !== 'printers.profile') {\n\t\t\t\t$state.go('printers.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.printerName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.brand = '';\n\t\t\tvm.color = '';\n\t\t}\n\n\t\tvar deregisterSelectMultiplePrintersChange = $scope.$on('selectMultiplePrintersChange', function (event, allowSelectMultiplePrinters) {\n\t\t\tvm.allowSelectAll = allowSelectMultiplePrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultiplePrintersChange);\n\n\t\tvar deregisterDisplayPrinterInfoTypeChange = $scope.$on('displayPrinterInfoTypeChange', function (event, displayPrinterInfoType) {\n\t\t\tvm.displayPrinterInfoType = displayPrinterInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayPrinterInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterTopbarCtrl', edPrinterTopbarCtrl);\n\n\tedPrinterTopbarCtrl.$inject = ['$scope', 'edPrinterService'];\n\n\tfunction edPrinterTopbarCtrl($scope, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\n\t\tvar deregisterSelectedPrintersChanged = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedPrintersChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edPrinter', edPrinter);\n\n\tedPrinter.$inject = ['$stateParams', '$document', '$timeout', '$compile', 'edPrinterService'];\n\n\tfunction edPrinter($stateParams, $document, $timeout, $compile, edPrinterService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/printers/components/printer',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\torientation: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\t\t// If coming from the profile page via a link in the printer card\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedPrinter) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + scope.mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\t\tif (mappedPrinter && mappedPrinter.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append($compile('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div>' +\n\t\t\t\t\t\t\t\t'<div class=\"mapped-label label bg-danger\" ng-click=\"vm.viewProfile()\">' + mappedPrinter.name + '</div></div>')(scope));\n\t\t\t\t\t\t\t// Do some math to figure out how to center the label\n\t\t\t\t\t\t\tvar markerLabel = $('.mapped-label');\n\t\t\t\t\t\t\tvar leftPos = (el.outerWidth() / 2) - (markerLabel.outerWidth() / 2);\n\t\t\t\t\t\t\tmarkerLabel.css('left', leftPos);\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edPrinterService', 'edNotifierService', 'edEmployeeService', 'edRoomService', '_'];\n\n\tfunction ctrlFunc($state, edPrinterService, edNotifierService, edEmployeeService, edRoomService, _) {\n\t\tvar vm = this;\n\t\tvm.mapPrinter = mapPrinter;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.printers = edPrinterService.getAllPrinters();\n\t\tvm.mappedPrinter = null;\n\n\t\tvar viewingProfile = false;\n\n\t\tfunction mapPrinter(name) {\n\t\t\t// Don't map printer if the user wants to view the profile\n\t\t\tif (!viewingProfile) {\n\t\t\t\tvar mappedPrinterArray = _.filter(vm.printers, function (printer) {\n\t\t\t\t\treturn printer.name === name;\n\t\t\t\t});\n\n\t\t\t\tif (mappedPrinterArray.length > 0) {\n\t\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\t\tedRoomService.updateMappedRoom(null);\n\t\t\t\t\tvm.mappedPrinter = edPrinterService.updateMappedPrinter(mappedPrinterArray[0]);\n\t\t\t\t} else {\n\t\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this printer.');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile() {\n\t\t\tviewingProfile = true;\n\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\tvar selectedPrinter = edPrinterService.updateSelectedPrinters(edPrinterService.getMappedPrinter())[0];\n\t\t\t$state.go('printers.profile.name', {'printer': selectedPrinter.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedPrinterResourceService', edCachedPrinterResourceService);\n\n\tedCachedPrinterResourceService.$inject = ['edPrinterResourceService'];\n\n\tfunction edCachedPrinterResourceService(edPrinterResourceService) {\n\t\tvar printers;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!printers) {\n\t\t\t\tprinters = edPrinterResourceService.query();\n\t\t\t}\n\n\t\t\treturn printers;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterResourceService', edPrinterResourceService);\n\n\tedPrinterResourceService.$inject = ['$resource'];\n\n\tfunction edPrinterResourceService($resource) {\n\t\tvar printerResource = $resource('/api/printers/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn printerResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edPrinterService', edPrinterService);\n\n\tedPrinterService.$inject = ['$rootScope', 'edCachedPrinterResourceService'];\n\n\tfunction edPrinterService($rootScope, edCachedPrinterResourceService) {\n\t\tvar selectedPrinters = [];\n\t\tvar selectedPrinterAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedPrinter = null;\n\t\tvar selectMultiplePrinters = false;\n\t\tvar displayPrinterInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllPrinters: getAllPrinters,\n\t\t\tgetSelectedPrinters: getSelectedPrinters,\n\t\t\taddAllFilteredPrinters: addAllFilteredPrinters,\n\t\t\tupdateSelectedPrinters: updateSelectedPrinters,\n\t\t\tremoveAllSelectedPrinters: removeAllSelectedPrinters,\n\t\t\tsetSelectMultiplePrinters: setSelectMultiplePrinters,\n\t\t\tgetSelectMultiplePrinters: getSelectMultiplePrinters,\n\t\t\tupdateMappedPrinter: updateMappedPrinter,\n\t\t\tgetMappedPrinter: getMappedPrinter,\n\t\t\tsetDisplayPrinterInfoType: setDisplayPrinterInfoType,\n\t\t\tgetDisplayPrinterInfoType: getDisplayPrinterInfoType,\n\t\t\tgetSelectedPrinterAdded: getSelectedPrinterAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all printers from the database (or memory)\n\t\t *\n\t\t * @return {Array} printers\n\t\t */\n\t\tfunction getAllPrinters() {\n\t\t\treturn edCachedPrinterResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected printers\n\t\t *\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction getSelectedPrinters() {\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered printers to the selected printers\n\t\t * Removes any unfiltered printers from selected printers\n\t\t *\n\t\t * @param {Array} printers to add to selected\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction addAllFilteredPrinters(printers) {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(printers, function (printer) {\n\t\t\t\tprinter.selected = true;\n\t\t\t});\n\t\t\tselectedPrinters = printers;\n\t\t\tselectedPrinterAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped printer\n\t\t *\n\t\t * @param {Object} printer to map / un-map\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction updateMappedPrinter(printer) {\n\t\t\t// Un-map the currently mapped printer\n\t\t\tif (!printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\tmappedPrinter = null;\n\t\t\t\t// Un-map the currently mapped printer and (possibly) map the new one\n\t\t\t} else if (printer && mappedPrinter) {\n\t\t\t\tmappedPrinter.mapped = false;\n\t\t\t\t// Map the new printer\n\t\t\t\tif (mappedPrinter._id !== printer._id) {\n\t\t\t\t\tprinter.mapped = true;\n\t\t\t\t\tmappedPrinter = printer;\n\t\t\t\t\t// Just remove the currently mapped printer\n\t\t\t\t} else {\n\t\t\t\t\tmappedPrinter = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested printer (none currently mapped)\n\t\t\t} else if (printer && !mappedPrinter) {\n\t\t\t\tprinter.mapped = true;\n\t\t\t\tmappedPrinter = printer;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedPrinterChange', mappedPrinter);\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped printer\n\t\t *\n\t\t * @return {Object} mapped printer\n\t\t */\n\t\tfunction getMappedPrinter() {\n\t\t\treturn mappedPrinter;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayPrinterInfoType(infoType) {\n\t\t\tdisplayPrinterInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayPrinterInfoTypeChange', displayPrinterInfoType);\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayPrinterInfoType() {\n\t\t\treturn displayPrinterInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected printers\n\t\t *\n\t\t * @param {Object} printer the printer to add / remove from selected printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction updateSelectedPrinters(printer) {\n\t\t\t// Allowed to have multiple printers selected\n\t\t\tif (selectMultiplePrinters) {\n\t\t\t\t// This printer is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\tselectedPrinters.unshift(printer);\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters.splice(selectedPrinters.indexOf(printer), 1);\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple printers selected\n\t\t\t} else {\n\t\t\t\t// This printer is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!printer.selected) {\n\t\t\t\t\t// set all selected printer's selected property to false\n\t\t\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this printer's selected property to true\n\t\t\t\t\tprinter.selected = true;\n\t\t\t\t\t// replace the array of selected printers with just this one printer\n\t\t\t\t\tselectedPrinters = [printer];\n\t\t\t\t\tselectedPrinterAdded = true;\n\t\t\t\t\t// This printer was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\tprinter.selected = false;\n\t\t\t\t\tselectedPrinters = [];\n\t\t\t\t\tselectedPrinterAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected printers\n\t\t */\n\t\tfunction removeAllSelectedPrinters() {\n\t\t\tangular.forEach(selectedPrinters, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedPrinters = [];\n\t\t\tselectedPrinterAdded = false;\n\t\t\t$rootScope.$broadcast('selectedPrintersChange', selectedPrinters);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected printer was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected printers added\n\t\t */\n\t\tfunction getSelectedPrinterAdded() {\n\t\t\treturn selectedPrinterAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the printer profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on printer profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the printer profile page number\n\t\t *\n\t\t * @return {Number} printer profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one printer at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple printers\n\t\t * @return {Array} selected printers\n\t\t */\n\t\tfunction setSelectMultiplePrinters(selectMultiple) {\n\t\t\tselectMultiplePrinters = selectMultiple;\n\t\t\t// If there are multiple selected printers, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedPrinters.length > 1) {\n\t\t\t\tvar lastSelectedPrinter = selectedPrinters.shift();\n\t\t\t\t// This printer will be reselected in updateSelectedPrinters\n\t\t\t\tlastSelectedPrinter.selected = false;\n\t\t\t\tselectedPrinters = updateSelectedPrinters(lastSelectedPrinter);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultiplePrintersChange', selectMultiplePrinters);\n\t\t\treturn selectedPrinters;\n\t\t}\n\n\t\t/**\n\t\t * Gets whether or not we should allow multiple printers to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple printer\n\t\t */\n\t\tfunction getSelectMultiplePrinters() {\n\t\t\treturn selectMultiplePrinters;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterCtrl', edPrinterCtrl);\n\n\tedPrinterCtrl.$inject = ['edSidebarService'];\n\n\tfunction edPrinterCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoomCard', edRoomCard);\n\n\tedRoomCard.$inject = ['$timeout', '$state', 'edRoomService'];\n\n\tfunction edRoomCard($timeout, $state, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room-card',\n\t\t\tscope: {\n\t\t\t\troom: '='\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs, vm) {\n\t\t\tvm.deselectRoom = function (room) {\n\t\t\t\tvar parent = el.parent();\n\t\t\t\tvar child = el.children().first();\n\t\t\t\tchild.addClass('scale-down');\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tparent.addClass('shrink-left');\n\t\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t\t}\n\t\t\t\t}, 250);\n\t\t\t};\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService'];\n\n\tfunction ctrlFunc($state, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\n\t\tfunction mapRoom(room) {\n\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomSelectorCtrl', edRoomSelectorCtrl);\n\n\tedRoomSelectorCtrl.$inject = ['$scope', '$state', '$document', 'edRoomService', 'edEmployeeService', 'edPrinterService'];\n\n\tfunction edRoomSelectorCtrl($scope, $state, $document, edRoomService, edEmployeeService, edPrinterService) {\n\t\tvar vm = this;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.displayRoomInfoType = edRoomService.getDisplayRoomInfoType();\n\t\tvm.selectRoom = selectRoom;\n\t\tvm.selectAll = selectAll;\n\t\tvm.selectNone = selectNone;\n\t\tvm.allowSelectAll = edRoomService.getSelectMultipleRooms();\n\t\tvm.filteredEmployees = edRoomService.getAllRooms();\n\t\tvm.clearFilter = clearFilter;\n\t\tvm.locationFilter = locationFilter;\n\t\tvm.filterLocations = filterLocations;\n\t\tvm.location = {\n\t\t\t'buf': false,\n\t\t\t'nyc': false\n\t\t};\n\t\tvm.locations = [];\n\t\tvm.nycOnly = nycOnly;\n\t\tvm.floorFilter = floorFilter;\n\t\tvm.filterFloors = filterFloors;\n\t\tvm.floor = {\n\t\t\t'6': false,\n\t\t\t'7': false,\n\t\t\t'8': false\n\t\t};\n\t\tvm.floors = [];\n\n\t\tfunction filterLocations(location) {\n\t\t\tif (vm.location[location]) {\n\t\t\t\tvm.locations.push(location);\n\t\t\t} else {\n\t\t\t\tvm.locations.splice(vm.locations.indexOf(location), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction locationFilter(room) {\n\t\t\tif (vm.locations.length > 0) {\n\t\t\t\tif (room.location) {\n\t\t\t\t\treturn vm.locations.indexOf(room.location) > -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction nycOnly() {\n\t\t\treturn vm.locations.length === 1 && vm.locations[0] === 'nyc';\n\t\t}\n\n\t\tfunction filterFloors(floor) {\n\t\t\tif (vm.floor[floor]) {\n\t\t\t\tvm.floors.push(floor);\n\t\t\t} else {\n\t\t\t\tvm.floors.splice(vm.floors.indexOf(floor), 1);\n\t\t\t}\n\t\t}\n\n\t\tfunction floorFilter(room) {\n\t\t\t// Only use the floor filter if NYC is not the only location selected\n\t\t\tif (!nycOnly()) {\n\t\t\t\t// If a floor(s) has been selected\n\t\t\t\tif (vm.floors.length > 0) {\n\t\t\t\t\t// If the room is on a floor in BUF\n\t\t\t\t\tif (room.floor && room.location === 'buf') {\n\t\t\t\t\t\t// Include this room if they are on the selected floor (in BUF)\n\t\t\t\t\t\treturn vm.floors.indexOf(room.floor) > -1;\n\t\t\t\t\t\t// Include this room if NYC is also a selected location\n\t\t\t\t\t} else if (vm.locations.indexOf('nyc') > -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Include all filtered room if no floor is selected\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// Include all filtered room if NYC is the only location selected\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoom(room) {\n\t\t\tif (vm.displayRoomInfoType === 'profile') {\n\t\t\t\tvm.selectedRooms = edRoomService.updateSelectedRooms(room);\n\t\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t\t$state.go('rooms.profile');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (vm.displayRoomInfoType === 'location') {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tedRoomService.updateMappedRoom(room);\n\t\t\t}\n\t\t}\n\n\t\tfunction selectAll() {\n\t\t\tvm.selectedRooms = edRoomService.addAllFilteredRooms(vm.filteredRooms);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t// If the user is viewing a room profile page other than the generic room profile page\n\t\t\t// go back to the generic room page\n\t\t\tif ($state.current.name !== 'rooms.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction selectNone() {\n\t\t\tvm.selectedRooms = edRoomService.removeAllSelectedRooms();\n\t\t\tif ($state.current.name !== 'employees.profile') {\n\t\t\t\t$state.go('rooms.profile');\n\t\t\t}\n\t\t}\n\n\t\tfunction clearFilter() {\n\t\t\tvm.roomName = '';\n\t\t\tvm.floors = [];\n\t\t\tvm.floor = {\n\t\t\t\t'6': false,\n\t\t\t\t'7': false,\n\t\t\t\t'8': false\n\t\t\t};\n\t\t\tvm.locations = [];\n\t\t\tvm.location = {\n\t\t\t\t'buf': false,\n\t\t\t\t'nyc': false\n\t\t\t};\n\t\t\tvm.type = '';\n\t\t}\n\n\t\tvar deregisterSelectMultipleRoomsChange = $scope.$on('selectMultipleRoomsChange', function (event, allowSelectMultipleRooms) {\n\t\t\tvm.allowSelectAll = allowSelectMultipleRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectMultipleRoomsChange);\n\n\t\tvar deregisterDisplayRoomInfoTypeChange = $scope.$on('displayRoomInfoTypeChange', function (event, displayRoomInfoType) {\n\t\t\tvm.displayRoomInfoType = displayRoomInfoType;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterDisplayRoomInfoTypeChange);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomTopbarCtrl', edRoomTopbarCtrl);\n\n\tedRoomTopbarCtrl.$inject = ['$scope', 'edRoomService'];\n\n\tfunction edRoomTopbarCtrl($scope, edRoomService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\n\t\tvar deregisterSelectedRoomsChanged = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t});\n\n\t\t$scope.$on('$destroy', deregisterSelectedRoomsChanged);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').directive('edRoom', edRoom);\n\n\tedRoom.$inject = ['$stateParams', '$document', '$timeout', 'edRoomService'];\n\n\tfunction edRoom($stateParams, $document, $timeout, edRoomService) {\n\t\tvar directive = {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl: '/partials/rooms/components/room',\n\t\t\treplace: true,\n\t\t\tscope: {\n\t\t\t\tname: '@',\n\t\t\t\tseat: '@',\n\t\t\t\tnumber: '@',\n\t\t\t\tclassification: '@',\n\t\t\t\txpos: '@',\n\t\t\t\typos: '@'\n\t\t\t},\n\t\t\tlink: linkFunc,\n\t\t\tcontroller: ctrlFunc,\n\t\t\tcontrollerAs: 'vm'\n\t\t};\n\n\t\treturn directive;\n\n\t\tfunction linkFunc(scope, el, attrs) {\n\t\t\tscope.mappedRoom = edRoomService.getMappedRoom();\n\n\t\t\tif ($stateParams.name === attrs.name && scope.mappedRoom) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t});\n\t\t\t\t}, 800);\n\t\t\t} else {\n\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t}\n\n\t\t\tvar deregister = scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\t\tif (mappedRoom && mappedRoom.name === attrs.name) {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t$document.scrollToElement(el, 300, 300).then(function () {\n\t\t\t\t\t\t\tel.addClass('mapped').append('<div class=\"marker\"><div class=\"pulse\"></div><div class=\"pin\"></div></div>');\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 100);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeClass('mapped').find('.marker').remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tscope.$on('$destroy', deregister);\n\t\t}\n\t}\n\n\tctrlFunc.$inject = ['$state', 'edRoomService', 'edNotifierService', 'edEmployeeService', 'edPrinterService', '_'];\n\n\tfunction ctrlFunc($state, edRoomService, edNotifierService, edEmployeeService, edPrinterService, _) {\n\t\tvar vm = this;\n\t\tvm.mapRoom = mapRoom;\n\t\tvm.viewProfile = viewProfile;\n\t\tvm.rooms = edRoomService.getAllRooms();\n\t\tvm.mappedRoom = null;\n\n\t\tfunction mapRoom(name) {\n\t\t\tvar mappedRoomArray = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.name === name;\n\t\t\t});\n\n\t\t\tif (mappedRoomArray.length > 0) {\n\t\t\t\t// Only allow 1 thing to be mapped at a time\n\t\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\t\tedPrinterService.updateMappedPrinter(null);\n\t\t\t\tvm.mappedRoom = edRoomService.updateMappedRoom(mappedRoomArray[0]);\n\t\t\t} else {\n\t\t\t\tedNotifierService.error('Sorry, I don\\'t know this room.');\n\t\t\t}\n\t\t}\n\n\t\tfunction viewProfile(seat) {\n\t\t\tvar selectedRoom = _.filter(vm.rooms, function (room) {\n\t\t\t\treturn room.seat === seat;\n\t\t\t});\n\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\tedRoomService.updateSelectedRooms(selectedRoom[0]);\n\t\t\t$state.go('rooms.profile.name', {'room': selectedRoom[0].name});\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').factory('edCachedRoomResourceService', edCachedRoomResourceService);\n\n\tedCachedRoomResourceService.$inject = ['edRoomResourceService'];\n\n\tfunction edCachedRoomResourceService(edRoomResourceService) {\n\t\tvar rooms;\n\t\tvar service = {\n\t\t\tquery: query\n\t\t};\n\n\t\treturn service;\n\n\t\tfunction query() {\n\t\t\tif (!rooms) {\n\t\t\t\trooms = edRoomResourceService.query();\n\t\t\t}\n\n\t\t\treturn rooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomResourceService', edRoomResourceService);\n\n\tedRoomResourceService.$inject = ['$resource'];\n\n\tfunction edRoomResourceService($resource) {\n\t\tvar roomResource = $resource('/api/rooms/:id', {\n\t\t\t_id: '@id'\n\t\t}, {\n\t\t\tupdate: {method: 'PUT', isArray: false}\n\t\t});\n\n\t\treturn roomResource;\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').factory('edRoomService', edRoomService);\n\n\tedRoomService.$inject = ['$rootScope', 'edCachedRoomResourceService'];\n\n\tfunction edRoomService($rootScope, edCachedRoomResourceService) {\n\t\tvar selectedRooms = [];\n\t\tvar selectedRoomAdded = false;\n\t\tvar profilePageNumber = 1;\n\t\tvar mappedRoom = null;\n\t\tvar selectMultipleRooms = false;\n\t\tvar displayRoomInfoType = 'profile';\n\t\tvar service = {\n\t\t\tgetAllRooms: getAllRooms,\n\t\t\tgetSelectedRooms: getSelectedRooms,\n\t\t\taddAllFilteredRooms: addAllFilteredRooms,\n\t\t\tupdateSelectedRooms: updateSelectedRooms,\n\t\t\tremoveAllSelectedRooms: removeAllSelectedRooms,\n\t\t\tsetSelectMultipleRooms: setSelectMultipleRooms,\n\t\t\tgetSelectMultipleRooms: getSelectMultipleRooms,\n\t\t\tupdateMappedRoom: updateMappedRoom,\n\t\t\tgetMappedRoom: getMappedRoom,\n\t\t\tsetDisplayRoomInfoType: setDisplayRoomInfoType,\n\t\t\tgetDisplayRoomInfoType: getDisplayRoomInfoType,\n\t\t\tgetSelectedRoomAdded: getSelectedRoomAdded,\n\t\t\tsetProfilePageNumber: setProfilePageNumber,\n\t\t\tgetProfilePageNumber: getProfilePageNumber\n\t\t};\n\t\treturn service;\n\n\t\t/**\n\t\t * Gets all pooms from the database (or memory)\n\t\t *\n\t\t * @return {Array} rooms\n\t\t */\n\t\tfunction getAllRooms() {\n\t\t\treturn edCachedRoomResourceService.query();\n\t\t}\n\n\t\t/**\n\t\t * Gets the selected rooms\n\t\t *\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction getSelectedRooms() {\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Adds all the filtered rooms to the selected rooms\n\t\t * Removes any unfiltered rooms from selected rooms\n\t\t *\n\t\t * @param {Array} rooms to add to selected\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction addAllFilteredRooms(rooms) {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tangular.forEach(rooms, function (room) {\n\t\t\t\troom.selected = true;\n\t\t\t});\n\t\t\tselectedRooms = rooms;\n\t\t\tselectedRoomAdded = true;\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Updates the mapped room\n\t\t *\n\t\t * @param {Object} room to map / un-map\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction updateMappedRoom(room) {\n\t\t\t// Un-map the currently mapped room\n\t\t\tif (!room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\tmappedRoom = null;\n\t\t\t\t// Un-map the currently mapped room and (possibly) map the new one\n\t\t\t} else if (room && mappedRoom) {\n\t\t\t\tmappedRoom.mapped = false;\n\t\t\t\t// Map the new room\n\t\t\t\tif (mappedRoom._id !== room._id) {\n\t\t\t\t\troom.mapped = true;\n\t\t\t\t\tmappedRoom = room;\n\t\t\t\t\t// Just remove the currently mapped room\n\t\t\t\t} else {\n\t\t\t\t\tmappedRoom = null;\n\t\t\t\t}\n\t\t\t\t// Map the requested room (none currently mapped)\n\t\t\t} else if (room && !mappedRoom) {\n\t\t\t\troom.mapped = true;\n\t\t\t\tmappedRoom = room;\n\t\t\t}\n\t\t\t$rootScope.$broadcast('mappedRoomChange', mappedRoom);\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Gets the mapped room\n\t\t *\n\t\t * @return {Object} mapped room\n\t\t */\n\t\tfunction getMappedRoom() {\n\t\t\treturn mappedRoom;\n\t\t}\n\n\t\t/**\n\t\t * Sets the type of info to display\n\t\t *\n\t\t * @param {String} infoType type of info we want to deal with\n\t\t * @return {String} type of info we want to deal with\n\t\t */\n\t\tfunction setDisplayRoomInfoType(infoType) {\n\t\t\tdisplayRoomInfoType = infoType;\n\t\t\t$rootScope.$broadcast('displayRoomInfoTypeChange', displayRoomInfoType);\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Gets the type of info to display\n\t\t *\n\t\t * @return {String} type of info we should deal with\n\t\t */\n\t\tfunction getDisplayRoomInfoType() {\n\t\t\treturn displayRoomInfoType;\n\t\t}\n\n\t\t/**\n\t\t * Updates the array of selected rooms\n\t\t *\n\t\t * @param {Object} room the room to add / remove from selected rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction updateSelectedRooms(room) {\n\t\t\t// Allowed to have multiple rooms selected\n\t\t\tif (selectMultipleRooms) {\n\t\t\t\t// This room is not already selected, so add them (and select them in the list)\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\tselectedRooms.unshift(room);\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them (and deselect them in the list)\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms.splice(selectedRooms.indexOf(room), 1);\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t\t// NOT allowed to have multiple rooms selected\n\t\t\t} else {\n\t\t\t\t// This room is not already selected, so add them and removed (and deselected) everyone else\n\t\t\t\tif (!room.selected) {\n\t\t\t\t\t// set all selected room's selected property to false\n\t\t\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\t\t\tprevSelected.selected = false;\n\t\t\t\t\t});\n\t\t\t\t\t// Set this room's selected property to true\n\t\t\t\t\troom.selected = true;\n\t\t\t\t\t// replace the array of selected rooms with just this one room\n\t\t\t\t\tselectedRooms = [room];\n\t\t\t\t\tselectedRoomAdded = true;\n\t\t\t\t\t// This room was already selected, so remove them\n\t\t\t\t} else {\n\t\t\t\t\troom.selected = false;\n\t\t\t\t\tselectedRooms = [];\n\t\t\t\t\tselectedRoomAdded = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Broadcast event for listeners\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Removes all selected rooms\n\t\t */\n\t\tfunction removeAllSelectedRooms() {\n\t\t\tangular.forEach(selectedRooms, function (prevSelected) {\n\t\t\t\tprevSelected.selected = false;\n\t\t\t});\n\t\t\tselectedRooms = [];\n\t\t\tselectedRoomAdded = false;\n\t\t\t$rootScope.$broadcast('selectedRoomsChange', selectedRooms);\n\t\t}\n\n\t\t/**\n\t\t * Returns if a selected room was added (true) or removed (false)\n\t\t *\n\t\t * @return {Boolean} selected rooms added\n\t\t */\n\t\tfunction getSelectedRoomAdded() {\n\t\t\treturn selectedRoomAdded;\n\t\t}\n\n\t\t/**\n\t\t * Sets the current page number of the room profiles\n\t\t *\n\t\t * @param {Number} pageNumber current page number on room profiles\n\t\t */\n\t\tfunction setProfilePageNumber(pageNumber) {\n\t\t\tprofilePageNumber = pageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Returns the room profile page number\n\t\t *\n\t\t * @return {Number} room profile page number\n\t\t */\n\t\tfunction getProfilePageNumber() {\n\t\t\treturn profilePageNumber;\n\t\t}\n\n\t\t/**\n\t\t * Sets the ability to select more than one room at a time\n\t\t *\n\t\t * @param {Boolean} selectMultiple allowed to select multiple rooms\n\t\t * @return {Array} selected rooms\n\t\t */\n\t\tfunction setSelectMultipleRooms(selectMultiple) {\n\t\t\tselectMultipleRooms = selectMultiple;\n\t\t\t// If there are multiple selected rooms, remove all but the last one added\n\t\t\tif (!selectMultiple && selectedRooms.length > 1) {\n\t\t\t\tvar lastSelectedRoom = selectedRooms.shift();\n\t\t\t\t// This room will be reselected in updateSelectedRooms\n\t\t\t\tlastSelectedRoom.selected = false;\n\t\t\t\tselectedRooms = updateSelectedRooms(lastSelectedRoom);\n\t\t\t}\n\t\t\t$rootScope.$broadcast('selectMultipleRoomsChange', selectMultipleRooms);\n\t\t\treturn selectedRooms;\n\t\t}\n\n\t\t/**\n\t\t * Gets wether or not we should allow multiple rooms to be selected\n\t\t *\n\t\t * @return {Boolean} allow selecting multiple room\n\t\t */\n\t\tfunction getSelectMultipleRooms() {\n\t\t\treturn selectMultipleRooms;\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomCtrl', edRoomCtrl);\n\n\tedRoomCtrl.$inject = ['edSidebarService'];\n\n\tfunction edRoomCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeMapCtrl', edEmployeeMapCtrl);\n\n\tedEmployeeMapCtrl.$inject = ['$state', '$stateParams', '$scope', 'edEmployeeService', 'edSidebarService'];\n\n\tfunction edEmployeeMapCtrl($state, $stateParams, $scope, edEmployeeService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.setSelectMultipleEmployees(true);\n\t\tvm.mappedEmployee = edEmployeeService.getMappedEmployee();\n\t\tvm.unknownLocationEmployee = false;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('location');\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.updateMappedEmployeeById($stateParams.employee);\n\t\t\t} else if (vm.mappedEmployee) {\n\t\t\t\tlocateEmployee(vm.mappedEmployee);\n\t\t\t}\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedEmployeeChange', function (event, mappedEmployee) {\n\t\t\tlocateEmployee(mappedEmployee);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateEmployee(employee) {\n\t\t\tif (employee) {\n\t\t\t\tif (employee.seat) {\n\t\t\t\t\t$state.go('employees.map.' + employee.location + '-' + employee.floor, {'seat': employee.seat});\n\t\t\t\t} else {\n\t\t\t\t\tvm.unknownLocationEmployee = true;\n\t\t\t\t\tvm.mappedEmployee = employee;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvm.unknownLocationEmployee = false;\n\t\t\t\tvm.mappedEmployee = null;\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edOrgChartCtrl', edOrgChartCtrl);\n\n\tedOrgChartCtrl.$inject = ['$scope', '$state', '$stateParams', 'edEmployeeService', 'edSidebarService', '_'];\n\n\tfunction edOrgChartCtrl($scope, $state, $stateParams, edEmployeeService, edSidebarService, _) {\n\t\tvar employees = edEmployeeService.getAllEmployees();\n\t\tvar vm = this;\n\t\tvm.selectedEmployee = edEmployeeService.getSelectedEmployees()[0];\n\t\tvm.manager = null;\n\t\tvm.directReports = [];\n\t\tvm.selectEmployee = selectEmployee;\n\t\tvm.profileEmployee = profileEmployee;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(false);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\t\t\tif ($stateParams.employee) {\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(getEmployeeById);\n\t\t\t} else if (vm.selectedEmployee) {\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getEmployeeById(employees) {\n\t\t\tvar employee = _.findWhere(employees, {'eid': parseInt($stateParams.employee)});\n\t\t\tif (employee) {\n\t\t\t\tif (employee !== vm.selectedEmployee) {\n\t\t\t\t\tselectEmployee(employee);\n\t\t\t\t}\n\t\t\t\tgetManager();\n\t\t\t\tgetDirectReports();\n\t\t\t}\n\t\t}\n\n\t\tfunction getManager() {\n\t\t\tvm.manager = _.findWhere(employees, {'eid': vm.selectedEmployee.mid});\n\t\t}\n\n\t\tfunction getDirectReports() {\n\t\t\tvm.directReports = _.sortBy(_.filter(employees, {'mid': vm.selectedEmployee.eid}), 'lastName');\n\t\t}\n\n\t\tfunction selectEmployee(employee) {\n\t\t\tvm.selectedEmployee = edEmployeeService.updateSelectedEmployees(employee)[0];\n\t\t}\n\n\t\tfunction profileEmployee() {\n\t\t\t$state.go('employees.profile.employee', {'employee': vm.selectedEmployee.eid});\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployee = selectedEmployees[0];\n\n\t\t\tif (vm.selectedEmployee) {\n\t\t\t\t$state.go('employees.org-chart', {'employee': vm.selectedEmployee.eid});\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edEmployeeProfileCtrl', edEmployeeProfileCtrl);\n\n\tedEmployeeProfileCtrl.$inject = ['$scope', '$document', 'edEmployeeService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edEmployeeProfileCtrl($scope, $document, edEmployeeService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedEmployees = edEmployeeService.getSelectedEmployees();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edEmployeeService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedEmployeeService.setDisplayEmployeeInfoType('profile');\n\t\t\tedEmployeeService.setSelectMultipleEmployees(true);\n\t\t\tedEmployeeService.updateMappedEmployee(null);\n\n\t\t\tif ($stateParams.employee || $stateParams.team || $stateParams.department || $stateParams.title || $stateParams.firstname || $stateParams.lastname) {\n\t\t\t\tedEmployeeService.removeAllSelectedEmployees();\n\t\t\t\tedEmployeeService.getAllEmployees().$promise.then(function (employees) {\n\t\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t\tselectEmployeeById(employees);\n\t\t\t\t\t} else if ($stateParams.team) {\n\t\t\t\t\t\tselectEmployeeByTeam(employees);\n\t\t\t\t\t} else if ($stateParams.department) {\n\t\t\t\t\t\tselectEmployeeByDepartment(employees);\n\t\t\t\t\t} else if ($stateParams.title) {\n\t\t\t\t\t\tselectEmployeeByTitle(employees);\n\t\t\t\t\t} else if ($stateParams.firstname || $stateParams.lastname) {\n\t\t\t\t\t\tselectEmployeeByName(employees);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tfunction selectEmployeeById(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.employee) {\n\t\t\t\t\t// Split eid query on comma\n\t\t\t\t\tvar employeeids = $stateParams.employee.split(',');\n\t\t\t\t\tangular.forEach(employeeids, function (eid) {\n\t\t\t\t\t\t// If the employee's id is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('eid') && employee.eid === parseInt(eid)) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTeam(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.team) {\n\t\t\t\t\t// Split teams query on comma\n\t\t\t\t\tvar teams = $stateParams.team.split(',');\n\t\t\t\t\tangular.forEach(teams, function (team) {\n\t\t\t\t\t\t// If the employee's team is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('team') && employee.team.toLowerCase() === team.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByDepartment(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.department) {\n\t\t\t\t\t// Split departments query on comma\n\t\t\t\t\tvar departments = $stateParams.department.split(',');\n\t\t\t\t\tangular.forEach(departments, function (department) {\n\t\t\t\t\t\t// If the employee's department is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('department') && employee.department.toLowerCase() === department.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByTitle(employees) {\n\t\t\tvar selectedEmployees = _.sortBy(_.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.title) {\n\t\t\t\t\t// Split titles query on pipe\n\t\t\t\t\tvar titles = $stateParams.title.split('|');\n\t\t\t\t\tangular.forEach(titles, function (title) {\n\t\t\t\t\t\t// If the employee's title is part of the query\n\t\t\t\t\t\tif (employee.hasOwnProperty('title') && employee.title.toLowerCase() === title.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}), 'lastName').reverse();\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectEmployeeByName(employees) {\n\t\t\tvar selectedEmployees = _.filter(employees, function (employee) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.firstname) {\n\t\t\t\t\t// Split first name query on comma\n\t\t\t\t\tvar firstnames = $stateParams.firstname.split(',');\n\t\t\t\t\t// Loop over each first name\n\t\t\t\t\tangular.forEach(firstnames, function (firstname) {\n\t\t\t\t\t\t// If the employee's first name (or nickname) is part of the query check the last names\n\t\t\t\t\t\tif (employee.firstName.toLowerCase() === firstname.toLowerCase() ||\n\t\t\t\t\t\t\t(employee.hasOwnProperty('nickname') && employee.nickname.toLowerCase() === firstname.toLowerCase())) {\n\t\t\t\t\t\t\t// If last names are on the query string\n\t\t\t\t\t\t\tif ($stateParams.lastname) {\n\t\t\t\t\t\t\t\t// Split last name query on comma\n\t\t\t\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// No last name query so only worry about the first name\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// This employee's first name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t// No first name query so only worry about the last name\n\t\t\t\t} else if ($stateParams.lastname) {\n\t\t\t\t\tvar lastnames = $stateParams.lastname.split(',');\n\t\t\t\t\t// Loop over all the last names\n\t\t\t\t\tangular.forEach(lastnames, function (lastname) {\n\t\t\t\t\t\t// If the employee's last name is part of the query string we have match\n\t\t\t\t\t\tif (employee.lastName.toLowerCase() === lastname.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t\t// This employee's last name is not a match\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedEmployees, function (employee) {\n\t\t\t\tedEmployeeService.updateSelectedEmployees(employee);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedEmployeeService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedEmployeesChange', function (event, selectedEmployees) {\n\t\t\tvm.selectedEmployees = selectedEmployees;\n\t\t\t// If we added to selected employees, go to first page and scroll to the top\n\t\t\tif (edEmployeeService.getSelectedEmployeeAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpLocationCtrl', edHelpLocationCtrl);\n\n\tedHelpLocationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpLocationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpNavigationCtrl', edHelpNavigationCtrl);\n\n\tedHelpNavigationCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpNavigationCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpOrgChartCtrl', edHelpOrgChartCtrl);\n\n\tedHelpOrgChartCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpOrgChartCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edHelpProfileCtrl', edHelpProfileCtrl);\n\n\tedHelpProfileCtrl.$inject = ['edSidebarService'];\n\n\tfunction edHelpProfileCtrl(edSidebarService) {\n\t\tvar vm = this;\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(true);\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterMapCtrl', edPrinterMapCtrl);\n\n\tedPrinterMapCtrl.$inject = ['$state', '$scope', 'edPrinterService', 'edSidebarService'];\n\n\tfunction edPrinterMapCtrl($state, $scope, edPrinterService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.setSelectMultiplePrinters(true);\n\t\tvm.mappedPrinter = edPrinterService.getMappedPrinter();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('location');\n\t\t\tlocatePrinter(vm.mappedPrinter);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedPrinterChange', function (event, mappedPrinter) {\n\t\t\tlocatePrinter(mappedPrinter);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locatePrinter(printer) {\n\t\t\tif (printer) {\n\t\t\t\t$state.go('printers.map.' + printer.location + '-' + printer.floor, {'name': printer.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edPrinterProfileCtrl', edPrinterProfileCtrl);\n\n\tedPrinterProfileCtrl.$inject = ['$scope', '$document', 'edPrinterService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edPrinterProfileCtrl($scope, $document, edPrinterService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedPrinters = edPrinterService.getSelectedPrinters();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edPrinterService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedPrinterService.setDisplayPrinterInfoType('profile');\n\t\t\tedPrinterService.setSelectMultiplePrinters(true);\n\t\t\tedPrinterService.updateMappedPrinter(null);\n\n\t\t\tif ($stateParams.printer || $stateParams.printerbrand) {\n\t\t\t\tedPrinterService.removeAllSelectedPrinters();\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByName);\n\t\t\t\t} else if ($stateParams.printerbrand) {\n\t\t\t\t\tedPrinterService.getAllPrinters().$promise.then(selectPrinterByBrand);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectPrinterByName(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printer) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar printers = $stateParams.printer.split(',');\n\t\t\t\t\t// Loop over each printer name\n\t\t\t\t\tangular.forEach(printers, function (name) {\n\t\t\t\t\t\t// If the printer's name is part of the query select it\n\t\t\t\t\t\tif (printer.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectPrinterByBrand(printers) {\n\t\t\tvar selectedPrinters = _.filter(printers, function (printer) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.printerbrand) {\n\t\t\t\t\t// Split printerbrand query on comma\n\t\t\t\t\tvar printerbrands = $stateParams.printerbrand.split(',');\n\t\t\t\t\t// Loop over each printerbrand\n\t\t\t\t\tangular.forEach(printerbrands, function (brand) {\n\t\t\t\t\t\t// If the printer's branc is part of the query select it\n\t\t\t\t\t\tif (printer.brand.toLocaleLowerCase() === brand.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedPrinters, function (printer) {\n\t\t\t\tedPrinterService.updateSelectedPrinters(printer);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedPrinterService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedPrintersChange', function (event, selectedPrinters) {\n\t\t\tvm.selectedPrinters = selectedPrinters;\n\t\t\t// If we added to selected printers, go to first page and scroll to the top\n\t\t\tif (edPrinterService.getSelectedPrinterAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomMapCtrl', edRoomMapCtrl);\n\n\tedRoomMapCtrl.$inject = ['$state', '$scope', 'edRoomService', 'edSidebarService'];\n\n\tfunction edRoomMapCtrl($state, $scope, edRoomService, edSidebarService) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.setSelectMultipleRooms(true);\n\t\tvm.mappedRoom = edRoomService.getMappedRoom();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('location');\n\t\t\tlocateRoom(vm.mappedRoom);\n\t\t}\n\n\t\tvar deregister = $scope.$on('mappedRoomChange', function (event, mappedRoom) {\n\t\t\tlocateRoom(mappedRoom);\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\n\t\tfunction locateRoom(room) {\n\t\t\tif (room) {\n\t\t\t\t$state.go('rooms.map.' + room.location + '-' + room.floor, {'name': room.name});\n\t\t\t}\n\t\t}\n\t}\n})();\n","(function () {\n\t'use strict';\n\tangular.module('app').controller('edRoomProfileCtrl', edRoomProfileCtrl);\n\n\tedRoomProfileCtrl.$inject = ['$scope', '$document', 'edRoomService', '$stateParams', 'edSidebarService', '_'];\n\n\tfunction edRoomProfileCtrl($scope, $document, edRoomService, $stateParams, edSidebarService, _) {\n\t\tvar vm = this;\n\t\tvm.selectedRooms = edRoomService.getSelectedRooms();\n\t\tvm.changePage = changePage;\n\t\tvm.currentPage = edRoomService.getProfilePageNumber();\n\n\t\tactivate();\n\n\t\tfunction activate() {\n\t\t\tedSidebarService.setLockSidebar(false);\n\t\t\tedRoomService.setDisplayRoomInfoType('profile');\n\t\t\tedRoomService.setSelectMultipleRooms(true);\n\t\t\tedRoomService.updateMappedRoom(null);\n\n\t\t\tif ($stateParams.room || $stateParams.roomtype) {\n\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByName);\n\t\t\t\t} else if ($stateParams.roomtype) {\n\t\t\t\t\tedRoomService.removeAllSelectedRooms();\n\t\t\t\t\tedRoomService.getAllRooms().$promise.then(selectRoomByType);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction selectRoomByName(rooms) {\n\t\t\tvar selectedRooms = _.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.room) {\n\t\t\t\t\t// Split name query on comma\n\t\t\t\t\tvar rooms = $stateParams.room.split(',');\n\t\t\t\t\t// Loop over each room name\n\t\t\t\t\tangular.forEach(rooms, function (name) {\n\t\t\t\t\t\t// If the room's name is part of the query select it\n\t\t\t\t\t\tif (room.name.toLocaleLowerCase() === name.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction selectRoomByType(rooms) {\n\t\t\tvar selectedRooms = _.sortBy(_.filter(rooms, function (room) {\n\t\t\t\tvar match = false;\n\t\t\t\tif ($stateParams.roomtype) {\n\t\t\t\t\t// Split roomtype query on comma\n\t\t\t\t\tvar roomtypes = $stateParams.roomtype.split(',');\n\t\t\t\t\t// Loop over each roomtype\n\t\t\t\t\tangular.forEach(roomtypes, function (type) {\n\t\t\t\t\t\t// If the room's type is part of the query select it\n\t\t\t\t\t\tif (room.type.toLocaleLowerCase() === type.toLowerCase()) {\n\t\t\t\t\t\t\tmatch = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t}), 'name').reverse();\n\n\t\t\tangular.forEach(selectedRooms, function (room) {\n\t\t\t\tedRoomService.updateSelectedRooms(room);\n\t\t\t});\n\t\t}\n\n\t\tfunction changePage(newPageNumber) {\n\t\t\tedRoomService.setProfilePageNumber(newPageNumber);\n\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t}\n\n\t\tvar deregister = $scope.$on('selectedRoomsChange', function (event, selectedRooms) {\n\t\t\tvm.selectedRooms = selectedRooms;\n\t\t\t// If we added to selected rooms, go to first page and scroll to the top\n\t\t\tif (edRoomService.getSelectedRoomAdded()) {\n\t\t\t\tvm.currentPage = 1;\n\t\t\t\t$document.scrollTopAnimated(0, 300);\n\t\t\t}\n\t\t});\n\n\t\t$scope.$on('$destroy', deregister);\n\t}\n})();"],"sourceRoot":"/source/"}